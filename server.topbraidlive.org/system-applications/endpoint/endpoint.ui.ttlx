# baseURI: http://server.topbraidlive.org/system-applications/sparql
# imports: http://server.topbraidlive.org/system-applications/tbladmin
# imports: http://server.topbraidlive.org/tblui
# imports: http://topbraid.org/swa
# imports: http://uispin.org/html

@prefix adminguide: <http://server.topbraidlive.org/doc/adminguide#> .
@prefix afn: <http://jena.hpl.hp.com/ARQ/function#> .
@prefix arg: <http://spinrdf.org/arg#> .
@prefix cfg: <http://server.topbraidlive.org/web/2009/config#> .
@prefix charts: <http://uispin.org/charts#> .
@prefix composite: <http://www.topbraid.org/2007/05/composite.owl#> .
@prefix config: <http://server.topbraidlive.org/dynamic/config#> .
@prefix contact: <http://www.w3.org/2000/10/swap/pim/contact#> .
@prefix crosswalk: <http://topbraid.org/crosswalk#> .
@prefix crosswalk.spin: <http://topbraid.org/crosswalk.spin#> .
@prefix crosswalkprojects: <http://teamwork.topbraidlive.org/crosswalkprojects#> .
@prefix css: <http://uispin.org/css#> .
@prefix daml: <http://www.daml.org/2001/03/daml+oil#> .
@prefix dash: <http://datashapes.org/dash#> .
@prefix datatype: <http://qudt.org/vocab/datatype/> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix dcam: <http://purl.org/dc/dcam/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix default: <http://uispin.org/default#> .
@prefix deployProjectToServer: <http://server.topbraidlive.org/doc/deployProjectToServer#> .
@prefix devguide: <http://evn.topbraidlive.org/evndoc.www/devguide#> .
@prefix doap: <http://usefulinc.com/ns/doap#> .
@prefix doc: <http://www.w3.org/2000/10/swap/pim/doc#> .
@prefix dtype: <http://www.linkedmodel.org/schema/dtype#> .
@prefix edg: <http://edg.topbraid.solutions/model/> .
@prefix edg.glossary: <http://edg.topbraid.solutions/glossary/> .
@prefix edg.sqoop: <http://edg.topbraid.solutions/model/sqoop/> .
@prefix edg.v: <http://edg.topbraid.solutions/view/> .
@prefix email: <http://topbraid.org/email#> .
@prefix endpoint: <http://server.topbraidlive.org/endpoint#> .
@prefix evnAdminIndex: <http://evn.topbraidlive.org/evnAdminIndex#> .
@prefix evnIntro: <http://evn.topbraidlive.org/evndoc.www/evnIntro#> .
@prefix evndoc: <http://evn.topbraidlive.org/evndoc.www/evndoc#> .
@prefix evninstallguide: <http://teamwork.topbraidlive.org/doc/evninstallguide#> .
@prefix evnui: <http://evn.topbraidlive.org/ui#> .
@prefix fn: <http://www.w3.org/2005/xpath-functions#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix formTemplate: <http://teamwork.topbraidlive.org/system/formTemplate#> .
@prefix geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> .
@prefix gettingstarted: <http://evn.topbraidlive.org/evndoc.www/gettingstarted#> .
@prefix glossary: <http://evn.topbraidlive.org/evndoc.www/glossary#> .
@prefix graphql: <http://datashapes.org/graphql#> .
@prefix html: <http://uispin.org/html#> .
@prefix imported: <http://topbraid.org/imported#> .
@prefix json: <http://topbraid.org/json#> .
@prefix let: <http://uispin.org/let#> .
@prefix letrs: <http://uispin.org/letrs#> .
@prefix list: <http://jena.hpl.hp.com/ARQ/list#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .
@prefix metadata: <http://topbraid.org/metadata#> .
@prefix ontologyprojects: <http://teamwork.topbraidlive.org/ontologyprojects#> .
@prefix org: <http://www.w3.org/ns/org#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix permissionGroupMgmt: <http://server.topbraidlive.org/doc/permissionGroupMgmt#> .
@prefix pg: <http://server.topbraidlive.org/web/2013/permissiongroups#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix provo: <http://www.w3.org/ns/prov#> .
@prefix quantity: <http://qudt.org/vocab/quantity/> .
@prefix qudt: <http://qudt.org/schema/qudt/> .
@prefix qudt-refdata: <http://qudt.org/vocab/refdata/> .
@prefix qudt.type: <http://qudt.org/vocab/type/> .
@prefix raci: <http://topbraid.org/raci#> .
@prefix raci.spin: <http://topbraid.org/raci.spin#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdm: <http://rdm.topbraidlive.org/rdm/> .
@prefix rdmfact: <http://topbraid.org/rdmfact#> .
@prefix rdmprojects: <http://rdm.topbraidlive.org/rdmprojects#> .
@prefix scheduler: <http://topbraid.org/scheduler#> .
@prefix sd: <http://www.w3.org/ns/sparql-service-description#> .
@prefix search: <http://topbraid.org/search#> .
@prefix search.spin: <http://topbraid.org/search.spin#> .
@prefix server: <http://server.topbraidlive.org/server.ui#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix sioc: <http://rdfs.org/sioc/ns#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix skosapp: <http://evn.topbraidlive.org/uiplugins#> .
@prefix skostemplate: <http://topbraid.org/spin/skostemplates#> .
@prefix skosxl: <http://www.w3.org/2008/05/skos-xl#> .
@prefix sm: <http://topbraid.org/sparqlmotion#> .
@prefix smf: <http://topbraid.org/sparqlmotionfunctions#> .
@prefix sml: <http://topbraid.org/sparqlmotionlib#> .
@prefix softwareprojects: <http://teamwork.topbraidlive.org/software/softwareprojects#> .
@prefix solr: <http://topbraid.org/solr#> .
@prefix sp: <http://spinrdf.org/sp#> .
@prefix sparqlmotionlib-swp: <http://topbraid.org/sparqlmotionlib-swp#> .
@prefix sparqlmotionlib-tbc: <http://topbraid.org/sparqlmotionlib-tbc#> .
@prefix spell: <http://topbraid.org/spellcheckresults#> .
@prefix spif: <http://spinrdf.org/spif#> .
@prefix spin: <http://spinrdf.org/spin#> .
@prefix spl: <http://spinrdf.org/spl#> .
@prefix spl-dynamic-ranges: <http://spinrdf.org/spl-dynamic-ranges#> .
@prefix spr: <http://spinrdf.org/spr#> .
@prefix spra: <http://spinrdf.org/spra#> .
@prefix stats: <http://topbraid.org/statistics#> .
@prefix status: <http://topbraid.org/status#> .
@prefix style: <http://uispin.org/style#> .
@prefix svg: <http://uispin.org/svg#> .
@prefix swa: <http://topbraid.org/swa#> .
@prefix swaclasses: <http://topbraid.org/swaclasses#> .
@prefix swaeditor: <http://topbraid.org/swaeditor#> .
@prefix swaowl: <http://topbraid.org/swaowl#> .
@prefix swashacl: <http://topbraid.org/swashacl#> .
@prefix swauml: <http://topbraid.org/swauml#> .
@prefix swon: <http://uispin.org/swon#> .
@prefix sxml: <http://topbraid.org/sxml#> .
@prefix tables: <http://topbraid.org/tables#> .
@prefix tagger: <http://evn.topbraidlive.org/tagger#> .
@prefix taggerprojects: <http://evn.topbraidlive.org/taggerprojects#> .
@prefix task: <http://topbraid.org/task#> .
@prefix tasks: <http://topbraid.org/tasks#> .
@prefix taxonomies: <http://evn.topbraidlive.org/evnprojects#> .
@prefix tbl: <http://topbraidlive.org/functions#> .
@prefix tbladmin: <http://server.topbraidlive.org/system-applications/tbladmin#> .
@prefix tbladmindoc: <http://server.topbraidlive.org/doc/adminguide#> .
@prefix tblinstallguide: <http://server.topbraidlive.org/doc/tblinstallguide#> .
@prefix tblui: <http://server.topbraidlive.org/tblui#> .
@prefix teaminstallsec: <http://teamwork.topbraidlive.org/doc/teamworkInstallGuideSections#> .
@prefix teamwork: <http://topbraid.org/teamwork#> .
@prefix teamworkconfig: <http://server.topbraidlive.org/system-applications/teamworkconfig#> .
@prefix teamworknotifications: <http://topbraid.org/teamworknotifications#> .
@prefix teamworkrules: <http://topbraid.org/teamworkrules#> .
@prefix teamworkscripts: <http://topbraid.org/teamworkscripts#> .
@prefix textindex: <http://topbraid.org/textindex#> .
@prefix tops: <http://www.topbraid.org/tops#> .
@prefix tosh: <http://topbraid.org/tosh#> .
@prefix tosh.ui: <http://topbraid.org/tosh.ui#> .
@prefix ui: <http://uispin.org/ui#> .
@prefix uix: <http://topbraidlive.org/uix#> .
@prefix unit: <http://qudt.org/vocab/unit/> .
@prefix userAdminIndex: <http://evn.topbraidlive.org/userAdminIndex#> .
@prefix userIndex: <http://evn.topbraidlive.org/evndoc.www/userIndex#> .
@prefix usingtagger: <http://evn.topbraidlive.org/taggerdoc.www/usingtagger#> .
@prefix vaem: <http://www.linkedmodel.org/schema/vaem#> .
@prefix voag: <http://voag.linkedmodel.org/voag/> .
@prefix vs: <http://www.w3.org/2003/06/sw-vocab-status/ns#> .
@prefix wf: <http://www.w3.org/2005/01/wf/flow#> .
@prefix wot: <http://xmlns.com/wot/0.1/> .
@prefix xlink: <http://www.w3.org/1999/xlink#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

endpoint:HomePage
  a ui:NodeClass ;
  ui:errorPrototype """
<ui:if ui:condition=\"{= teamwork:isExplorerUser(smf:userWithName(smf:currentUserName())) &amp;&amp; (!tbl:explorerUsersCanUseSPARQLEndpoint()) }\">
  Access Denied.
</ui:if>
"""^^ui:Literal ;
  ui:headIncludes """
<ui:group>
    <link href=\"{= ui:lib() }/assets/lib/yasgui/yasqe.min.css\" rel=\"stylesheet\" type=\"text/css\"/>
    <link href=\"{= ui:lib() }/assets/lib/yasgui/yasr.min.css\" rel=\"stylesheet\" type=\"text/css\"/>
    <link href=\"{= ui:lib() }/assets/css/buttons.dataTables.min.css\" rel=\"stylesheet\" type=\"text/css\"/>
    <script src=\"{= ui:lib() }/assets/lib/yasgui/yasqe.bundled.min.js\"/>
    <script src=\"{= ui:lib() }/assets/lib/yasgui/yasr.bundled.min.js\"/>
    <script src=\"{= ui:lib() }/assets/lib/yasgui/jsonResponsePlugin.js\"/>
    <script src=\"{= ui:lib() }/server/build/sparqlForm.bundle.js\"/>
    <title>TopBraid Live SPARQL Endpoint</title>
</ui:group>
"""^^ui:Literal ;
  ui:prototype """
<ui:group>
    <tblui:PageContainer arg:class=\"sparql-endpoint-page\" arg:title=\"TopBraid Live SPARQL Endpoint\">
        <tblui:Section arg:label=\"Query\">
            <div id=\"query\">
                <form action=\"\" name=\"endpoint\">
                    <swa:LabeledElement arg:label=\"SPARQL Query\">
                        <textarea class=\"form-control\" cols=\"100\" id=\"query-area\" name=\"query\" rows=\"10\">SELECT *
WHERE {
	GRAPH &lt;http://topbraid.org/examples/kennedys&gt; {
		?subject a &lt;http://topbraid.org/examples/kennedys#Person&gt; .
	}
} ORDER BY ?subject</textarea>
                    </swa:LabeledElement>
                    <br/>
                    <swa:LabeledElement arg:label=\"Default Graph\">
                        <select class=\"form-control endpoint-home-page-default-graph\" id=\"default_graph_uri\" name=\"default_graph_uri\">
                            <option value=\"\"/>
                            <ui:forEach ui:resultSet='{#
                                    SELECT DISTINCT ?graph
                                    WHERE {
                                        ?file tops:files ( \"/\" true true ) .
                                        BIND (smf:baseURI(?file) AS ?graph) .
                                        FILTER bound(?graph) .
                                        FILTER smf:canRead(?graph) .
                                    }
                                    ORDER BY (?graph) }'>
                                <option value=\"{= ?graph }\">{= ?graph }</option>
                            </ui:forEach>
                        </select>
                    </swa:LabeledElement>
                    <swa:LabeledElement>
                        <div class=\"checkbox\">
                            <input id=\"include-imports\" name=\"include-imports\" type=\"checkbox\">Include Imports</input>
                        </div>
                    </swa:LabeledElement>
                    <br/>
                </form>
                <input class=\"btn btn-default\" id=\"clear-query\" type=\"button\" value=\"Clear Query\"/>
                <swa:Space/>
                <input class=\"btn btn-default\" id=\"clear-results\" type=\"button\" value=\"Clear Results\"/>
                <swa:Space/>
                <input class=\"btn btn-default\" id=\"submit-query\" type=\"button\" value=\"Submit Query\"/>
            </div>
        </tblui:Section>
        <tblui:Section arg:label=\"Results\">
            <div id=\"results-content\"/>
        </tblui:Section>
        <script>$(document).ready(function(){
			localStorage.removeItem('prefixes');

			YASQE.Autocompleters.prefixes.fetchFrom = 'prefix.cc';
			var yasqe = YASQE.fromTextArea(document.getElementById('query-area'), {
				createShareLink: null,
				sparql: {
					showQueryButton: true,
					endpoint: \"sparql\"
				}
			});
			yasqe.disableCompleter(\"classes\")
			yasqe.disableCompleter(\"properties\")

			window.yasqe = yasqe;
			YASR.registerOutput(\"jsonResponse\", jsonResponsePlugin);
			var yasr = YASR(document.getElementById(\"results-content\"), {
				outputPlugins: [\"table\", \"error\", \"boolean\", \"jsonResponse\", \"pivot\", \"gchart\", \"leaflet\"],
				getUsedPrefixes: yasqe.getPrefixesFromQuery
			});
			yasqe.setSize(null, 'auto');
			yasr.plugins.table.options.fetchTitlesFromPreflabel = false
			yasr.plugins.table.options.datatable.dom = '&lt;\"dtTopHeader\"ilf&gt;Br&lt;\"tq-yasr-results-container\"t&gt;ip'; 
			yasqe.options.sparql.callbacks.complete = yasr.setResponse;
		});</script>
    </tblui:PageContainer>
</ui:group>
"""^^ui:Literal ;
  ui:responseType ui:HTML ;
  rdfs:subClassOf tblui:Elements ;
  rdfs:subClassOf swa:Elements ;
  rdfs:subClassOf ui:Element ;
.
<http://server.topbraidlive.org/system-applications/sparql>
  a owl:Ontology ;
  owl:imports <http://server.topbraidlive.org/system-applications/tbladmin> ;
  owl:imports <http://server.topbraidlive.org/tblui> ;
  owl:imports <http://topbraid.org/swa> ;
  owl:imports <http://uispin.org/html> ;
  owl:versionInfo "Created with TopBraid Composer" ;
.
