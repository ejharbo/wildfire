!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.LineageGram=e()}}(function(){var e;return function(){function e(t,i,n){function r(a,s){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[a]={exports:{}};t[a][0].call(d.exports,function(e){var i=t[a][1][e];return r(i||e)},d,d.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}return e}()({1:[function(t,i,n){(function(r,o){!function(t,r){"object"==typeof n&&"undefined"!=typeof i?i.exports=r():"function"==typeof e&&e.amd?e(r):t.ES6Promise=r()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function n(e){Z=e}function a(e){K=e}function s(){return function(){return r.nextTick(h)}}function l(){return function(){W(h)}}function u(){var e=0,t=new $(h),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=h,function(){return e.port2.postMessage(0)}}function c(){var e=setTimeout;return function(){return e(h,1)}}function h(){for(var e=0;e<X;e+=2){var t=ie[e],i=ie[e+1];t(i),ie[e]=void 0,ie[e+1]=void 0}X=0}function f(){try{var e=t,i=e("vertx");return W=i.runOnLoop||i.runOnContext,l()}catch(n){return c()}}function p(e,t){var i=arguments,n=this,r=new this.constructor(m);void 0===r[re]&&z(r);var o=n._state;return o?!function(){var e=i[o-1];K(function(){return I(o,r,e,n._result)})}():S(n,r,e,t),r}function g(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(m);return P(i,e),i}function m(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return le.error=t,le}}function x(e,t,i,n){try{e.call(t,i,n)}catch(r){return r}}function w(e,t,i){K(function(e){var n=!1,r=x(i,t,function(i){n||(n=!0,t!==i?P(e,i):A(e,i))},function(t){n||(n=!0,M(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&r&&(n=!0,M(e,r))},e)}function E(e,t){t._state===ae?A(e,t._result):t._state===se?M(e,t._result):S(t,void 0,function(t){return P(e,t)},function(t){return M(e,t)})}function _(e,t,n){t.constructor===e.constructor&&n===p&&t.constructor.resolve===g?E(e,t):n===le?M(e,le.error):void 0===n?A(e,t):i(n)?w(e,t,n):A(e,t)}function P(t,i){t===i?M(t,v()):e(i)?_(t,i,b(i)):A(t,i)}function k(e){e._onerror&&e._onerror(e._result),T(e)}function A(e,t){e._state===oe&&(e._result=t,e._state=ae,0!==e._subscribers.length&&K(T,e))}function M(e,t){e._state===oe&&(e._state=se,e._result=t,K(k,e))}function S(e,t,i,n){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+ae]=i,r[o+se]=n,0===o&&e._state&&K(T,e)}function T(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],r=t[a+i],n?I(i,n,r,o):r(o);e._subscribers.length=0}}function L(){this.error=null}function N(e,t){try{return e(t)}catch(i){return ue.error=i,ue}}function I(e,t,n,r){var o=i(n),a=void 0,s=void 0,l=void 0,u=void 0;if(o){if(a=N(n,r),a===ue?(u=!0,s=a.error,a=null):l=!0,t===a)return void M(t,y())}else a=r,l=!0;t._state!==oe||(o&&l?P(t,a):u?M(t,s):e===ae?A(t,a):e===se&&M(t,a))}function O(e,t){try{t(function(t){P(e,t)},function(t){M(e,t)})}catch(i){M(e,i)}}function C(){return de++}function z(e){e[re]=de++,e._state=void 0,e._result=void 0,e._subscribers=[]}function B(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[re]||z(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):M(this.promise,R())}function R(){return new Error("Array Methods must be provided an Array")}function D(e){return new B(this,e).promise}function F(e){var t=this;return new t(Y(e)?function(i,n){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(i,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function q(e){var t=this,i=new t(m);return M(i,e),i}function j(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(e){this[re]=C(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&j(),this instanceof G?O(this,e):H())}function V(){var e=void 0;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=e.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===n&&!i.cast)return}e.Promise=G}var U=void 0;U=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=U,X=0,W=void 0,Z=void 0,K=function(e,t){ie[X]=e,ie[X+1]=t,X+=2,2===X&&(Z?Z(h):ne())},Q="undefined"!=typeof window?window:void 0,J=Q||{},$=J.MutationObserver||J.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof r&&"[object process]"==={}.toString.call(r),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ie=new Array(1e3),ne=void 0;ne=ee?s():$?u():te?d():void 0===Q&&"function"==typeof t?f():c();var re=Math.random().toString(36).substring(16),oe=void 0,ae=1,se=2,le=new L,ue=new L,de=0;return B.prototype._enumerate=function(){for(var e=this.length,t=this._input,i=0;this._state===oe&&i<e;i++)this._eachEntry(t[i],i)},B.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===g){var r=b(e);if(r===p&&e._state!==oe)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(i===G){var o=new i(m);_(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},B.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===oe&&(this._remaining--,e===se?M(n,i):this._result[t]=i),0===this._remaining&&A(n,this._result)},B.prototype._willSettleAt=function(e,t){var i=this;S(e,void 0,function(e){return i._settledAt(ae,t,e)},function(e){return i._settledAt(se,t,e)})},G.all=D,G.race=F,G.resolve=g,G.reject=q,G._setScheduler=n,G._setAsap=a,G._asap=K,G.prototype={constructor:G,then:p,"catch":function(e){return this.then(null,e)}},V(),G.polyfill=V,G.Promise=G,G})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(t,i,n){!function(e,t){"object"==typeof n&&"string"!=typeof n.nodeName?i.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("FileSaver requires a window with a document");return t(e)}:t(e)}(window||this,function(t,i){"use strict";if(!("undefined"==typeof t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var n=t.document,r=function(){return t.URL||t.webkitURL||t},o=n.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in o,s=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},l=/constructor/i.test(t.HTMLElement)||t.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent),d=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c="application/octet-stream",h=4e4,f=function(e){var t=function(){"string"==typeof e?r().revokeObjectURL(e):e.remove()};setTimeout(t,h)},p=function(e,t,i){t=[].concat(t);for(var n=t.length;n--;){var r=e["on"+t[n]];if("function"==typeof r)try{r.call(e,i||e)}catch(o){d(o)}}},g=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},m=function(e,i,n){n||(e=g(e));var d,h=this,m=e.type,v=m===c,y=function(){p(h,"writestart progress write writeend".split(" "))},b=function(){if((u||v&&l)&&t.FileReader){var i=new FileReader;return i.onloadend=function(){var e=u?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=t.open(e,"_blank");n||(t.location.href=e),e=void 0,h.readyState=h.DONE,y()},i.readAsDataURL(e),void(h.readyState=h.INIT)}if(d||(d=r().createObjectURL(e)),v)t.location.href=d;else{var n=t.open(d,"_blank");n||(t.location.href=d)}h.readyState=h.DONE,y(),f(d)};return h.readyState=h.INIT,a?(d=r().createObjectURL(e),void setTimeout(function(){o.href=d,o.download=i,s(o),y(),f(d),h.readyState=h.DONE})):void b()},v=m.prototype,y=function(e,t,i){return new m(e,t||e.name||"download",i)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&(y=function(e,t,i){return t=t||e.name||"download",i||(e=g(e)),navigator.msSaveOrOpenBlob(e,t)}),v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,"function"==typeof e&&e.amd&&e("file-saverjs",[],function(){return y}),"undefined"==typeof i&&(t.saveAs=y),y}})},{}],3:[function(e,t,i){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?g=p.concat(g):v=-1,g.length&&l())}function l(){if(!m){var e=o(s);m=!0;for(var t=g.length;t;){for(p=g,g=[];++v<t;)p&&p[v].run();v=-1,t=g.length}p=null,m=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function d(){}var c,h,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var p,g=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];g.push(new u(e,t)),1!==g.length||m||o(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=d,f.addListener=d,f.once=d,f.off=d,f.removeListener=d,f.removeAllListeners=d,f.emit=d,f.prependListener=d,f.prependOnceListener=d,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],4:[function(e,t,i){(function(e){"use strict";var t={},i=function(e){var n,r,o,a,s;i.classes.dispatcher.extend(this);var l=this,u=e||{};if("string"==typeof u||u instanceof HTMLElement?u={renderers:[u]}:"[object Array]"===Object.prototype.toString.call(u)&&(u={renderers:u}),a=u.renderers||u.renderer||u.container,u.renderers&&0!==u.renderers.length||("string"==typeof a||a instanceof HTMLElement||"object"==typeof a&&"container"in a)&&(u.renderers=[a]),u.id){if(t[u.id])throw'sigma: Instance "'+u.id+'" already exists.';Object.defineProperty(this,"id",{value:u.id})}else{for(s=0;t[s];)s++;Object.defineProperty(this,"id",{value:""+s})}for(t[this.id]=this,this.settings=new i.classes.configurable(i.settings,u.settings||{}),Object.defineProperty(this,"graph",{value:new i.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var t,i={};for(t in e.data)i[t]=e.data[t];i.renderer=e.target,this.dispatchEvent(e.type,i)}.bind(this),o=u.renderers||[],n=0,r=o.length;n<r;n++)this.addRenderer(o[n]);for(o=u.middlewares||[],n=0,r=o.length;n<r;n++)this.middlewares.push("string"==typeof o[n]?i.middlewares[o[n]]:o[n]);"object"==typeof u.graph&&u.graph&&(this.graph.read(u.graph),this.refresh()),window.addEventListener("resize",function(){l.settings&&l.refresh()})};if(i.prototype.addCamera=function(t){var n,r=this;if(!arguments.length){for(t=0;this.cameras[""+t];)t++;t=""+t}if(this.cameras[t])throw'sigma.addCamera: The camera "'+t+'" already exists.';return n=new i.classes.camera(t,this.graph,this.settings),this.cameras[t]=n,n.quadtree=new i.classes.quad,i.classes.edgequad!==e&&(n.edgequadtree=new i.classes.edgequad),n.bind("coordinatesUpdated",function(e){r.renderCamera(n,n.isAnimated)}),this.renderersPerCamera[t]=[],n},i.prototype.killCamera=function(e){if(e="string"==typeof e?this.cameras[e]:e,!e)throw"sigma.killCamera: The camera is undefined.";var t,i,n=this.renderersPerCamera[e.id];for(i=n.length,t=i-1;t>=0;t--)this.killRenderer(n[t]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},i.prototype.addRenderer=function(e){var t,n,r,o,a=e||{};if("string"==typeof a?a={container:document.getElementById(a)}:a instanceof HTMLElement&&(a={container:a}),"string"==typeof a.container&&(a.container=document.getElementById(a.container)),"id"in a)t=a.id;else{for(t=0;this.renderers[""+t];)t++;t=""+t}if(this.renderers[t])throw'sigma.addRenderer: The renderer "'+t+'" already exists.';if(n="function"==typeof a.type?a.type:i.renderers[a.type],n=n||i.renderers.def,r="camera"in a?a.camera instanceof i.classes.camera?a.camera:this.cameras[a.camera]||this.addCamera(a.camera):this.addCamera(),this.cameras[r.id]!==r)throw"sigma.addRenderer: The camera is not properly referenced.";return o=new n(this.graph,r,this.settings,a),this.renderers[t]=o,Object.defineProperty(o,"id",{value:t}),o.bind&&o.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[r.id].push(o),o},i.prototype.killRenderer=function(e){if(e="string"==typeof e?this.renderers[e]:e,!e)throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],i=t.indexOf(e);return i>=0&&t.splice(i,1),e.kill&&e.kill(),delete this.renderers[e.id],this},i.prototype.refresh=function(t){var n,r,o,a,s,l,u=0;for(t=t||{},a=this.middlewares||[],n=0,r=a.length;n<r;n++)a[n].call(this,0===n?"":"tmp"+u+":",n===r-1?"ready:":"tmp"+ ++u+":");for(o in this.cameras)s=this.cameras[o],s.settings("autoRescale")&&this.renderersPerCamera[s.id]&&this.renderersPerCamera[s.id].length?i.middlewares.rescale.call(this,a.length?"ready:":"",s.readPrefix,{width:this.renderersPerCamera[s.id][0].width,height:this.renderersPerCamera[s.id][0].height}):i.middlewares.copy.call(this,a.length?"ready:":"",s.readPrefix),t.skipIndexation||(l=i.utils.getBoundaries(this.graph,s.readPrefix),s.quadtree.index(this.graph.nodes(),{prefix:s.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}),s.edgequadtree!==e&&s.settings("drawEdges")&&s.settings("enableEdgeHovering")&&s.edgequadtree.index(this.graph,{prefix:s.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}));for(a=Object.keys(this.renderers),n=0,r=a.length;n<r;n++)if(this.renderers[a[n]].process)if(this.settings("skipErrors"))try{this.renderers[a[n]].process()}catch(d){console.log('Warning: The renderer "'+a[n]+'" crashed on ".process()"')}else this.renderers[a[n]].process();return this.render(),this},i.prototype.render=function(){var e,t,i;for(i=Object.keys(this.renderers),e=0,t=i.length;e<t;e++)if(this.settings("skipErrors"))try{this.renderers[i[e]].render()}catch(n){this.settings("verbose")&&console.log('Warning: The renderer "'+i[e]+'" crashed on ".render()"')}else this.renderers[i[e]].render();return this},i.prototype.renderCamera=function(e,t){var i,n,r,o=this;if(t)for(r=this.renderersPerCamera[e.id],i=0,n=r.length;i<n;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(a){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();else if(!this.cameraFrames[e.id]){for(r=this.renderersPerCamera[e.id],i=0,n=r.length;i<n;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(a){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete o.cameraFrames[e.id]})}return this},i.prototype.kill=function(){var e;this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares;for(e in this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);delete this.renderers,delete this.cameras;for(e in this)this.hasOwnProperty(e)&&delete this[e];delete t[this.id]},i.instances=function(e){return arguments.length?t[e]:i.utils.extend({},t)},i.version="1.2.1","undefined"!=typeof this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=i}).call(this),function(e){"use strict";function n(e,t){var i,r,o,a;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(e in arguments[0])n(e,arguments[0][e]);else if(arguments.length>1)for(a=Array.isArray(e)?e:e.split(/ /),i=0,r=a.length;i!==r;i+=1)o=a[i],L[o]||(L[o]=[]),L[o].push({handler:t})}function r(e,t){var i,n,r,o,a,s,l=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(i=0,n=l.length;i!==n;i+=1){if(s=l[i],L[s]){for(a=[],r=0,o=L[s].length;r!==o;r+=1)L[s][r].handler!==t&&a.push(L[s][r]);L[s]=a}L[s]&&0===L[s].length&&delete L[s]}else for(i=0,n=l.length;i!==n;i+=1)delete L[l[i]];else L=Object.create(null)}function o(e,t){var i,n,r,o,a,s,l=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,i=0,r=l.length;i!==r;i+=1)if(s=l[i],L[s])for(a={type:s,data:t||{}},n=0,o=L[s].length;n!==o;n+=1)try{L[s][n].handler(a)}catch(u){}}function a(){var e,t,i,n,r=!1,o=x(),a=k.shift();if(i=a.job(),o=x()-o,a.done++,a.time+=o,a.currentTime+=o,a.weightTime=a.currentTime/(a.weight||1),a.averageTime=a.time/a.done,n=a.count?a.count<=a.done:!i,!n){for(e=0,t=k.length;e<t;e++)if(k[e].weightTime>a.weightTime){k.splice(e,0,a),r=!0;break}r||k.push(a)}return n?a:null}function s(e){var t=k.length;P[e.id]=e,e.status="running",t&&(e.weightTime=k[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=x(),o("jobStarted",y(e)),k.push(e)}function l(){var e,t,i;for(e in _)t=_[e],t.after?A[e]=t:s(t),delete _[e];for(E=!!k.length;k.length&&x()-w<T.frameDuration;)if(i=a()){d(i.id);for(e in A)A[e].after===i.id&&(s(A[e]),delete A[e])}E?(w=x(),o("enterFrame"),setTimeout(l,0)):o("stop")}function u(e,t){var i,n,r;if(Array.isArray(e)){for(S=!0,i=0,n=e.length;i<n;i++)u(e[i].id,v(e[i],t));S=!1,E||(w=x(),o("start"),l())}else if("object"==typeof e)if("string"==typeof e.id)u(e.id,e);else{S=!0;for(i in e)"function"==typeof e[i]?u(i,v({job:e[i]},t)):u(i,v(e[i],t));S=!1,E||(w=x(),o("start"),l())}else{if("string"!=typeof e)throw new Error("[conrad.addJob] Wrong arguments.");if(h(e))throw new Error('[conrad.addJob] Job with id "'+e+'" already exists.');if("function"==typeof t)r={id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:t};else{if("object"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");r=v({id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},t)}_[e]=r,o("jobAdded",y(r)),E||S||(w=x(),o("start"),l())}return this}function d(e){var t,i,n,r,a=!1;if(Array.isArray(e))for(t=0,i=e.length;t<i;t++)d(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(n=[P,A,_],t=0,i=n.length;t<i;t++)e in n[t]&&(r=n[t][e],T.history&&(r.status="done",M.push(r)),o("jobEnded",y(r)),delete n[t][e],"function"==typeof r.end&&r.end(),a=!0);for(n=k,t=0,i=n.length;t<i;t++)if(n[t].id===e){n.splice(t,1);break}if(!a)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function c(){var e,t=v(_,P,A);if(T.history)for(e in t)t[e].status="done",M.push(t[e]),"function"==typeof t[e].end&&t[e].end();return _={},A={},P={},k=[],E=!1,this}function h(e){var t=_[e]||P[e]||A[e];return t?v(t):null}function f(e,t){var i;if("string"==typeof a1&&1===arguments.length)return T[a1];i="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(i[a1]=a2);for(var n in i)void 0!==i[n]?T[n]=i[n]:delete T[n];return this}function p(){return E}function g(){return M=[],this}function m(e,t){var i,n,r,o,a,s,l;if(!arguments.length){a=[];for(n in _)a.push(_[n]);for(n in A)a.push(A[n]);for(n in P)a.push(P[n]);a=a.concat(M)}if("string"==typeof e)switch(e){case"waiting":a=b(A);break;case"running":a=b(P);break;case"done":a=M;break;default:s=e}if(e instanceof RegExp&&(s=e),!s&&("string"==typeof t||t instanceof RegExp)&&(s=t),s){if(l="string"==typeof s,a instanceof Array)i=a;else if("object"==typeof a){i=[];for(n in a)i=i.concat(a[n])}else{i=[];for(n in _)i.push(_[n]);for(n in A)i.push(A[n]);for(n in P)i.push(P[n]);i=i.concat(M)}for(a=[],r=0,o=i.length;r<o;r++)(l?i[r].id===s:i[r].id.match(s))&&a.push(i[r])}return y(a)}function v(){var e,t,i={},n=arguments.length;for(e=n-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i}function y(e){var t,i,n;if(!e)return e;if(Array.isArray(e))for(t=[],i=0,n=e.length;i<n;i++)t.push(y(e[i]));else if("object"==typeof e){t={};for(i in e)t[i]=y(e[i])}else t=e;return t}function b(e){var t,i=[];for(t in e)i.push(e[t]);return i}function x(){return Date.now?Date.now():(new Date).getTime()}if(e.conrad)throw new Error("conrad already exists");var w,E=!1,_={},P={},k=[],A={},M=[],S=!1,T={frameDuration:20,history:!0},L=Object.create(null);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var N={hasJob:h,addJob:u,killJob:d,killAll:c,settings:f,getStats:m,isRunning:p,clearHistory:g,bind:n,unbind:r,version:"0.1.0"};"undefined"!=typeof i&&("undefined"!=typeof t&&t.exports&&(i=t.exports=N),i.conrad=N),e.conrad=N}(this);var n=this.sigma,r=this.conrad;n.conrad=r,"undefined"==typeof HTMLElement&&(HTMLElement=function(){}),"undefined"==typeof window&&(window={addEventListener:function(){}}),"undefined"!=typeof i&&("undefined"!=typeof t&&t.exports&&(i=t.exports=n),i.sigma=n),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";var t=this;n.utils=n.utils||{},n.utils.extend=function(){var e,t,i={},n=arguments.length;for(e=n-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i},n.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},n.utils.pkg=function(e){return(e||"").split(".").reduce(function(e,t){return t in e?e[t]:e[t]={}},t)},n.utils.id=function(){var e=0;return function(){return++e}}();var i={};n.utils.floatColor=function(e){if(i[e])return i[e];var t=e,n=0,r=0,o=0;"#"===e[0]?(e=e.slice(1),3===e.length?(n=parseInt(e.charAt(0)+e.charAt(0),16),r=parseInt(e.charAt(1)+e.charAt(1),16),o=parseInt(e.charAt(2)+e.charAt(2),16)):(n=parseInt(e.charAt(0)+e.charAt(1),16),r=parseInt(e.charAt(2)+e.charAt(3),16),o=parseInt(e.charAt(4)+e.charAt(5),16))):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),n=+e[1],r=+e[2],o=+e[3]);var a=256*n*256+256*r+o;return i[t]=a,a},n.utils.zoomTo=function(e,t,i,r,o){var a,s,l,u=e.settings;s=Math.max(u("zoomMin"),Math.min(u("zoomMax"),e.ratio*r)),s!==e.ratio&&(r=s/e.ratio,l={x:t*(1-r)+e.x,y:i*(1-r)+e.y,ratio:s},o&&o.duration?(a=n.misc.animation.killAll(e),o=n.utils.extend(o,{easing:a?"quadraticOut":"quadraticInOut"}),n.misc.animation.camera(e,l,o)):(e.goTo(l),o&&o.onComplete&&o.onComplete()))},n.utils.getQuadraticControlPoint=function(e,t,i,n){return{x:(e+i)/2+(n-t)/4,y:(t+n)/2+(e-i)/4}},n.utils.getPointOnQuadraticCurve=function(e,t,i,n,r,o,a){return{x:Math.pow(1-e,2)*t+2*(1-e)*e*o+Math.pow(e,2)*n,y:Math.pow(1-e,2)*i+2*(1-e)*e*a+Math.pow(e,2)*r}},n.utils.getPointOnBezierCurve=function(e,t,i,n,r,o,a,s,l){var u=Math.pow(1-e,3),d=3*e*Math.pow(1-e,2),c=3*Math.pow(e,2)*(1-e),h=Math.pow(e,3);return{x:u*t+d*o+c*s+h*n,y:u*i+d*a+c*l+h*r}},n.utils.getSelfLoopControlPoints=function(e,t,i){return{x1:e-7*i,y1:t,x2:e,y2:t+7*i}},n.utils.getDistance=function(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))},n.utils.getCircleIntersection=function(e,t,i,n,r,o){var a,s,l,u,d,c,h,f,p;if(s=n-e,l=r-t,u=Math.sqrt(l*l+s*s),u>i+o)return!1;if(u<Math.abs(i-o))return!1;a=(i*i-o*o+u*u)/(2*u),f=e+s*a/u,p=t+l*a/u,d=Math.sqrt(i*i-a*a),c=-l*(d/u),h=s*(d/u);var g=f+c,m=f-c,v=p+h,y=p-h;return{xi:g,xi_prime:m,yi:v,yi_prime:y}},n.utils.isPointOnSegment=function(e,t,i,r,o,a,s){var l=Math.abs((t-r)*(o-i)-(e-i)*(a-r)),u=n.utils.getDistance(i,r,o,a),d=l/u;return d<s&&Math.min(i,o)<=e&&e<=Math.max(i,o)&&Math.min(r,a)<=t&&t<=Math.max(r,a)},n.utils.isPointOnQuadraticCurve=function(e,t,i,r,o,a,s,l,u){var d=n.utils.getDistance(i,r,o,a);if(Math.abs(e-i)>d||Math.abs(t-r)>d)return!1;for(var c,h=n.utils.getDistance(e,t,i,r),f=n.utils.getDistance(e,t,o,a),p=.5,g=h<f?-.01:.01,m=.001,v=100,y=n.utils.getPointOnQuadraticCurve(p,i,r,o,a,s,l),b=n.utils.getDistance(e,t,y.x,y.y);v-- >0&&p>=0&&p<=1&&b>u&&(g>m||g<-m);)c=b,y=n.utils.getPointOnQuadraticCurve(p,i,r,o,a,s,l),b=n.utils.getDistance(e,t,y.x,y.y),b>c?(g=-g/2,p+=g):p+g<0||p+g>1?(g/=2,b=c):p+=g;return b<u},n.utils.isPointOnBezierCurve=function(e,t,i,r,o,a,s,l,u,d,c){var h=n.utils.getDistance(i,r,s,l);if(Math.abs(e-i)>h||Math.abs(t-r)>h)return!1;for(var f,p=n.utils.getDistance(e,t,i,r),g=n.utils.getDistance(e,t,o,a),m=.5,v=p<g?-.01:.01,y=.001,b=100,x=n.utils.getPointOnBezierCurve(m,i,r,o,a,s,l,u,d),w=n.utils.getDistance(e,t,x.x,x.y);b-- >0&&m>=0&&m<=1&&w>c&&(v>y||v<-y);)f=w,x=n.utils.getPointOnBezierCurve(m,i,r,o,a,s,l,u,d),w=n.utils.getDistance(e,t,x.x,x.y),w>f?(v=-v/2,m+=v):m+v<0||m+v>1?(v/=2,w=f):m+=v;return w<c},n.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},n.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},n.utils.getPixelRatio=function(){var t=1;return window.screen.deviceXDPI!==e&&window.screen.logicalXDPI!==e&&window.screen.deviceXDPI>window.screen.logicalXDPI?t=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==e&&(t=window.devicePixelRatio),t},n.utils.getWidth=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},n.utils.getCenter=function(e){var t=e.target.namespaceURI.indexOf("svg")!==-1?1:n.utils.getPixelRatio();return{x:n.utils.getWidth(e)/(2*t),y:n.utils.getHeight(e)/(2*t)}},n.utils.mouseCoords=function(e,t,i){return t=t||n.utils.getX(e),i=i||n.utils.getY(e),{x:t-n.utils.getCenter(e).x,y:i-n.utils.getCenter(e).y,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}},n.utils.getHeight=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},n.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},n.utils.getOffset=function(e){for(var t=0,i=0;e;)i+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:i,left:t}},n.utils.doubleClick=function(e,t,i){var r,o=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],r=e._doubleClickHandler[t],r.push(function(e){return o++,2===o?(o=0,i(e)):void(1===o&&setTimeout(function(){o=0},n.settings.doubleClickTimeout))}),e.addEventListener(t,r[r.length-1],!1)},n.utils.unbindDoubleClick=function(e,t){for(var i,n=(e._doubleClickHandler||{})[t]||[];i=n.pop();)e.removeEventListener(t,i);delete(e._doubleClickHandler||{})[t]},n.utils.easings=n.utils.easings||{},n.utils.easings.linearNone=function(e){return e},n.utils.easings.quadraticIn=function(e){return e*e},n.utils.easings.quadraticOut=function(e){return e*(2-e)},n.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},n.utils.easings.cubicIn=function(e){return e*e*e},n.utils.easings.cubicOut=function(e){return--e*e*e+1},n.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},n.utils.loadShader=function(e,t,i,n){var r,o=e.createShader(i);return e.shaderSource(o,t),e.compileShader(o),r=e.getShaderParameter(o,e.COMPILE_STATUS),r?o:(n&&n('Error compiling shader "'+o+'":'+e.getShaderInfoLog(o)),e.deleteShader(o),null)},n.utils.loadProgram=function(e,t,i,n,r){var o,a,s=e.createProgram();for(o=0;o<t.length;++o)e.attachShader(s,t[o]);if(i)for(o=0;o<i.length;++o)e.bindAttribLocation(s,locations?locations[o]:o,opt_attribs[o]);return e.linkProgram(s),a=e.getProgramParameter(s,e.LINK_STATUS),a?s:(r&&r("Error in program linking: "+e.getProgramInfoLog(s)),e.deleteProgram(s),null)},n.utils.pkg("sigma.utils.matrices"),n.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},n.utils.matrices.rotation=function(e,t){var i=Math.cos(e),n=Math.sin(e);return t?[i,-n,n,i]:[i,-n,0,n,i,0,0,0,1]},n.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},n.utils.matrices.multiply=function(e,t,i){var n=i?2:3,r=e[0*n+0],o=e[0*n+1],a=e[0*n+2],s=e[1*n+0],l=e[1*n+1],u=e[1*n+2],d=e[2*n+0],c=e[2*n+1],h=e[2*n+2],f=t[0*n+0],p=t[0*n+1],g=t[0*n+2],m=t[1*n+0],v=t[1*n+1],y=t[1*n+2],b=t[2*n+0],x=t[2*n+1],w=t[2*n+2];return i?[r*f+o*m,r*p+o*v,s*f+l*m,s*p+l*v]:[r*f+o*m+a*b,r*p+o*v+a*x,r*g+o*y+a*w,s*f+l*m+u*b,s*p+l*v+u*x,s*g+l*y+u*w,d*f+c*m+h*b,d*p+c*v+h*x,d*g+c*y+h*w]}}.call(this),function(e){"use strict";var t,i=0,n=["ms","moz","webkit","o"];for(t=0;t<n.length&&!e.requestAnimationFrame;t++)e.requestAnimationFrame=e[n[t]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[t]+"CancelAnimationFrame"]||e[n[t]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),o=Math.max(0,16-(r-i)),a=e.setTimeout(function(){t(r+o)},o);return i=r+o,a}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t,i,n=Array.prototype.slice.call(arguments,1),r=this;return t=function(){},i=function(){return r.apply(this instanceof t&&e?this:e,n.concat(Array.prototype.slice.call(arguments)))},t.prototype=this.prototype,i.prototype=new t,i})}(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.settings");var t={clone:!0,
immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};n.settings=n.utils.extend(n.settings||{},t)}.call(this),function(){"use strict";var e=function(){Object.defineProperty(this,"_handlers",{value:{}})};e.prototype.bind=function(e,t){var i,n,r,o;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(o="string"==typeof e?e.split(" "):e,i=0,n=o.length;i!==n;i+=1)r=o[i],r&&(this._handlers[r]||(this._handlers[r]=[]),this._handlers[r].push({handler:t}))}return this},e.prototype.unbind=function(e,t){var i,n,r,o,a,s,l,u="string"==typeof e?e.split(" "):e;if(!arguments.length){for(a in this._handlers)delete this._handlers[a];return this}if(t)for(i=0,n=u.length;i!==n;i+=1){if(l=u[i],this._handlers[l]){for(s=[],r=0,o=this._handlers[l].length;r!==o;r+=1)this._handlers[l][r].handler!==t&&s.push(this._handlers[l][r]);this._handlers[l]=s}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(i=0,n=u.length;i!==n;i+=1)delete this._handlers[u[i]];return this},e.prototype.dispatchEvent=function(e,t){var i,n,r,o,a,s,l,u=this,d="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,i=0,n=d.length;i!==n;i+=1)if(l=d[i],this._handlers[l]){for(s=u.getEvent(l,t),a=[],r=0,o=this._handlers[l].length;r!==o;r+=1)this._handlers[l][r].handler(s),this._handlers[l][r].one||a.push(this._handlers[l][r]);this._handlers[l]=a}return this},e.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},e.extend=function(t,i){var n;for(n in e.prototype)e.prototype.hasOwnProperty(n)&&(t[n]=e.prototype[n]);e.apply(t,i)},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=e):"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=e),i.dispatcher=e):this.dispatcher=e}.call(this),function(){"use strict";var e=function(){var t,i,n={},r=Array.prototype.slice.call(arguments,0),o=function(e,t){var i,a,s,l;{if(1!==arguments.length||"string"!=typeof e){if("object"==typeof e&&"string"==typeof t)return void 0!==(e||{})[t]?e[t]:o(t);for(i="object"==typeof e&&void 0===t?e:{},"string"==typeof e&&(i[e]=t),a=0,l=Object.keys(i),s=l.length;a<s;a++)n[l[a]]=i[l[a]];return this}if(void 0!==n[e])return n[e];for(a=0,s=r.length;a<s;a++)if(void 0!==r[a][e])return r[a][e]}};for(o.embedObjects=function(){var t=r.concat(n).concat(Array.prototype.splice.call(arguments,0));return e.apply({},t)},t=0,i=arguments.length;t<i;t++)o(arguments[t]);return o};"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=e):"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=e),i.configurable=e):this.configurable=e}.call(this),function(e){"use strict";function r(e,t,i){var n=function(){var n,r;for(n in d[e])d[e][n].apply(t,arguments);r=i.apply(t,arguments);for(n in u[e])u[e][n].apply(t,arguments);return r};return n}function o(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}var a=Object.create(null),s=Object.create(null),l=Object.create(null),u=Object.create(null),d=Object.create(null),c={immutable:!0,clone:!0},h=function(e){return c[e]},f=function(e){var t,i,n;n={settings:e||h,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(t in l)l[t].call(n);for(t in a)i=r(t,n,a[t]),this[t]=i,n[t]=i};f.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(a[e]||f[e])throw'The method "'+e+'" already exists.';return a[e]=t,u[e]=Object.create(null),d[e]=Object.create(null),this},f.hasMethod=function(e){return!(!a[e]&&!f[e])},f.attach=function(e,t,i,n){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof i||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var r;if("constructor"===e)r=l;else if(n){if(!d[e])throw'The method "'+e+'" does not exist.';r=d[e]}else{if(!u[e])throw'The method "'+e+'" does not exist.';r=u[e]}if(r[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return r[t]=i,this},f.attachBefore=function(e,t,i){return this.attach(e,t,i,!0)},f.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(s[e])throw'The index "'+e+'" already exists.';var i;s[e]=t;for(i in t){if("function"!=typeof t[i])throw"The bindings must be functions.";f.attach(i,e,t[i])}return this},f.addMethod("addNode",function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The node must have a string or number id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,i=e.id,n=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(n[t]=e[t]);else n=e;return this.settings("immutable")?Object.defineProperty(n,"id",{value:i,enumerable:!0}):n.id=i,this.inNeighborsIndex[i]=Object.create(null),this.outNeighborsIndex[i]=Object.create(null),this.allNeighborsIndex[i]=Object.create(null),this.inNeighborsCount[i]=0,this.outNeighborsCount[i]=0,this.allNeighborsCount[i]=0,this.nodesArray.push(n),this.nodesIndex[n.id]=n,this}),f.addMethod("addEdge",function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The edge must have a string or number id.";if("string"!=typeof e.source&&"number"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target&&"number"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,i=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(i[t]=e[t]);else i=e;return this.settings("immutable")?(Object.defineProperty(i,"id",{value:e.id,enumerable:!0}),Object.defineProperty(i,"source",{value:e.source,enumerable:!0}),Object.defineProperty(i,"target",{value:e.target,enumerable:!0})):(i.id=e.id,i.source=e.source,i.target=e.target),this.edgesArray.push(i),this.edgesIndex[i.id]=i,this.inNeighborsIndex[i.target][i.source]||(this.inNeighborsIndex[i.target][i.source]=Object.create(null)),this.inNeighborsIndex[i.target][i.source][i.id]=i,this.outNeighborsIndex[i.source][i.target]||(this.outNeighborsIndex[i.source][i.target]=Object.create(null)),this.outNeighborsIndex[i.source][i.target][i.id]=i,this.allNeighborsIndex[i.source][i.target]||(this.allNeighborsIndex[i.source][i.target]=Object.create(null)),this.allNeighborsIndex[i.source][i.target][i.id]=i,i.target!==i.source&&(this.allNeighborsIndex[i.target][i.source]||(this.allNeighborsIndex[i.target][i.source]=Object.create(null)),this.allNeighborsIndex[i.target][i.source][i.id]=i),this.inNeighborsCount[i.target]++,this.outNeighborsCount[i.source]++,this.allNeighborsCount[i.target]++,this.allNeighborsCount[i.source]++,this}),f.addMethod("dropNode",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,i,n;for(delete this.nodesIndex[e],t=0,n=this.nodesArray.length;t<n;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)this.edgesArray[t].source!==e&&this.edgesArray[t].target!==e||this.dropEdge(this.edgesArray[t].id);delete this.inNeighborsIndex[e],delete this.outNeighborsIndex[e],delete this.allNeighborsIndex[e],delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e];for(i in this.nodesIndex)delete this.inNeighborsIndex[i][e],delete this.outNeighborsIndex[i][e],delete this.allNeighborsIndex[i][e];return this}),f.addMethod("dropEdge",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,i,n;for(n=this.edgesIndex[e],delete this.edgesIndex[e],t=0,i=this.edgesArray.length;t<i;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return delete this.inNeighborsIndex[n.target][n.source][n.id],Object.keys(this.inNeighborsIndex[n.target][n.source]).length||delete this.inNeighborsIndex[n.target][n.source],delete this.outNeighborsIndex[n.source][n.target][n.id],Object.keys(this.outNeighborsIndex[n.source][n.target]).length||delete this.outNeighborsIndex[n.source][n.target],delete this.allNeighborsIndex[n.source][n.target][n.id],Object.keys(this.allNeighborsIndex[n.source][n.target]).length||delete this.allNeighborsIndex[n.source][n.target],n.target!==n.source&&(delete this.allNeighborsIndex[n.target][n.source][n.id],Object.keys(this.allNeighborsIndex[n.target][n.source]).length||delete this.allNeighborsIndex[n.target][n.source]),this.inNeighborsCount[n.target]--,this.outNeighborsCount[n.source]--,this.allNeighborsCount[n.source]--,this.allNeighborsCount[n.target]--,this}),f.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),f.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,o(this.nodesIndex),o(this.edgesIndex),o(this.nodesIndex),o(this.inNeighborsIndex),o(this.outNeighborsIndex),o(this.allNeighborsIndex),o(this.inNeighborsCount),o(this.outNeighborsCount),o(this.allNeighborsCount),this}),f.addMethod("read",function(e){var t,i,n;for(i=e.nodes||[],t=0,n=i.length;t<n;t++)this.addNode(i[t]);for(i=e.edges||[],t=0,n=i.length;t<n;t++)this.addEdge(i[t]);return this}),f.addMethod("nodes",function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,n=[];for(t=0,i=e.length;t<i;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"nodes: Wrong arguments.";n.push(this.nodesIndex[e[t]])}return n}throw"nodes: Wrong arguments."}),f.addMethod("degree",function(e,t){if(t={"in":this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e||"number"==typeof e)return t[e];if("[object Array]"===Object.prototype.toString.call(e)){var i,n,r=[];for(i=0,n=e.length;i<n;i++){if("string"!=typeof e[i]&&"number"!=typeof e[i])throw"degree: Wrong arguments.";r.push(t[e[i]])}return r}throw"degree: Wrong arguments."}),f.addMethod("edges",function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,n=[];for(t=0,i=e.length;t<i;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"edges: Wrong arguments.";n.push(this.edgesIndex[e[t]])}return n}throw"edges: Wrong arguments."}),"undefined"!=typeof n?(n.classes=n.classes||Object.create(null),n.classes.graph=f):"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=f),i.graph=f):this.graph=f}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.classes"),n.classes.camera=function(e,t,i,r){n.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof r&&r?i.embedObject(r):i},n.classes.camera.prototype.goTo=function(t){if(!this.settings("enableCamera"))return this;var i,n,r=t||{},o=["x","y","ratio","angle"];for(i=0,n=o.length;i<n;i++)if(r[o[i]]!==e){if("number"!=typeof r[o[i]]||isNaN(r[o[i]]))throw'Value for "'+o[i]+'" is not a number.';this[o[i]]=r[o[i]]}return this.dispatchEvent("coordinatesUpdated"),this},n.classes.camera.prototype.applyView=function(t,i,n){n=n||{},i=i!==e?i:this.prefix,t=t!==e?t:this.readPrefix;var r,o,a,s=n.nodes||this.graph.nodes(),l=n.edges||this.graph.edges(),u=Math.cos(this.angle)/this.ratio,d=Math.sin(this.angle)/this.ratio,c=Math.pow(this.ratio,this.settings("nodesPowRatio")),h=Math.pow(this.ratio,this.settings("edgesPowRatio")),f=(n.width||0)/2-this.x*u-this.y*d,p=(n.height||0)/2-this.y*u+this.x*d;for(r=0,o=s.length;r<o;r++)a=s[r],a[i+"x"]=(a[t+"x"]||0)*u+(a[t+"y"]||0)*d+f,a[i+"y"]=(a[t+"y"]||0)*u-(a[t+"x"]||0)*d+p,a[i+"size"]=(a[t+"size"]||0)/c;for(r=0,o=l.length;r<o;r++)l[r][i+"size"]=(l[r][t+"size"]||0)/h;return this},n.classes.camera.prototype.graphPosition=function(e,t,i){var n=0,r=0,o=Math.cos(this.angle),a=Math.sin(this.angle);return i||(n=-(this.x*o+this.y*a)/this.ratio,r=-(this.y*o-this.x*a)/this.ratio),{x:(e*o+t*a)/this.ratio+n,y:(t*o-e*a)/this.ratio+r}},n.classes.camera.prototype.cameraPosition=function(e,t,i){var n=0,r=0,o=Math.cos(this.angle),a=Math.sin(this.angle);return i||(n=-(this.x*o+this.y*a)/this.ratio,r=-(this.y*o-this.x*a)/this.ratio),{x:((e-n)*o-(t-r)*a)*this.ratio,y:((t-r)*o+(e-n)*a)*this.ratio}},n.classes.camera.prototype.getMatrix=function(){var e=n.utils.matrices.scale(1/this.ratio),t=n.utils.matrices.rotation(this.angle),i=n.utils.matrices.translation(-this.x,-this.y),r=n.utils.matrices.multiply(i,n.utils.matrices.multiply(t,e));return r},n.classes.camera.prototype.getRectangle=function(e,t){var i=this.cameraPosition(e,0,!0),n=this.cameraPosition(0,t,!0),r=this.cameraPosition(e/2,t/2,!0),o=this.cameraPosition(e/4,0,!0).x,a=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-r.x-o,y1:this.y-r.y-a,x2:this.x-r.x+o+i.x,y2:this.y-r.y-a+i.y,height:Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y+2*a,2))}}}.call(this),function(e){"use strict";function n(e,t){var i=t.x+t.width/2,n=t.y+t.height/2,r=e.y<n,o=e.x<i;return r?o?0:1:o?2:3}function r(e,t){for(var i=[],n=0;n<4;n++)e.x2>=t[n][0].x&&e.x1<=t[n][1].x&&e.y1+e.height>=t[n][0].y&&e.y1<=t[n][2].y&&i.push(n);return i}function o(e,t){for(var i=[],n=0;n<4;n++)c.collision(e,t[n])&&i.push(n);return i}function a(e,t){var i,n,r=t.level+1,o=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),s=Math.round(t.bounds.x),l=Math.round(t.bounds.y);switch(e){case 0:i=s,n=l;break;case 1:i=s+o,n=l;break;case 2:i=s,n=l+a;break;case 3:i=s+o,n=l+a}return d({x:i,y:n,width:o,height:a},r,t.maxElements,t.maxLevel)}function s(t,i,n){if(n.level<n.maxLevel)for(var o=r(i,n.corners),l=0,u=o.length;l<u;l++)n.nodes[o[l]]===e&&(n.nodes[o[l]]=a(o[l],n)),s(t,i,n.nodes[o[l]]);else n.elements.push(t)}function l(t,i){if(i.level<i.maxLevel){var r=n(t,i.bounds);return i.nodes[r]!==e?l(t,i.nodes[r]):[]}return i.elements}function u(t,i,n,r){if(r=r||{},i.level<i.maxLevel)for(var o=n(t,i.corners),a=0,s=o.length;a<s;a++)i.nodes[o[a]]!==e&&u(t,i.nodes[o[a]],n,r);else for(var l=0,d=i.elements.length;l<d;l++)r[i.elements[l].id]===e&&(r[i.elements[l].id]=i.elements[l]);return r}function d(e,t,i,n){return{level:t||0,bounds:e,corners:c.splitSquare(e),maxElements:i||20,maxLevel:n||4,elements:[],nodes:[]}}var c={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var n=[],r=[],o=0;o<4;o++){var a=this.projection(t[o],e),s=this.projection(i[o],e);n.push(a.x*e.x+a.y*e.y),r.push(s.x*e.x+s.y*e.y)}var l=Math.max.apply(Math,n),u=Math.max.apply(Math,r),d=Math.min.apply(Math,n),c=Math.min.apply(Math,r);return c<=l&&u>=d},collision:function(e,t){for(var i=this.axis(e,t),n=!0,r=0;r<4;r++)n=n&&this.axisCollision(i[r],e,t);return n}},h=function(){this._geom=c,this._tree=null,this._cache={query:!1,result:!1}};h.prototype.index=function(e,t){if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var i=t.prefix||"";this._tree=d(t.bounds,0,t.maxElements,t.maxLevel);for(var n=0,r=e.length;n<r;n++)s(e[n],c.pointToSquare({x:e[n][i+"x"],y:e[n][i+"y"],size:e[n][i+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},h.prototype.point=function(e,t){return this._tree?l({x:e,y:t},this._tree)||[]:[]},h.prototype.area=function(e){var t,i,n=JSON.stringify(e);if(this._cache.query===n)return this._cache.result;c.isAxisAligned(e)?(t=r,i=c.axisAlignedTopPoints(e)):(t=o,i=c.rectangleCorners(e));var a=this._tree?u(i,this._tree,t):[],s=[];for(var l in a)s.push(a[l]);return this._cache.query=n,this._cache.result=s,s},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=h):"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=h),i.quad=h):this.quad=h}.call(this),function(e){"use strict";function r(e,t){var i=t.x+t.width/2,n=t.y+t.height/2,r=e.y<n,o=e.x<i;return r?o?0:1:o?2:3}function o(e,t){for(var i=[],n=0;n<4;n++)e.x2>=t[n][0].x&&e.x1<=t[n][1].x&&e.y1+e.height>=t[n][0].y&&e.y1<=t[n][2].y&&i.push(n);return i}function a(e,t){for(var i=[],n=0;n<4;n++)h.collision(e,t[n])&&i.push(n);return i}function s(e,t){var i,n,r=t.level+1,o=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),s=Math.round(t.bounds.x),l=Math.round(t.bounds.y);switch(e){case 0:i=s,n=l;break;case 1:i=s+o,n=l;break;case 2:i=s,n=l+a;break;case 3:i=s+o,n=l+a}return c({x:i,y:n,width:o,height:a},r,t.maxElements,t.maxLevel)}function l(t,i,n){if(n.level<n.maxLevel)for(var r=o(i,n.corners),a=0,u=r.length;a<u;a++)n.nodes[r[a]]===e&&(n.nodes[r[a]]=s(r[a],n)),l(t,i,n.nodes[r[a]]);else n.elements.push(t)}function u(t,i){if(i.level<i.maxLevel){var n=r(t,i.bounds);return i.nodes[n]!==e?u(t,i.nodes[n]):[]}return i.elements}function d(t,i,n,r){if(r=r||{},i.level<i.maxLevel)for(var o=n(t,i.corners),a=0,s=o.length;a<s;a++)i.nodes[o[a]]!==e&&d(t,i.nodes[o[a]],n,r);else for(var l=0,u=i.elements.length;l<u;l++)r[i.elements[l].id]===e&&(r[i.elements[l].id]=i.elements[l]);return r}function c(e,t,i,n){return{level:t||0,bounds:e,corners:h.splitSquare(e),maxElements:i||40,maxLevel:n||8,elements:[],nodes:[]}}var h={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var i=n.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),r=Math.min(e.x1,e.x2,i.x),o=Math.max(e.x1,e.x2,i.x),a=Math.min(e.y1,e.y2,i.y),s=Math.max(e.y1,e.y2,i.y);return{x1:r-e.size,y1:a-e.size,x2:o+e.size,y2:a-e.size,height:s-a+2*e.size}},selfLoopToSquare:function(e){var t=n.utils.getSelfLoopControlPoints(e.x,e.y,e.size),i=Math.min(e.x,t.x1,t.x2),r=Math.max(e.x,t.x1,t.x2),o=Math.min(e.y,t.y1,t.y2),a=Math.max(e.y,t.y1,t.y2);return{x1:i-e.size,y1:o-e.size,x2:r+e.size,y2:o-e.size,height:a-o+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var n=[],r=[],o=0;o<4;o++){var a=this.projection(t[o],e),s=this.projection(i[o],e);n.push(a.x*e.x+a.y*e.y),r.push(s.x*e.x+s.y*e.y)}var l=Math.max.apply(Math,n),u=Math.max.apply(Math,r),d=Math.min.apply(Math,n),c=Math.min.apply(Math,r);return c<=l&&u>=d},collision:function(e,t){for(var i=this.axis(e,t),n=!0,r=0;r<4;r++)n=n&&this.axisCollision(i[r],e,t);return n}},f=function(){this._geom=h,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};f.prototype.index=function(e,t){if(!this._enabled)return this._tree;if(!t.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var i,r,o,a,s,u=t.prefix||"";this._tree=c(t.bounds,0,t.maxElements,t.maxLevel);for(var d=e.edges(),f=0,p=d.length;f<p;f++)r=e.nodes(d[f].source),o=e.nodes(d[f].target),s={x1:r[u+"x"],y1:r[u+"y"],x2:o[u+"x"],y2:o[u+"y"],size:d[f][u+"size"]||0},"curve"===d[f].type||"curvedArrow"===d[f].type?r.id===o.id?(a={x:r[u+"x"],y:r[u+"y"],size:r[u+"size"]||0},l(d[f],h.selfLoopToSquare(a),this._tree)):(i=n.utils.getQuadraticControlPoint(s.x1,s.y1,s.x2,s.y2),l(d[f],h.quadraticCurveToSquare(s,i),this._tree)):l(d[f],h.lineToSquare(s),this._tree);return this._cache={query:!1,result:!1},this._tree},f.prototype.point=function(e,t){return this._enabled&&this._tree?u({x:e,y:t},this._tree)||[]:[]},f.prototype.area=function(e){if(!this._enabled)return[];var t,i,n=JSON.stringify(e);if(this._cache.query===n)return this._cache.result;h.isAxisAligned(e)?(t=o,i=h.axisAlignedTopPoints(e)):(t=a,i=h.rectangleCorners(e));var r=this._tree?d(i,this._tree,t):[],s=[];for(var l in r)s.push(r[l]);return this._cache.query=n,this._cache.result=s,s},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=f):"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=f),i.edgequad=f):this.edgequad=f}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.captors"),n.captors.mouse=function(e,t,i){function r(e){var t,i,r;if(k("mouseEnabled")&&(E.dispatchEvent("mousemove",n.utils.mouseCoords(e)),v))return y=!0,b=!0,w&&clearTimeout(w),w=setTimeout(function(){y=!1},k("dragTimeout")),n.misc.animation.killAll(P),P.isMoving=!0,r=P.cameraPosition(n.utils.getX(e)-g,n.utils.getY(e)-m,!0),t=c-r.x,i=h-r.y,t===P.x&&i===P.y||(f=P.x,p=P.y,P.goTo({x:t,y:i})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function o(e){if(k("mouseEnabled")&&v){v=!1,w&&clearTimeout(w),P.isMoving=!1;var t=n.utils.getX(e),i=n.utils.getY(e);y?(n.misc.animation.killAll(P),n.misc.animation.camera(P,{x:P.x+k("mouseInertiaRatio")*(P.x-f),y:P.y+k("mouseInertiaRatio")*(P.y-p)},{easing:"quadraticOut",duration:k("mouseInertiaDuration")})):g===t&&m===i||P.goTo({x:P.x,y:P.y}),E.dispatchEvent("mouseup",n.utils.mouseCoords(e)),y=!1}}function a(e){if(k("mouseEnabled"))switch(c=P.x,h=P.y,f=P.x,p=P.y,g=n.utils.getX(e),m=n.utils.getY(e),b=!1,x=(new Date).getTime(),e.which){case 2:break;case 3:E.dispatchEvent("rightclick",n.utils.mouseCoords(e,g,m));break;default:v=!0,E.dispatchEvent("mousedown",n.utils.mouseCoords(e,g,m))}}function s(e){k("mouseEnabled")&&E.dispatchEvent("mouseout")}function l(e){if(k("mouseEnabled")){var t=n.utils.mouseCoords(e);t.isDragging=(new Date).getTime()-x>100&&b,E.dispatchEvent("click",t)}return e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function u(e){var t,i,r;if(k("mouseEnabled"))return i=1/k("doubleClickZoomingRatio"),E.dispatchEvent("doubleclick",n.utils.mouseCoords(e,g,m)),k("doubleClickEnabled")&&(t=P.cameraPosition(n.utils.getX(e)-n.utils.getCenter(e).x,n.utils.getY(e)-n.utils.getCenter(e).y,!0),r={duration:k("doubleClickZoomDuration")},n.utils.zoomTo(P,t.x,t.y,i,r)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function d(e){var t,i,r,o=n.utils.getDelta(e);if(k("mouseEnabled")&&k("mouseWheelEnabled")&&0!==o)return i=o>0?1/k("zoomingRatio"):k("zoomingRatio"),t=P.cameraPosition(n.utils.getX(e)-n.utils.getCenter(e).x,n.utils.getY(e)-n.utils.getCenter(e).y,!0),r={duration:k("mouseZoomDuration")},n.utils.zoomTo(P,t.x,t.y,i,r),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}var c,h,f,p,g,m,v,y,b,x,w,E=this,_=e,P=t,k=i;n.classes.dispatcher.extend(this),n.utils.doubleClick(_,"click",u),_.addEventListener("DOMMouseScroll",d,!1),_.addEventListener("mousewheel",d,!1),_.addEventListener("mousemove",r,!1),_.addEventListener("mousedown",a,!1),_.addEventListener("click",l,!1),_.addEventListener("mouseout",s,!1),document.addEventListener("mouseup",o,!1),this.kill=function(){n.utils.unbindDoubleClick(_,"click"),_.removeEventListener("DOMMouseScroll",d),_.removeEventListener("mousewheel",d),_.removeEventListener("mousemove",r),_.removeEventListener("mousedown",a),_.removeEventListener("click",l),_.removeEventListener("mouseout",s),document.removeEventListener("mouseup",o)}}}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.captors"),n.captors.touch=function(e,t,i){function r(e){var t=n.utils.getOffset(S);return{x:e.pageX-t.left,y:e.pageY-t.top}}function o(e){if(L("touchEnabled")){var t,i,n,o,a,s;switch(N=e.touches,N.length){case 1:T.isMoving=!0,_=1,u=T.x,d=T.y,f=T.x,p=T.y,a=r(N[0]),v=a.x,y=a.y;break;case 2:return T.isMoving=!0,_=2,a=r(N[0]),s=r(N[1]),t=a.x,n=a.y,i=s.x,o=s.y,f=T.x,p=T.y,c=T.angle,h=T.ratio,u=T.x,d=T.y,v=t,y=n,b=i,x=o,w=Math.atan2(x-y,b-v),E=Math.sqrt((x-y)*(x-y)+(b-v)*(b-v)),e.preventDefault(),!1}}}function a(e){if(L("touchEnabled")){N=e.touches;var t=L("touchInertiaRatio");switch(A&&(P=!1,clearTimeout(A)),_){case 2:if(1===e.touches.length){o(e),e.preventDefault();break}case 1:T.isMoving=!1,M.dispatchEvent("stopDrag"),P&&(k=!1,n.misc.animation.camera(T,{x:T.x+t*(T.x-f),y:T.y+t*(T.y-p)},{easing:"quadraticOut",duration:L("touchInertiaDuration")})),P=!1,_=0}}}function s(e){if(!k&&L("touchEnabled")){var t,i,o,a,s,l,S,I,O,C,z,B,R,D,F,q,j;switch(N=e.touches,P=!0,A&&clearTimeout(A),A=setTimeout(function(){P=!1},L("dragTimeout")),_){case 1:I=r(N[0]),t=I.x,o=I.y,C=T.cameraPosition(t-v,o-y,!0),D=u-C.x,F=d-C.y,D===T.x&&F===T.y||(f=T.x,p=T.y,T.goTo({x:D,y:F}),M.dispatchEvent("mousemove",n.utils.mouseCoords(e,I.x,I.y)),M.dispatchEvent("drag"));break;case 2:I=r(N[0]),O=r(N[1]),t=I.x,o=I.y,i=O.x,a=O.y,z=T.cameraPosition((v+b)/2-n.utils.getCenter(e).x,(y+x)/2-n.utils.getCenter(e).y,!0),S=T.cameraPosition((t+i)/2-n.utils.getCenter(e).x,(o+a)/2-n.utils.getCenter(e).y,!0),B=Math.atan2(a-o,i-t)-w,R=Math.sqrt((a-o)*(a-o)+(i-t)*(i-t))/E,t=z.x,o=z.y,q=h/R,t*=R,o*=R,j=c-B,s=Math.cos(-B),l=Math.sin(-B),i=t*s+o*l,a=o*s-t*l,t=i,o=a,D=t-S.x+u,F=o-S.y+d,q===T.ratio&&j===T.angle&&D===T.x&&F===T.y||(f=T.x,p=T.y,g=T.angle,m=T.ratio,T.goTo({x:D,y:F,angle:j,ratio:q}),M.dispatchEvent("drag"))}return e.preventDefault(),!1}}function l(e){var t,i,o;if(e.touches&&1===e.touches.length&&L("touchEnabled"))return k=!0,i=1/L("doubleClickZoomingRatio"),t=r(e.touches[0]),M.dispatchEvent("doubleclick",n.utils.mouseCoords(e,t.x,t.y)),L("doubleClickEnabled")&&(t=T.cameraPosition(t.x-n.utils.getCenter(e).x,t.y-n.utils.getCenter(e).y,!0),o={duration:L("doubleClickZoomDuration"),onComplete:function(){k=!1}},n.utils.zoomTo(T,t.x,t.y,i,o)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}var u,d,c,h,f,p,g,m,v,y,b,x,w,E,_,P,k,A,M=this,S=e,T=t,L=i,N=[];n.classes.dispatcher.extend(this),n.utils.doubleClick(S,"touchstart",l),S.addEventListener("touchstart",o,!1),S.addEventListener("touchend",a,!1),S.addEventListener("touchcancel",a,!1),S.addEventListener("touchleave",a,!1),S.addEventListener("touchmove",s,!1),this.kill=function(){n.utils.unbindDoubleClick(S,"touchstart"),S.addEventListener("touchstart",o),S.addEventListener("touchend",a),S.addEventListener("touchcancel",a),S.addEventListener("touchleave",a),S.addEventListener("touchmove",s)}}}.call(this),function(e){"use strict";
if("undefined"==typeof n)throw"sigma is not declared";if("undefined"==typeof r)throw"conrad is not declared";n.utils.pkg("sigma.renderers"),n.renderers.canvas=function(e,t,i,r){if("object"!=typeof r)throw"sigma.renderers.canvas: Wrong arguments.";if(!(r.container instanceof HTMLElement))throw"Container not found.";var o,a,s,l;for(n.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:n.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=r,this.container=this.options.container,this.settings="object"==typeof r.settings&&r.settings?i.embedObjects(r.settings):i,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],s=this.options.captors||[n.captors.mouse,n.captors.touch],o=0,a=s.length;o<a;o++)l="function"==typeof s[o]?s[o]:n.captors[s[o]],this.captors.push(new l(this.domElements.mouse,this.camera,this.settings));n.misc.bindEvents.call(this,this.options.prefix),n.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},n.renderers.canvas.prototype.render=function(t){t=t||{};var i,o,a,s,l,u,d,c,h,f,p,g,m,v={},y=this.graph,b=this.graph.nodes,x=(this.options.prefix||"",this.settings(t,"drawEdges")),w=this.settings(t,"drawNodes"),E=this.settings(t,"drawLabels"),_=this.settings(t,"drawEdgeLabels"),P=this.settings.embedObjects(t,{prefix:this.options.prefix});this.resize(!1),this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(x=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(a in this.jobs)r.hasJob(a)&&r.killJob(a);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,o=0,s=i.length;o<s;o++)v[i[o].id]=i[o];if(x){for(i=y.edges(),o=0,s=i.length;o<s;o++)l=i[o],!v[l.source]&&!v[l.target]||l.hidden||b(l.source).hidden||b(l.target).hidden||this.edgesOnScreen.push(l);if(this.settings(t,"batchEdgesDrawing"))u="edges_"+this.conradId,g=P("canvasEdgesBatchSize"),f=this.edgesOnScreen,s=f.length,h=0,d=Math.min(f.length,h+g),c=function(){for(m=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",p=n.canvas.edges,o=h;o<d;o++)l=f[o],(p[l.type||this.settings(t,"defaultEdgeType")]||p.def)(l,y.nodes(l.source),y.nodes(l.target),this.contexts.edges,P);if(_)for(p=n.canvas.edges.labels,o=h;o<d;o++)l=f[o],l.hidden||(p[l.type||this.settings(t,"defaultEdgeType")]||p.def)(l,y.nodes(l.source),y.nodes(l.target),this.contexts.labels,P);return this.contexts.edges.globalCompositeOperation=m,d===f.length?(delete this.jobs[u],!1):(h=d+1,d=Math.min(f.length,h+g),!0)},this.jobs[u]=c,r.addJob(u,c.bind(this));else{for(p=n.canvas.edges,i=this.edgesOnScreen,o=0,s=i.length;o<s;o++)l=i[o],(p[l.type||this.settings(t,"defaultEdgeType")]||p.def)(l,y.nodes(l.source),y.nodes(l.target),this.contexts.edges,P);if(_)for(p=n.canvas.edges.labels,i=this.edgesOnScreen,o=0,s=i.length;o<s;o++)i[o].hidden||(p[i[o].type||this.settings(t,"defaultEdgeType")]||p.def)(i[o],y.nodes(i[o].source),y.nodes(i[o].target),this.contexts.labels,P)}}if(w)for(p=n.canvas.nodes,i=this.nodesOnScreen,o=0,s=i.length;o<s;o++)i[o].hidden||(p[i[o].type||this.settings(t,"defaultNodeType")]||p.def)(i[o],this.contexts.nodes,P);if(E)for(p=n.canvas.labels,i=this.nodesOnScreen,o=0,s=i.length;o<s;o++)i[o].hidden||(p[i[o].type||this.settings(t,"defaultNodeType")]||p.def)(i[o],this.contexts.labels,P);return this.dispatchEvent("render"),this},n.renderers.canvas.prototype.initDOM=function(e,t){var i=document.createElement(e);i.style.position="absolute",i.setAttribute("class","sigma-"+t),this.domElements[t]=i,this.container.appendChild(i),"canvas"===e.toLowerCase()&&(this.contexts[t]=i.getContext("2d"))},n.renderers.canvas.prototype.resize=function(t,i){var r,o=this.width,a=this.height,s=n.utils.getPixelRatio();if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),o!==this.width||a!==this.height)for(r in this.domElements)this.domElements[r].style.width=t+"px",this.domElements[r].style.height=i+"px","canvas"===this.domElements[r].tagName.toLowerCase()&&(this.domElements[r].setAttribute("width",t*s+"px"),this.domElements[r].setAttribute("height",i*s+"px"),1!==s&&this.contexts[r].scale(s,s));return this},n.renderers.canvas.prototype.clear=function(){for(var e in this.contexts)this.contexts[e].clearRect(0,0,this.width,this.height);return this},n.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},n.utils.pkg("sigma.canvas.nodes"),n.utils.pkg("sigma.canvas.edges"),n.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.renderers"),n.renderers.webgl=function(e,t,i,r){if("object"!=typeof r)throw"sigma.renderers.webgl: Wrong arguments.";if(!(r.container instanceof HTMLElement))throw"Container not found.";var o,a,s,l;for(n.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:n.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=r,this.container=this.options.container,this.settings="object"==typeof r.settings&&r.settings?i.embedObjects(r.settings):i,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeIndicesArrays",{value:{}}),this.settings(r,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],s=this.options.captors||[n.captors.mouse,n.captors.touch],o=0,a=s.length;o<a;o++)l="function"==typeof s[o]?s[o]:n.captors[s[o]],this.captors.push(new l(this.domElements.mouse,this.camera,this.settings));n.misc.bindEvents.call(this,this.camera.prefix),n.misc.drawHovers.call(this,this.camera.prefix),this.resize()},n.renderers.webgl.prototype.process=function(){var e,t,i,r,o,a,s=this.graph,l=n.utils.extend(l,this.options),u=this.settings(l,"defaultEdgeType"),d=this.settings(l,"defaultNodeType");for(r in this.nodeFloatArrays)delete this.nodeFloatArrays[r];for(r in this.edgeFloatArrays)delete this.edgeFloatArrays[r];for(r in this.edgeIndicesArrays)delete this.edgeIndicesArrays[r];for(e=s.edges(),t=0,i=e.length;t<i;t++)o=e[t].type||u,r=o&&n.webgl.edges[o]?o:"def",this.edgeFloatArrays[r]||(this.edgeFloatArrays[r]={edges:[]}),this.edgeFloatArrays[r].edges.push(e[t]);for(e=s.nodes(),t=0,i=e.length;t<i;t++)o=e[t].type||d,r=o&&n.webgl.nodes[o]?o:"def",this.nodeFloatArrays[r]||(this.nodeFloatArrays[r]={nodes:[]}),this.nodeFloatArrays[r].nodes.push(e[t]);for(r in this.edgeFloatArrays){for(a=n.webgl.edges[r],e=this.edgeFloatArrays[r].edges,this.edgeFloatArrays[r].array=new Float32Array(e.length*a.POINTS*a.ATTRIBUTES),t=0,i=e.length;t<i;t++)e[t].hidden||s.nodes(e[t].source).hidden||s.nodes(e[t].target).hidden||a.addEdge(e[t],s.nodes(e[t].source),s.nodes(e[t].target),this.edgeFloatArrays[r].array,t*a.POINTS*a.ATTRIBUTES,l.prefix,this.settings);"function"==typeof a.computeIndices&&(this.edgeIndicesArrays[r]=a.computeIndices(this.edgeFloatArrays[r].array))}for(r in this.nodeFloatArrays)for(a=n.webgl.nodes[r],e=this.nodeFloatArrays[r].nodes,this.nodeFloatArrays[r].array=new Float32Array(e.length*a.POINTS*a.ATTRIBUTES),t=0,i=e.length;t<i;t++)this.nodeFloatArrays[r].array||(this.nodeFloatArrays[r].array=new Float32Array(e.length*a.POINTS*a.ATTRIBUTES)),e[t].hidden||a.addNode(e[t],this.nodeFloatArrays[r].array,t*a.POINTS*a.ATTRIBUTES,l.prefix,this.settings);return this},n.renderers.webgl.prototype.render=function(t){var i,o,a,s,l,u,d=this,c=(this.graph,this.contexts.nodes),h=this.contexts.edges,f=this.camera.getMatrix(),p=n.utils.extend(t,this.options),g=this.settings(p,"drawLabels"),m=this.settings(p,"drawEdges"),v=this.settings(p,"drawNodes");this.resize(!1),this.settings(p,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1),this.clear(),f=n.utils.matrices.multiply(f,n.utils.matrices.translation(this.width/2,this.height/2));for(s in this.jobs)r.hasJob(s)&&r.killJob(s);if(m)if(this.settings(p,"batchEdgesDrawing"))(function(){var e,t,i,o,a,s,l,u,d,c;i="edges_"+this.conradId,c=this.settings(p,"webglEdgesBatchSize"),e=Object.keys(this.edgeFloatArrays),e.length&&(t=0,d=n.webgl.edges[e[t]],a=this.edgeFloatArrays[e[t]].array,u=this.edgeIndicesArrays[e[t]],l=0,s=Math.min(l+c*d.POINTS,a.length/d.ATTRIBUTES),o=function(){return this.edgePrograms[e[t]]||(this.edgePrograms[e[t]]=d.initProgram(h)),l<s&&(h.useProgram(this.edgePrograms[e[t]]),d.render(h,this.edgePrograms[e[t]],a,{settings:this.settings,matrix:f,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(p,"webglOversamplingRatio"),start:l,count:s-l,indicesData:u})),s>=a.length/d.ATTRIBUTES&&t===e.length-1?(delete this.jobs[i],!1):(s>=a.length/d.ATTRIBUTES?(t++,a=this.edgeFloatArrays[e[t]].array,d=n.webgl.edges[e[t]],l=0,s=Math.min(l+c*d.POINTS,a.length/d.ATTRIBUTES)):(l=s,s=Math.min(l+c*d.POINTS,a.length/d.ATTRIBUTES)),!0)},this.jobs[i]=o,r.addJob(i,o.bind(this)))}).call(this);else for(s in this.edgeFloatArrays)u=n.webgl.edges[s],this.edgePrograms[s]||(this.edgePrograms[s]=u.initProgram(h)),this.edgeFloatArrays[s]&&(h.useProgram(this.edgePrograms[s]),u.render(h,this.edgePrograms[s],this.edgeFloatArrays[s].array,{settings:this.settings,matrix:f,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(p,"webglOversamplingRatio"),indicesData:this.edgeIndicesArrays[s]}));if(v){c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.enable(c.BLEND);for(s in this.nodeFloatArrays)u=n.webgl.nodes[s],this.nodePrograms[s]||(this.nodePrograms[s]=u.initProgram(c)),this.nodeFloatArrays[s]&&(c.useProgram(this.nodePrograms[s]),u.render(c,this.nodePrograms[s],this.nodeFloatArrays[s].array,{settings:this.settings,matrix:f,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(p,"webglOversamplingRatio")}))}if(g)for(i=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:i,edges:[],width:this.width,height:this.height}),l=function(e){return d.settings({prefix:d.camera.prefix},e)},o=0,a=i.length;o<a;o++)i[o].hidden||(n.canvas.labels[i[o].type||this.settings(p,"defaultNodeType")]||n.canvas.labels.def)(i[o],this.contexts.labels,l);return this.dispatchEvent("render"),this},n.renderers.webgl.prototype.initDOM=function(e,t,i){var n=document.createElement(e),r=this;n.style.position="absolute",n.setAttribute("class","sigma-"+t),this.domElements[t]=n,this.container.appendChild(n),"canvas"===e.toLowerCase()&&(this.contexts[t]=n.getContext(i?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),i&&(n.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),n.addEventListener("webglcontextrestored",function(e){r.render()},!1)))},n.renderers.webgl.prototype.resize=function(t,i){var r,o=this.width,a=this.height,s=n.utils.getPixelRatio();if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),o!==this.width||a!==this.height)for(r in this.domElements)this.domElements[r].style.width=t+"px",this.domElements[r].style.height=i+"px","canvas"===this.domElements[r].tagName.toLowerCase()&&(this.contexts[r]&&this.contexts[r].scale?(this.domElements[r].setAttribute("width",t*s+"px"),this.domElements[r].setAttribute("height",i*s+"px"),1!==s&&this.contexts[r].scale(s,s)):(this.domElements[r].setAttribute("width",t*this.settings("webglOversamplingRatio")+"px"),this.domElements[r].setAttribute("height",i*this.settings("webglOversamplingRatio")+"px")));for(r in this.contexts)this.contexts[r]&&this.contexts[r].viewport&&this.contexts[r].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},n.renderers.webgl.prototype.clear=function(){return this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},n.renderers.webgl.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},n.utils.pkg("sigma.webgl.nodes"),n.utils.pkg("sigma.webgl.edges"),n.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";if("undefined"==typeof r)throw"conrad is not declared";n.utils.pkg("sigma.renderers"),n.renderers.svg=function(e,t,i,r){if("object"!=typeof r)throw"sigma.renderers.svg: Wrong arguments.";if(!(r.container instanceof HTMLElement))throw"Container not found.";var o,a,s,l,u=this;for(n.classes.dispatcher.extend(this),this.graph=e,this.camera=t,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=r,this.container=this.options.container,this.settings="object"==typeof r.settings&&r.settings?i.embedObjects(r.settings):i,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+n.utils.id()+":",this.initDOM("svg"),this.captors=[],s=this.options.captors||[n.captors.mouse,n.captors.touch],o=0,a=s.length;o<a;o++)l="function"==typeof s[o]?s[o]:n.captors[s[o]],this.captors.push(new l(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){u.resize()}),n.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},n.renderers.svg.prototype.render=function(t){t=t||{};var i,r,o,a,s,l,u,d,c,h={},f=this.graph,p=this.graph.nodes,g=(this.options.prefix||"",this.settings(t,"drawEdges")),m=this.settings(t,"drawNodes"),v=(this.settings(t,"drawLabels"),this.settings.embedObjects(t,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(g=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,r=0,a=i.length;r<a;r++)h[i[r].id]=i[r];for(i=f.edges(),r=0,a=i.length;r<a;r++)s=i[r],!h[s.source]&&!h[s.target]||s.hidden||p(s.source).hidden||p(s.target).hidden||this.edgesOnScreen.push(s);if(d=n.svg.nodes,c=n.svg.labels,m)for(i=this.nodesOnScreen,r=0,a=i.length;r<a;r++)i[r].hidden||this.domElements.nodes[i[r].id]||(o=(d[i[r].type]||d.def).create(i[r],v),this.domElements.nodes[i[r].id]=o,this.domElements.groups.nodes.appendChild(o),o=(c[i[r].type]||c.def).create(i[r],v),this.domElements.labels[i[r].id]=o,this.domElements.groups.labels.appendChild(o));if(m)for(i=this.nodesOnScreen,r=0,a=i.length;r<a;r++)i[r].hidden||((d[i[r].type]||d.def).update(i[r],this.domElements.nodes[i[r].id],v),(c[i[r].type]||c.def).update(i[r],this.domElements.labels[i[r].id],v));if(d=n.svg.edges,g)for(i=this.edgesOnScreen,r=0,a=i.length;r<a;r++)this.domElements.edges[i[r].id]||(l=p(i[r].source),u=p(i[r].target),o=(d[i[r].type]||d.def).create(i[r],l,u,v),this.domElements.edges[i[r].id]=o,this.domElements.groups.edges.appendChild(o));if(g)for(i=this.edgesOnScreen,r=0,a=i.length;r<a;r++)l=p(i[r].source),u=p(i[r].target),(d[i[r].type]||d.def).update(i[r],this.domElements.edges[i[r].id],l,u,v);return this.dispatchEvent("render"),this},n.renderers.svg.prototype.initDOM=function(e){var t,i,n,r=document.createElementNS(this.settings("xmlns"),e),o=this.settings("classPrefix");r.style.position="absolute",r.setAttribute("class",o+"-svg"),r.setAttribute("xmlns",this.settings("xmlns")),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1");var a=document.createElement("canvas");a.setAttribute("class",o+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(r);var s=["edges","nodes","labels","hovers"];for(n=0,i=s.length;n<i;n++)t=document.createElementNS(this.settings("xmlns"),"g"),t.setAttributeNS(null,"id",o+"-group-"+s[n]),t.setAttributeNS(null,"class",o+"-group"),this.domElements.groups[s[n]]=this.domElements.graph.appendChild(t);this.container.appendChild(a),this.measurementCanvas=a.getContext("2d")},n.renderers.svg.prototype.hideDOMElements=function(e){var t,i;for(i in e)t=e[i],n.svg.utils.hide(t);return this},n.renderers.svg.prototype.bindHovers=function(e){function t(t){var i=t.data.node,n=s.settings.embedObjects({prefix:e});if(n("enableHovering")){var r=(a[i.type]||a.def).create(i,s.domElements.nodes[i.id],s.measurementCanvas,n);s.domElements.hovers[i.id]=r,s.domElements.groups.hovers.appendChild(r),o=i}}function i(t){var i=t.data.node,n=s.settings.embedObjects({prefix:e});n("enableHovering")&&(s.domElements.groups.hovers.removeChild(s.domElements.hovers[i.id]),o=null,delete s.domElements.hovers[i.id],s.domElements.groups.nodes.appendChild(s.domElements.nodes[i.id]))}function r(){if(o){var t=s.settings.embedObjects({prefix:e});s.domElements.groups.hovers.removeChild(s.domElements.hovers[o.id]),delete s.domElements.hovers[o.id];var i=(a[o.type]||a.def).create(o,s.domElements.nodes[o.id],s.measurementCanvas,t);s.domElements.hovers[o.id]=i,s.domElements.groups.hovers.appendChild(i)}}var o,a=n.svg.hovers,s=this;this.bind("overNode",t),this.bind("outNode",i),this.bind("render",r)},n.renderers.svg.prototype.resize=function(t,i){var n=this.width,r=this.height,o=1;return t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),n===this.width&&r===this.height||(this.domElements.graph.style.width=t+"px",this.domElements.graph.style.height=i+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",t*o),this.domElements.graph.setAttribute("height",i*o))),this},n.utils.pkg("sigma.svg.nodes"),n.utils.pkg("sigma.svg.edges"),n.utils.pkg("sigma.svg.labels")}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.renderers");var t,i=!!e.WebGLRenderingContext;if(i){t=document.createElement("canvas");try{i=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(r){i=!1}}n.renderers.def=i?n.renderers.webgl:n.renderers.canvas}(this),function(){"use strict";n.utils.pkg("sigma.webgl.nodes"),n.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,t,i,r,o){var a=n.utils.floatColor(e.color||o("defaultNodeColor"));t[i++]=e[r+"x"],t[i++]=e[r+"y"],t[i++]=e[r+"size"],t[i++]=a,t[i++]=0,t[i++]=e[r+"x"],t[i++]=e[r+"y"],t[i++]=e[r+"size"],t[i++]=a,t[i++]=2*Math.PI/3,t[i++]=e[r+"x"],t[i++]=e[r+"y"],t[i++]=e[r+"size"],t[i++]=a,t[i++]=4*Math.PI/3},render:function(e,t,i,n){var r,o=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),s=e.getAttribLocation(t,"a_color"),l=e.getAttribLocation(t,"a_angle"),u=e.getUniformLocation(t,"u_resolution"),d=e.getUniformLocation(t,"u_matrix"),c=e.getUniformLocation(t,"u_ratio"),h=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(u,n.width,n.height),e.uniform1f(c,1/Math.pow(n.ratio,n.settings("nodesPowRatio"))),e.uniform1f(h,n.scalingRatio),e.uniformMatrix3fv(d,!1,n.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(s),e.enableVertexAttribArray(l),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.drawArrays(e.TRIANGLES,n.start||0,n.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,r;return t=n.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=n.utils.loadShader(e,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),e.FRAGMENT_SHADER),r=n.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";n.utils.pkg("sigma.webgl.nodes"),n.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,i,r,o){t[i++]=e[r+"x"],t[i++]=e[r+"y"],t[i++]=e[r+"size"],t[i++]=n.utils.floatColor(e.color||o("defaultNodeColor"))},render:function(e,t,i,n){var r,o=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),s=e.getAttribLocation(t,"a_color"),l=e.getUniformLocation(t,"u_resolution"),u=e.getUniformLocation(t,"u_matrix"),d=e.getUniformLocation(t,"u_ratio"),c=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(l,n.width,n.height),e.uniform1f(d,1/Math.pow(n.ratio,n.settings("nodesPowRatio"))),e.uniform1f(c,n.scalingRatio),e.uniformMatrix3fv(u,!1,n.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(s),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,n.start||0,n.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,r;return t=n.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=n.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","float border = 0.01;","float radius = 0.5;","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_PointCoord - vec2(0.5, 0.5);","float dist = radius - sqrt(m.x * m.x + m.y * m.y);","float t = 0.0;","if (dist > border)","t = 1.0;","else if (dist > 0.0)","t = dist / border;","gl_FragColor = mix(color0, color, t);","}"].join("\n"),e.FRAGMENT_SHADER),r=n.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";n.utils.pkg("sigma.webgl.edges"),n.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,i,r,o,a,s){var l=(e[a+"size"]||1)/2,u=t[a+"x"],d=t[a+"y"],c=i[a+"x"],h=i[a+"y"],f=e.color;if(!f)switch(s("edgeColor")){case"source":f=t.color||s("defaultNodeColor");break;case"target":f=i.color||s("defaultNodeColor");break;default:f=s("defaultEdgeColor")}f=n.utils.floatColor(f),r[o++]=u,r[o++]=d,r[o++]=c,r[o++]=h,r[o++]=l,r[o++]=0,r[o++]=f,r[o++]=c,r[o++]=h,r[o++]=u,r[o++]=d,r[o++]=l,r[o++]=1,r[o++]=f,r[o++]=c,r[o++]=h,r[o++]=u,r[o++]=d,r[o++]=l,r[o++]=0,r[o++]=f,r[o++]=c,r[o++]=h,r[o++]=u,r[o++]=d,r[o++]=l,r[o++]=0,r[o++]=f,r[o++]=u,r[o++]=d,r[o++]=c,r[o++]=h,r[o++]=l,r[o++]=1,r[o++]=f,r[o++]=u,r[o++]=d,r[o++]=c,r[o++]=h,r[o++]=l,r[o++]=0,r[o++]=f},render:function(e,t,i,r){var o,a=e.getAttribLocation(t,"a_color"),s=e.getAttribLocation(t,"a_position1"),l=e.getAttribLocation(t,"a_position2"),u=e.getAttribLocation(t,"a_thickness"),d=e.getAttribLocation(t,"a_minus"),c=e.getUniformLocation(t,"u_resolution"),h=e.getUniformLocation(t,"u_matrix"),f=e.getUniformLocation(t,"u_matrixHalfPi"),p=e.getUniformLocation(t,"u_matrixHalfPiMinus"),g=e.getUniformLocation(t,"u_ratio"),m=e.getUniformLocation(t,"u_scale");o=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(c,r.width,r.height),e.uniform1f(g,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),e.uniform1f(m,r.scalingRatio),e.uniformMatrix3fv(h,!1,r.matrix),e.uniformMatrix2fv(f,!1,n.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(p,!1,n.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(a),e.enableVertexAttribArray(s),e.enableVertexAttribArray(l),e.enableVertexAttribArray(u),e.enableVertexAttribArray(d),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(l,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,r.start||0,r.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,r;return t=n.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=n.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=n.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";n.utils.pkg("sigma.webgl.edges"),n.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,i,r,o,a,s){var l=((e[a+"size"]||1)/2,t[a+"x"]),u=t[a+"y"],d=i[a+"x"],c=i[a+"y"],h=e.color;if(!h)switch(s("edgeColor")){case"source":h=t.color||s("defaultNodeColor");break;case"target":h=i.color||s("defaultNodeColor");break;default:h=s("defaultEdgeColor")}h=n.utils.floatColor(h),r[o++]=l,r[o++]=u,r[o++]=h,r[o++]=d,r[o++]=c,r[o++]=h},render:function(e,t,i,n){var r,o=e.getAttribLocation(t,"a_color"),a=e.getAttribLocation(t,"a_position"),s=e.getUniformLocation(t,"u_resolution"),l=e.getUniformLocation(t,"u_matrix");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(s,n.width,n.height),e.uniformMatrix3fv(l,!1,n.matrix),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,n.start||0,n.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,r;return t=n.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=n.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=n.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";n.utils.pkg("sigma.webgl.edges"),n.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,i,r,o,a,s){var l=(e[a+"size"]||1)/2,u=t[a+"x"],d=t[a+"y"],c=i[a+"x"],h=i[a+"y"],f=i[a+"size"],p=e.color;if(!p)switch(s("edgeColor")){case"source":p=t.color||s("defaultNodeColor");break;case"target":p=i.color||s("defaultNodeColor");break;default:p=s("defaultEdgeColor")}p=n.utils.floatColor(p),r[o++]=u,r[o++]=d,r[o++]=c,r[o++]=h,r[o++]=l,r[o++]=f,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=p,r[o++]=c,r[o++]=h,r[o++]=u,r[o++]=d,r[o++]=l,r[o++]=f,r[o++]=1,r[o++]=1,r[o++]=0,r[o++]=0,r[o++]=p,r[o++]=c,r[o++]=h,r[o++]=u,r[o++]=d,r[o++]=l,r[o++]=f,r[o++]=1,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=p,r[o++]=c,r[o++]=h,r[o++]=u,r[o++]=d,r[o++]=l,r[o++]=f,r[o++]=1,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=p,r[o++]=u,r[o++]=d,r[o++]=c,r[o++]=h,r[o++]=l,r[o++]=f,r[o++]=0,r[o++]=1,r[o++]=0,r[o++]=0,r[o++]=p,r[o++]=u,r[o++]=d,r[o++]=c,r[o++]=h,r[o++]=l,r[o++]=f,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=p,r[o++]=c,r[o++]=h,r[o++]=u,r[o++]=d,r[o++]=l,r[o++]=f,r[o++]=1,r[o++]=0,r[o++]=1,r[o++]=-1,r[o++]=p,r[o++]=c,r[o++]=h,r[o++]=u,r[o++]=d,r[o++]=l,r[o++]=f,r[o++]=1,r[o++]=0,r[o++]=1,r[o++]=0,r[o++]=p,r[o++]=c,r[o++]=h,r[o++]=u,r[o++]=d,r[o++]=l,r[o++]=f,r[o++]=1,r[o++]=0,r[o++]=1,r[o++]=1,r[o++]=p},render:function(e,t,i,r){var o,a=e.getAttribLocation(t,"a_pos1"),s=e.getAttribLocation(t,"a_pos2"),l=e.getAttribLocation(t,"a_thickness"),u=e.getAttribLocation(t,"a_tSize"),d=e.getAttribLocation(t,"a_delay"),c=e.getAttribLocation(t,"a_minus"),h=e.getAttribLocation(t,"a_head"),f=e.getAttribLocation(t,"a_headPosition"),p=e.getAttribLocation(t,"a_color"),g=e.getUniformLocation(t,"u_resolution"),m=e.getUniformLocation(t,"u_matrix"),v=e.getUniformLocation(t,"u_matrixHalfPi"),y=e.getUniformLocation(t,"u_matrixHalfPiMinus"),b=e.getUniformLocation(t,"u_ratio"),x=e.getUniformLocation(t,"u_nodeRatio"),w=e.getUniformLocation(t,"u_arrowHead"),E=e.getUniformLocation(t,"u_scale");
o=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(g,r.width,r.height),e.uniform1f(b,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),e.uniform1f(x,Math.pow(r.ratio,r.settings("nodesPowRatio"))/r.ratio),e.uniform1f(w,5),e.uniform1f(E,r.scalingRatio),e.uniformMatrix3fv(m,!1,r.matrix),e.uniformMatrix2fv(v,!1,n.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(y,!1,n.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(a),e.enableVertexAttribArray(s),e.enableVertexAttribArray(l),e.enableVertexAttribArray(u),e.enableVertexAttribArray(d),e.enableVertexAttribArray(c),e.enableVertexAttribArray(h),e.enableVertexAttribArray(f),e.enableVertexAttribArray(p),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(p,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,r.start||0,r.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,r;return t=n.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=n.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=n.utils.loadProgram(e,[t,i])}}}(),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.canvas.labels"),n.canvas.labels.def=function(e,t,i){var n,r=i("prefix")||"",o=e[r+"size"];o<i("labelThreshold")||e.label&&"string"==typeof e.label&&(n="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*o,t.font=(i("fontStyle")?i("fontStyle")+" ":"")+n+"px "+i("font"),t.fillStyle="node"===i("labelColor")?e.color||i("defaultNodeColor"):i("defaultLabelColor"),t.fillText(e.label,Math.round(e[r+"x"]+o+3),Math.round(e[r+"y"]+n/3)))}}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.canvas.hovers"),n.canvas.hovers.def=function(e,t,i){var r,o,a,s,l,u=i("hoverFontStyle")||i("fontStyle"),d=i("prefix")||"",c=e[d+"size"],h="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*c;t.font=(u?u+" ":"")+h+"px "+(i("hoverFont")||i("font")),t.beginPath(),t.fillStyle="node"===i("labelHoverBGColor")?e.color||i("defaultNodeColor"):i("defaultHoverLabelBGColor"),e.label&&i("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=i("labelHoverShadowColor")),e.label&&"string"==typeof e.label&&(r=Math.round(e[d+"x"]-h/2-2),o=Math.round(e[d+"y"]-h/2-2),a=Math.round(t.measureText(e.label).width+h/2+c+7),s=Math.round(h+4),l=Math.round(h/2+2),t.moveTo(r,o+l),t.arcTo(r,o,r+l,o,l),t.lineTo(r+a,o),t.lineTo(r+a,o+s),t.lineTo(r+l,o+s),t.arcTo(r,o+s,r,o+s-l,l),t.lineTo(r,o+l),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),i("borderSize")>0&&(t.beginPath(),t.fillStyle="node"===i("nodeBorderColor")?e.color||i("defaultNodeColor"):i("defaultNodeBorderColor"),t.arc(e[d+"x"],e[d+"y"],c+i("borderSize"),0,2*Math.PI,!0),t.closePath(),t.fill());var f=n.canvas.nodes[e.type]||n.canvas.nodes.def;f(e,t,i),e.label&&"string"==typeof e.label&&(t.fillStyle="node"===i("labelHoverColor")?e.color||i("defaultNodeColor"):i("defaultLabelHoverColor"),t.fillText(e.label,Math.round(e[d+"x"]+c+3),Math.round(e[d+"y"]+h/3)))}}.call(this),function(){"use strict";n.utils.pkg("sigma.canvas.nodes"),n.canvas.nodes.def=function(e,t,i){var n=i("prefix")||"";t.fillStyle=e.color||i("defaultNodeColor"),t.beginPath(),t.arc(e[n+"x"],e[n+"y"],e[n+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}(),function(){"use strict";n.utils.pkg("sigma.canvas.edges"),n.canvas.edges.def=function(e,t,i,n,r){var o=e.color,a=r("prefix")||"",s=e[a+"size"]||1,l=r("edgeColor"),u=r("defaultNodeColor"),d=r("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||u;break;case"target":o=i.color||u;break;default:o=d}n.strokeStyle=o,n.lineWidth=s,n.beginPath(),n.moveTo(t[a+"x"],t[a+"y"]),n.lineTo(i[a+"x"],i[a+"y"]),n.stroke()}}(),function(){"use strict";n.utils.pkg("sigma.canvas.edges"),n.canvas.edges.arrow=function(e,t,i,n,r){var o=e.color,a=r("prefix")||"",s=r("edgeColor"),l=r("defaultNodeColor"),u=r("defaultEdgeColor"),d=e[a+"size"]||1,c=i[a+"size"],h=t[a+"x"],f=t[a+"y"],p=i[a+"x"],g=i[a+"y"],m=Math.max(2.5*d,r("minArrowSize")),v=Math.sqrt(Math.pow(p-h,2)+Math.pow(g-f,2)),y=h+(p-h)*(v-m-c)/v,b=f+(g-f)*(v-m-c)/v,x=(p-h)*m/v,w=(g-f)*m/v;if(!o)switch(s){case"source":o=t.color||l;break;case"target":o=i.color||l;break;default:o=u}n.strokeStyle=o,n.lineWidth=d,n.beginPath(),n.moveTo(h,f),n.lineTo(y,b),n.stroke(),n.fillStyle=o,n.beginPath(),n.moveTo(y+x,b+w),n.lineTo(y+.6*w,b-.6*x),n.lineTo(y-.6*w,b+.6*x),n.lineTo(y+x,b+w),n.closePath(),n.fill()}}(),function(){"use strict";n.utils.pkg("sigma.canvas.edgehovers"),n.canvas.edgehovers.def=function(e,t,i,n,r){var o=e.color,a=r("prefix")||"",s=e[a+"size"]||1,l=r("edgeColor"),u=r("defaultNodeColor"),d=r("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||u;break;case"target":o=i.color||u;break;default:o=d}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,s*=r("edgeHoverSizeRatio"),n.strokeStyle=o,n.lineWidth=s,n.beginPath(),n.moveTo(t[a+"x"],t[a+"y"]),n.lineTo(i[a+"x"],i[a+"y"]),n.stroke()}}(),function(){"use strict";n.utils.pkg("sigma.canvas.edgehovers"),n.canvas.edgehovers.curve=function(e,t,i,r,o){var a=e.color,s=o("prefix")||"",l=o("edgeHoverSizeRatio")*(e[s+"size"]||1),u=o("edgeColor"),d=o("defaultNodeColor"),c=o("defaultEdgeColor"),h={},f=t[s+"size"],p=t[s+"x"],g=t[s+"y"],m=i[s+"x"],v=i[s+"y"];if(h=t.id===i.id?n.utils.getSelfLoopControlPoints(p,g,f):n.utils.getQuadraticControlPoint(p,g,m,v),!a)switch(u){case"source":a=t.color||d;break;case"target":a=i.color||d;break;default:a=c}a="edge"===o("edgeHoverColor")?e.hover_color||a:e.hover_color||o("defaultEdgeHoverColor")||a,r.strokeStyle=a,r.lineWidth=l,r.beginPath(),r.moveTo(p,g),t.id===i.id?r.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,m,v):r.quadraticCurveTo(h.x,h.y,m,v),r.stroke()}}(),function(){"use strict";n.utils.pkg("sigma.canvas.edgehovers"),n.canvas.edgehovers.arrow=function(e,t,i,n,r){var o=e.color,a=r("prefix")||"",s=r("edgeColor"),l=r("defaultNodeColor"),u=r("defaultEdgeColor"),d=e[a+"size"]||1,c=i[a+"size"],h=t[a+"x"],f=t[a+"y"],p=i[a+"x"],g=i[a+"y"];d=e.hover?r("edgeHoverSizeRatio")*d:d;var m=2.5*d,v=Math.sqrt(Math.pow(p-h,2)+Math.pow(g-f,2)),y=h+(p-h)*(v-m-c)/v,b=f+(g-f)*(v-m-c)/v,x=(p-h)*m/v,w=(g-f)*m/v;if(!o)switch(s){case"source":o=t.color||l;break;case"target":o=i.color||l;break;default:o=u}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,n.strokeStyle=o,n.lineWidth=d,n.beginPath(),n.moveTo(h,f),n.lineTo(y,b),n.stroke(),n.fillStyle=o,n.beginPath(),n.moveTo(y+x,b+w),n.lineTo(y+.6*w,b-.6*x),n.lineTo(y-.6*w,b+.6*x),n.lineTo(y+x,b+w),n.closePath(),n.fill()}}(),function(){"use strict";n.utils.pkg("sigma.canvas.edgehovers"),n.canvas.edgehovers.curvedArrow=function(e,t,i,r,o){var a,s,l,u,d,c,h=e.color,f=o("prefix")||"",p=o("edgeColor"),g=o("defaultNodeColor"),m=o("defaultEdgeColor"),v={},y=o("edgeHoverSizeRatio")*(e[f+"size"]||1),b=i[f+"size"],x=t[f+"x"],w=t[f+"y"],E=i[f+"x"],_=i[f+"y"];if(v=t.id===i.id?n.utils.getSelfLoopControlPoints(x,w,b):n.utils.getQuadraticControlPoint(x,w,E,_),t.id===i.id?(a=Math.sqrt(Math.pow(E-v.x1,2)+Math.pow(_-v.y1,2)),s=2.5*y,l=v.x1+(E-v.x1)*(a-s-b)/a,u=v.y1+(_-v.y1)*(a-s-b)/a,d=(E-v.x1)*s/a,c=(_-v.y1)*s/a):(a=Math.sqrt(Math.pow(E-v.x,2)+Math.pow(_-v.y,2)),s=2.5*y,l=v.x+(E-v.x)*(a-s-b)/a,u=v.y+(_-v.y)*(a-s-b)/a,d=(E-v.x)*s/a,c=(_-v.y)*s/a),!h)switch(p){case"source":h=t.color||g;break;case"target":h=i.color||g;break;default:h=m}h="edge"===o("edgeHoverColor")?e.hover_color||h:e.hover_color||o("defaultEdgeHoverColor")||h,r.strokeStyle=h,r.lineWidth=y,r.beginPath(),r.moveTo(x,w),t.id===i.id?r.bezierCurveTo(v.x2,v.y2,v.x1,v.y1,l,u):r.quadraticCurveTo(v.x,v.y,l,u),r.stroke(),r.fillStyle=h,r.beginPath(),r.moveTo(l+d,u+c),r.lineTo(l+.6*c,u-.6*d),r.lineTo(l-.6*c,u+.6*d),r.lineTo(l+d,u+c),r.closePath(),r.fill()}}(),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.canvas.extremities"),n.canvas.extremities.def=function(e,t,i,r,o){(n.canvas.hovers[t.type]||n.canvas.hovers.def)(t,r,o),(n.canvas.hovers[i.type]||n.canvas.hovers.def)(i,r,o)}}.call(this),function(){"use strict";n.utils.pkg("sigma.svg.utils"),n.svg.utils={show:function(e){return e.style.display="",this},hide:function(e){return e.style.display="none",this}}}(),function(){"use strict";n.utils.pkg("sigma.svg.nodes"),n.svg.nodes.def={create:function(e,t){var i=(t("prefix")||"",document.createElementNS(t("xmlns"),"circle"));return i.setAttributeNS(null,"data-node-id",e.id),i.setAttributeNS(null,"class",t("classPrefix")+"-node"),i.setAttributeNS(null,"fill",e.color||t("defaultNodeColor")),i},update:function(e,t,i){var n=i("prefix")||"";return t.setAttributeNS(null,"cx",e[n+"x"]),t.setAttributeNS(null,"cy",e[n+"y"]),t.setAttributeNS(null,"r",e[n+"size"]),i("freeStyle")||t.setAttributeNS(null,"fill",e.color||i("defaultNodeColor")),t.style.display="",this}}}(),function(){"use strict";n.utils.pkg("sigma.svg.edges"),n.svg.edges.def={create:function(e,t,i,n){var r=e.color,o=(n("prefix")||"",n("edgeColor")),a=n("defaultNodeColor"),s=n("defaultEdgeColor");if(!r)switch(o){case"source":r=t.color||a;break;case"target":r=i.color||a;break;default:r=s}var l=document.createElementNS(n("xmlns"),"line");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",n("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,i,n,r){var o=r("prefix")||"";return t.setAttributeNS(null,"stroke-width",e[o+"size"]||1),t.setAttributeNS(null,"x1",i[o+"x"]),t.setAttributeNS(null,"y1",i[o+"y"]),t.setAttributeNS(null,"x2",n[o+"x"]),t.setAttributeNS(null,"y2",n[o+"y"]),t.style.display="",this}}}(),function(){"use strict";n.utils.pkg("sigma.svg.edges"),n.svg.edges.curve={create:function(e,t,i,n){var r=e.color,o=(n("prefix")||"",n("edgeColor")),a=n("defaultNodeColor"),s=n("defaultEdgeColor");if(!r)switch(o){case"source":r=t.color||a;break;case"target":r=i.color||a;break;default:r=s}var l=document.createElementNS(n("xmlns"),"path");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",n("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,i,n,r){var o=r("prefix")||"";t.setAttributeNS(null,"stroke-width",e[o+"size"]||1);var a=(i[o+"x"]+n[o+"x"])/2+(n[o+"y"]-i[o+"y"])/4,s=(i[o+"y"]+n[o+"y"])/2+(i[o+"x"]-n[o+"x"])/4,l="M"+i[o+"x"]+","+i[o+"y"]+" Q"+a+","+s+" "+n[o+"x"]+","+n[o+"y"];return t.setAttributeNS(null,"d",l),t.setAttributeNS(null,"fill","none"),t.style.display="",this}}}(),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.svg.labels"),n.svg.labels.def={create:function(e,t){var i=t("prefix")||"",n=e[i+"size"],r=document.createElementNS(t("xmlns"),"text"),o="fixed"===t("labelSize")?t("defaultLabelSize"):t("labelSizeRatio")*n,a="node"===t("labelColor")?e.color||t("defaultNodeColor"):t("defaultLabelColor");return r.setAttributeNS(null,"data-label-target",e.id),r.setAttributeNS(null,"class",t("classPrefix")+"-label"),r.setAttributeNS(null,"font-size",o),r.setAttributeNS(null,"font-family",t("font")),r.setAttributeNS(null,"fill",a),r.innerHTML=e.label,r.textContent=e.label,r},update:function(e,t,i){var n=i("prefix")||"",r=e[n+"size"],o="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*r;if((i("forceLabels")||!(r<i("labelThreshold")))&&"string"==typeof e.label)return t.setAttributeNS(null,"x",Math.round(e[n+"x"]+r+3)),t.setAttributeNS(null,"y",Math.round(e[n+"y"]+o/3)),t.style.display="",this}}}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.svg.hovers"),n.svg.hovers.def={create:function(e,t,i,n){var r,o,a,s,l,u=(n("hoverFontStyle")||n("fontStyle"),n("prefix")||""),d=e[u+"size"],c="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*d,h="node"===n("labelHoverColor")?e.color||n("defaultNodeColor"):n("defaultLabelHoverColor"),f=document.createElementNS(n("xmlns"),"g"),p=document.createElementNS(n("xmlns"),"rect"),g=document.createElementNS(n("xmlns"),"circle"),m=document.createElementNS(n("xmlns"),"text");return f.setAttributeNS(null,"class",n("classPrefix")+"-hover"),f.setAttributeNS(null,"data-node-id",e.id),"string"==typeof e.label&&(m.innerHTML=e.label,m.textContent=e.label,m.setAttributeNS(null,"class",n("classPrefix")+"-hover-label"),m.setAttributeNS(null,"font-size",c),m.setAttributeNS(null,"font-family",n("font")),m.setAttributeNS(null,"fill",h),m.setAttributeNS(null,"x",Math.round(e[u+"x"]+d+3)),m.setAttributeNS(null,"y",Math.round(e[u+"y"]+c/3)),r=Math.round(e[u+"x"]-c/2-2),o=Math.round(e[u+"y"]-c/2-2),a=Math.round(i.measureText(e.label).width+c/2+d+9),s=Math.round(c+4),l=Math.round(c/2+2),g.setAttributeNS(null,"class",n("classPrefix")+"-hover-area"),g.setAttributeNS(null,"fill","#fff"),g.setAttributeNS(null,"cx",e[u+"x"]),g.setAttributeNS(null,"cy",e[u+"y"]),g.setAttributeNS(null,"r",l),p.setAttributeNS(null,"class",n("classPrefix")+"-hover-area"),p.setAttributeNS(null,"fill","#fff"),p.setAttributeNS(null,"x",e[u+"x"]+l/4),p.setAttributeNS(null,"y",e[u+"y"]-l),p.setAttributeNS(null,"width",a),p.setAttributeNS(null,"height",s)),f.appendChild(g),f.appendChild(p),f.appendChild(m),f.appendChild(t),f}}}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.middlewares"),n.utils.pkg("sigma.utils"),n.middlewares.rescale=function(e,t,i){var r,o,a,s,l,u,d,c,h=this.graph.nodes(),f=this.graph.edges(),p=this.settings.embedObjects(i||{}),g=p("bounds")||n.utils.getBoundaries(this.graph,e,!0),m=g.minX,v=g.minY,y=g.maxX,b=g.maxY,x=g.sizeMax,w=g.weightMax,E=p("width")||1,_=p("height")||1,P=p("autoRescale"),k={nodePosition:1,nodeSize:1,edgeSize:1};for(P instanceof Array||(P=["nodePosition","nodeSize","edgeSize"]),r=0,o=P.length;r<o;r++)if(!k[P[r]])throw new Error('The rescale setting "'+P[r]+'" is not recognized.');var A=~P.indexOf("nodePosition"),M=~P.indexOf("nodeSize"),S=~P.indexOf("edgeSize");for(d="outside"===p("scalingMode")?Math.max(E/Math.max(y-m,1),_/Math.max(b-v,1)):Math.min(E/Math.max(y-m,1),_/Math.max(b-v,1)),c=(p("rescaleIgnoreSize")?0:(p("maxNodeSize")||x)/d)+(p("sideMargin")||0),y+=c,m-=c,b+=c,v-=c,d="outside"===p("scalingMode")?Math.max(E/Math.max(y-m,1),_/Math.max(b-v,1)):Math.min(E/Math.max(y-m,1),_/Math.max(b-v,1)),p("maxNodeSize")||p("minNodeSize")?p("maxNodeSize")===p("minNodeSize")?(a=0,s=+p("maxNodeSize")):(a=(p("maxNodeSize")-p("minNodeSize"))/x,s=+p("minNodeSize")):(a=1,s=0),p("maxEdgeSize")||p("minEdgeSize")?p("maxEdgeSize")===p("minEdgeSize")?(l=0,u=+p("minEdgeSize")):(l=(p("maxEdgeSize")-p("minEdgeSize"))/w,u=+p("minEdgeSize")):(l=1,u=0),r=0,o=f.length;r<o;r++)f[r][t+"size"]=f[r][e+"size"]*(S?l:1)+(S?u:0);for(r=0,o=h.length;r<o;r++)h[r][t+"size"]=h[r][e+"size"]*(M?a:1)+(M?s:0),h[r][t+"x"]=(h[r][e+"x"]-(y+m)/2)*(A?d:1),h[r][t+"y"]=(h[r][e+"y"]-(b+v)/2)*(A?d:1)},n.utils.getBoundaries=function(e,t,i){var n,r,o=e.edges(),a=e.nodes(),s=-(1/0),l=-(1/0),u=1/0,d=1/0,c=-(1/0),h=-(1/0);if(i)for(n=0,r=o.length;n<r;n++)s=Math.max(o[n][t+"size"],s);for(n=0,r=a.length;n<r;n++)l=Math.max(a[n][t+"size"],l),c=Math.max(a[n][t+"x"],c),u=Math.min(a[n][t+"x"],u),h=Math.max(a[n][t+"y"],h),d=Math.min(a[n][t+"y"],d);return s=s||1,l=l||1,{weightMax:s,sizeMax:l,minX:u,minY:d,maxX:c,maxY:h}}}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.middlewares"),n.middlewares.copy=function(e,t){var i,n,r;if(t+""!=e+""){for(r=this.graph.nodes(),i=0,n=r.length;i<n;i++)r[i][t+"x"]=r[i][e+"x"],r[i][t+"y"]=r[i][e+"y"],r[i][t+"size"]=r[i][e+"size"];for(r=this.graph.edges(),i=0,n=r.length;i<n;i++)r[i][t+"size"]=r[i][e+"size"]}}}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.misc.animation.running");var t=function(){var e=0;return function(){return""+ ++e}}();n.misc.animation.camera=function(i,r,o){if(!(i instanceof n.classes.camera&&"object"==typeof r&&r))throw"animation.camera: Wrong arguments.";if("number"!=typeof r.x&&"number"!=typeof r.y&&"number"!=typeof r.ratio&&"number"!=typeof r.angle)throw"There must be at least one valid coordinate in the given val.";var a,s,l,u,d,c,h=o||{},f=n.utils.dateNow();return c={x:i.x,y:i.y,ratio:i.ratio,angle:i.angle},d=h.duration,u="function"!=typeof h.easing?n.utils.easings[h.easing||"quadraticInOut"]:h.easing,a=function(){var t,o=h.duration?(n.utils.dateNow()-f)/h.duration:1;o>=1?(i.isAnimated=!1,i.goTo({x:r.x!==e?r.x:c.x,y:r.y!==e?r.y:c.y,ratio:r.ratio!==e?r.ratio:c.ratio,angle:r.angle!==e?r.angle:c.angle}),cancelAnimationFrame(s),delete n.misc.animation.running[s],"function"==typeof h.onComplete&&h.onComplete()):(t=u(o),i.isAnimated=!0,i.goTo({x:r.x!==e?c.x+(r.x-c.x)*t:c.x,y:r.y!==e?c.y+(r.y-c.y)*t:c.y,ratio:r.ratio!==e?c.ratio+(r.ratio-c.ratio)*t:c.ratio,angle:r.angle!==e?c.angle+(r.angle-c.angle)*t:c.angle}),"function"==typeof h.onNewFrame&&h.onNewFrame(),l.frameId=requestAnimationFrame(a))},s=t(),l={frameId:requestAnimationFrame(a),target:i,type:"camera",options:h,fn:a},n.misc.animation.running[s]=l,s},n.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=n.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete n.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},n.misc.animation.killAll=function(e){var t,i,r=0,o="string"==typeof e?e:null,a="object"==typeof e?e:null,s=n.misc.animation.running;for(i in s)o&&s[i].type!==o||a&&s[i].target!==a||(t=n.misc.animation.running[i],cancelAnimationFrame(t.frameId),delete n.misc.animation.running[i],"camera"===t.type&&(t.target.isAnimated=!1),r++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return r},n.misc.animation.has=function(e){var t,i="string"==typeof e?e:null,r="object"==typeof e?e:null,o=n.misc.animation.running;for(t in o)if(!(i&&o[t].type!==i||r&&o[t].target!==r))return!0;return!1}}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.misc"),n.misc.bindEvents=function(t){function i(e){e&&(l="x"in e.data?e.data.x:l,u="y"in e.data?e.data.y:u);var i,n,r,o,a,s,c,h,f=[],p=l+d.width/2,g=u+d.height/2,m=d.camera.cameraPosition(l,u),v=d.camera.quadtree.point(m.x,m.y);if(v.length)for(i=0,r=v.length;i<r;i++)if(o=v[i],a=o[t+"x"],s=o[t+"y"],c=o[t+"size"],!o.hidden&&p>a-c&&p<a+c&&g>s-c&&g<s+c&&Math.sqrt(Math.pow(p-a,2)+Math.pow(g-s,2))<c){for(h=!1,n=0;n<f.length;n++)if(o.size>f[n].size){f.splice(n,0,o),h=!0;break}h||f.push(o)}return f}function r(i){function r(e,t){for(y=!1,s=0;s<e.length;s++)if(t.size>e[s].size){e.splice(s,0,t),y=!0;break}y||e.push(t)}if(!d.settings("enableEdgeHovering"))return[];var o=n.renderers.canvas&&d instanceof n.renderers.canvas;if(!o)throw new Error("The edge events feature is not compatible with the WebGL renderer");i&&(l="x"in i.data?i.data.x:l,u="y"in i.data?i.data.y:u);var a,s,c,h,f,p,g,m,v,y,b=d.settings("edgeHoverPrecision"),x={},w=[],E=l+d.width/2,_=u+d.height/2,P=d.camera.cameraPosition(l,u),k=[];if(o){var A=d.camera.quadtree.area(d.camera.getRectangle(d.width,d.height));for(h=A,a=0,c=h.length;a<c;a++)x[h[a].id]=h[a]}if(d.camera.edgequadtree!==e&&(k=d.camera.edgequadtree.point(P.x,P.y)),k.length)for(a=0,c=k.length;a<c;a++)f=k[a],g=d.graph.nodes(f.source),m=d.graph.nodes(f.target),p=f[t+"size"]||f["read_"+t+"size"],!f.hidden&&!g.hidden&&!m.hidden&&(!o||x[f.source]||x[f.target])&&n.utils.getDistance(g[t+"x"],g[t+"y"],E,_)>g[t+"size"]&&n.utils.getDistance(m[t+"x"],m[t+"y"],E,_)>m[t+"size"]&&("curve"==f.type||"curvedArrow"==f.type?g.id===m.id?(v=n.utils.getSelfLoopControlPoints(g[t+"x"],g[t+"y"],g[t+"size"]),n.utils.isPointOnBezierCurve(E,_,g[t+"x"],g[t+"y"],m[t+"x"],m[t+"y"],v.x1,v.y1,v.x2,v.y2,Math.max(p,b))&&r(w,f)):(v=n.utils.getQuadraticControlPoint(g[t+"x"],g[t+"y"],m[t+"x"],m[t+"y"]),n.utils.isPointOnQuadraticCurve(E,_,g[t+"x"],g[t+"y"],m[t+"x"],m[t+"y"],v.x,v.y,Math.max(p,b))&&r(w,f)):n.utils.isPointOnSegment(E,_,g[t+"x"],g[t+"y"],m[t+"x"],m[t+"y"],Math.max(p,b))&&r(w,f));return w}function o(e){function t(e){d.settings("eventsEnabled")&&(d.dispatchEvent("click",e.data),l=i(e),u=r(e),l.length?(d.dispatchEvent("clickNode",{node:l[0],captor:e.data}),d.dispatchEvent("clickNodes",{node:l,captor:e.data})):u.length?(d.dispatchEvent("clickEdge",{edge:u[0],captor:e.data}),d.dispatchEvent("clickEdges",{edge:u,captor:e.data})):d.dispatchEvent("clickStage",{captor:e.data}))}function n(e){d.settings("eventsEnabled")&&(d.dispatchEvent("doubleClick",e.data),l=i(e),u=r(e),l.length?(d.dispatchEvent("doubleClickNode",{node:l[0],captor:e.data}),d.dispatchEvent("doubleClickNodes",{node:l,captor:e.data})):u.length?(d.dispatchEvent("doubleClickEdge",{edge:u[0],captor:e.data}),d.dispatchEvent("doubleClickEdges",{edge:u,captor:e.data})):d.dispatchEvent("doubleClickStage",{captor:e.data}))}function o(e){d.settings("eventsEnabled")&&(d.dispatchEvent("rightClick",e.data),l=i(e),u=r(e),l.length?(d.dispatchEvent("rightClickNode",{node:l[0],captor:e.data}),d.dispatchEvent("rightClickNodes",{node:l,captor:e.data})):u.length?(d.dispatchEvent("rightClickEdge",{edge:u[0],captor:e.data}),d.dispatchEvent("rightClickEdges",{edge:u,captor:e.data})):d.dispatchEvent("rightClickStage",{captor:e.data}))}function a(e){if(d.settings("eventsEnabled")){var t,i,n,r,o=[],a=[];for(t in c)o.push(c[t]);for(c={},i=0,n=o.length;i<n;i++)d.dispatchEvent("outNode",{node:o[i],captor:e.data});for(o.length&&d.dispatchEvent("outNodes",{nodes:o,captor:e.data}),h={},i=0,r=a.length;i<r;i++)d.dispatchEvent("outEdge",{edge:a[i],captor:e.data});a.length&&d.dispatchEvent("outEdges",{edges:a,captor:e.data})}}function s(e){if(d.settings("eventsEnabled")){l=i(e),u=r(e);var t,n,o,a,s=[],f=[],p={},g=l.length,m=[],v=[],y={},b=u.length;for(t=0;t<g;t++)o=l[t],p[o.id]=o,c[o.id]||(f.push(o),c[o.id]=o);for(n in c)p[n]||(s.push(c[n]),delete c[n]);for(t=0,g=f.length;t<g;t++)d.dispatchEvent("overNode",{node:f[t],captor:e.data});for(t=0,g=s.length;t<g;t++)d.dispatchEvent("outNode",{node:s[t],captor:e.data});for(f.length&&d.dispatchEvent("overNodes",{nodes:f,captor:e.data}),s.length&&d.dispatchEvent("outNodes",{nodes:s,captor:e.data}),t=0;t<b;t++)a=u[t],y[a.id]=a,h[a.id]||(v.push(a),h[a.id]=a);for(n in h)y[n]||(m.push(h[n]),delete h[n]);for(t=0,b=v.length;t<b;t++)d.dispatchEvent("overEdge",{edge:v[t],captor:e.data});for(t=0,b=m.length;t<b;t++)d.dispatchEvent("outEdge",{edge:m[t],captor:e.data});v.length&&d.dispatchEvent("overEdges",{edges:v,captor:e.data}),m.length&&d.dispatchEvent("outEdges",{edges:m,captor:e.data})}}var l,u,c={},h={};e.bind("click",t),e.bind("mousedown",s),e.bind("mouseup",s),e.bind("mousemove",s),e.bind("mouseout",a),e.bind("doubleclick",n),e.bind("rightclick",o),d.bind("render",s)}var a,s,l,u,d=this;for(a=0,s=this.captors.length;a<s;a++)o(this.captors[a])}}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.misc"),n.misc.bindDOMEvents=function(e){function t(e){this.attr=function(t){return e.getAttributeNS(null,t)},this.tag=e.tagName,this["class"]=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this["class"].indexOf(s.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this["class"].indexOf(s.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this["class"].indexOf(s.settings("classPrefix")+"-hover")}}function i(e){if(s.settings("eventsEnabled")){s.dispatchEvent("click",e);var i=new t(e.target);i.isNode()?s.dispatchEvent("clickNode",{node:l.nodes(i.attr("data-node-id"))}):s.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation()}}function r(e){if(s.settings("eventsEnabled")){s.dispatchEvent("doubleClick",e);var i=new t(e.target);i.isNode()?s.dispatchEvent("doubleClickNode",{node:l.nodes(i.attr("data-node-id"))}):s.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation()}}function o(e){var i=e.toElement||e.target;if(s.settings("eventsEnabled")&&i){var n=new t(i);if(n.isNode())s.dispatchEvent("overNode",{node:l.nodes(n.attr("data-node-id"))});else if(n.isEdge()){var r=l.edges(n.attr("data-edge-id"));s.dispatchEvent("overEdge",{edge:r,source:l.nodes(r.source),target:l.nodes(r.target)})}}}function a(e){var i=e.fromElement||e.originalTarget;if(s.settings("eventsEnabled")){var n=new t(i);if(n.isNode())s.dispatchEvent("outNode",{node:l.nodes(n.attr("data-node-id"))});else if(n.isEdge()){var r=l.edges(n.attr("data-edge-id"));s.dispatchEvent("outEdge",{edge:r,source:l.nodes(r.source),target:l.nodes(r.target)})}}}var s=this,l=this.graph;e.addEventListener("click",i,!1),n.utils.doubleClick(e,"click",r),e.addEventListener("touchstart",i,!1),n.utils.doubleClick(e,"touchstart",r),e.addEventListener("mouseover",o,!0),e.addEventListener("mouseout",a,!0)}}.call(this),function(e){"use strict";if("undefined"==typeof n)throw"sigma is not declared";n.utils.pkg("sigma.misc"),n.misc.drawHovers=function(e){function t(){var t,a,s,l,u,d=i.contexts.hover.canvas,c=i.settings("defaultNodeType"),h=i.settings("defaultEdgeType"),f=n.canvas.hovers,p=n.canvas.edgehovers,g=n.canvas.extremities,m=i.settings.embedObjects({prefix:e});if(i.contexts.hover.clearRect(0,0,d.width,d.height),m("enableHovering")&&m("singleHover")&&Object.keys(r).length&&(l=r[Object.keys(r)[0]],(f[l.type]||f[c]||f.def)(l,i.contexts.hover,m)),m("enableHovering")&&!m("singleHover"))for(t in r)(f[r[t].type]||f[c]||f.def)(r[t],i.contexts.hover,m);if(m("enableEdgeHovering")&&m("singleHover")&&Object.keys(o).length&&(u=o[Object.keys(o)[0]],a=i.graph.nodes(u.source),s=i.graph.nodes(u.target),u.hidden||((p[u.type]||p[h]||p.def)(u,a,s,i.contexts.hover,m),m("edgeHoverExtremities")?(g[u.type]||g.def)(u,a,s,i.contexts.hover,m):((n.canvas.nodes[a.type]||n.canvas.nodes.def)(a,i.contexts.hover,m),(n.canvas.nodes[s.type]||n.canvas.nodes.def)(s,i.contexts.hover,m)))),m("enableEdgeHovering")&&!m("singleHover"))for(t in o)u=o[t],a=i.graph.nodes(u.source),s=i.graph.nodes(u.target),u.hidden||((p[u.type]||p[h]||p.def)(u,a,s,i.contexts.hover,m),m("edgeHoverExtremities")?(g[u.type]||g.def)(u,a,s,i.contexts.hover,m):((n.canvas.nodes[a.type]||n.canvas.nodes.def)(a,i.contexts.hover,m),(n.canvas.nodes[s.type]||n.canvas.nodes.def)(s,i.contexts.hover,m)))}var i=this,r={},o={};this.bind("overNode",function(e){var i=e.data.node;i.hidden||(r[i.id]=i,t())}),this.bind("outNode",function(e){delete r[e.data.node.id],t()}),this.bind("overEdge",function(e){var i=e.data.edge;i.hidden||(o[i.id]=i,t())}),this.bind("outEdge",function(e){delete o[e.data.edge.id],t()}),this.bind("render",function(e){t()})}}.call(this)},{}],5:[function(t,i,n){(function(r){!function(t){if("object"==typeof n&&"undefined"!=typeof i)i.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this,o.TQGramUI=t()}}(function(){return function(){function e(i,n,r){function o(s,l){if(!n[s]){if(!i[s]){var u="function"==typeof t&&t;if(!l&&u)return u(s,!0);if(a)return a(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[s]={exports:{}};i[s][0].call(c.exports,function(e){var t=i[s][1][e];return o(t?t:e)},c,c.exports,e,i,n,r)}return n[s].exports}for(var a="function"==typeof t&&t,s=0;s<r.length;s++)o(r[s]);return o}return e}()({1:[function(e,t,i){"use strict";function n(e){function t(){o.rootHtml.innerHTML="",o.rootHtml.style.borderTop=0!==o.buttons.length?"1px solid #cccccc":null,o.rootHtml.style.borderBottom=0!==o.buttons.length?"1px solid #cccccc":null,o.buttons.forEach(function(e){var t=document.createElement("BUTTON");t.title=e.label,t.className="tq-ui-toolbar__button tq-ui-colored-button",t.innerHTML='<span style="color: '+e.borderColor+'">'+i(e.label)+"</span>",t.style.backgroundColor=e.backgroundColor||"white",t.style.borderColor=e.borderColor||"black",t.onclick=function(t){e.callback(e,t)},o.rootHtml.appendChild(t)})}function i(e){if(e){var t=e.match(/[a-z'\-]+/gi);return t.filter(function(e){return"and"!==e.toLowerCase()&&"&"!==e}).map(function(e){return e[0]}).join("")}}function n(){var e=document.createElement("DIV");return e.className="tq-ui-colored-buttons-list",e.innerHTML="",e}var o=this;e||(e={}),o.rootHtml=n(),o.id=e.id||"coloredButtons-"+r++,o.rootHtml.id=o.id,o.buttons=e.buttons||[],t(),o.removeAll=function(){o.buttons=[],t()},o.addButton=function(e){o.buttons.map(function(e){return e.id}).indexOf(e.id)===-1&&(o.buttons.push(e),t())},o.removeButton=function(e){o.buttons.splice(o.buttons.indexOf(e),1),t()}}Object.defineProperty(i,"__esModule",{value:!0}),i.ColoredButtonsList=n;var r=0;i["default"]=n},{}],2:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){if(e.body instanceof Object){var t=r.rootHtml.querySelector(".tq-ui-body_container");t.appendChild(e.body.rootHtml)}var s=r.rootHtml.querySelector(".tq-ui-flying-panel_header");s.addEventListener("mousedown",n);var l=r.rootHtml.querySelector(".tq-ui-windows-collapse-button");if(l.onclick=r.hide,e.resizable){var u=r.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-top-border");u.addEventListener("mousedown",function(e){n(e,"n")});var d=r.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-right-border");d.addEventListener("mousedown",function(e){n(e,"e")});var c=r.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-bottom-border");c.addEventListener("mousedown",function(e){n(e,"s")});var h=r.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-left-border");h.addEventListener("mousedown",function(e){n(e,"w")});var f=r.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-top-right-border");f.addEventListener("mousedown",function(e){
n(e,"ne")});var p=r.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-top-left-border");p.addEventListener("mousedown",function(e){n(e,"nw")});var g=r.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-bottom-right-border");g.addEventListener("mousedown",function(e){n(e,"se")});var m=r.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-bottom-left-border");m.addEventListener("mousedown",function(e){n(e,"sw")})}r._triggerButton=o(e.triggerButton),i(),r._triggerButton&&(r._triggerButton.onclick=function(){a?r.show():r.hide()})}function i(){a?(r._triggerButton&&(r._triggerButton.className=r._triggerButton.className.replace(/ tq-ui-selected/gi,"")),r.rootHtml.className=r.rootHtml.className+" tq-ui-collapsed"):(r._triggerButton&&(r._triggerButton.className=r._triggerButton.className+" tq-ui-selected"),r.rootHtml.className=r.rootHtml.className.replace(/ tq-ui-collapsed/gi,""))}function n(e,t){function i(e){r._mouseMove=!0;var i=0;e.pageX?i=e.pageX:e.clientX&&(i=e.clientX);var n=i-a;a=i,t||(r.rootHtml.style.left=r.rootHtml.offsetLeft+n+"px");var l=0;e.pageY?l=e.pageY:e.clientY&&(l=e.clientY);var u=l-s;s=l,t||(r.rootHtml.style.top=r.rootHtml.offsetTop+u+"px"),t?(o(n,u,t),r.trigger("size-changed",{width:r.rootHtml.offsetWidth,height:r.rootHtml.offsetHeight}),t.indexOf("n")===-1&&t.indexOf("w")===-1||r.trigger("position-changed",{x:r.rootHtml.offsetLeft,y:r.rootHtml.offsetTop})):r.trigger("position-changed",{x:r.rootHtml.offsetLeft,y:r.rootHtml.offsetTop})}function n(e){r._mouseMove&&(i(e,!0),r._mouseMove=!1),document.body.onmousemove=document.body.onmouseup=null,document.body.removeEventListener("mousemove",i),document.body.removeEventListener("mouseup",n)}function o(e,t,i){switch(i){case"n":r.rootHtml.style.height=r.rootHtml.offsetHeight-t+"px",r.rootHtml.style.top=r.rootHtml.offsetTop+t+"px";break;case"e":r.rootHtml.style.width=r.rootHtml.offsetWidth+e+"px";break;case"s":r.rootHtml.style.height=r.rootHtml.offsetHeight+t+"px";break;case"w":r.rootHtml.style.width=r.rootHtml.offsetWidth-e+"px",r.rootHtml.style.left=r.rootHtml.offsetLeft+e+"px";break;case"ne":r.rootHtml.style.width=r.rootHtml.offsetWidth+e+"px",r.rootHtml.style.height=r.rootHtml.offsetHeight-t+"px",r.rootHtml.style.top=r.rootHtml.offsetTop+t+"px";break;case"nw":r.rootHtml.style.height=r.rootHtml.offsetHeight-t+"px",r.rootHtml.style.top=r.rootHtml.offsetTop+t+"px",r.rootHtml.style.width=r.rootHtml.offsetWidth-e+"px",r.rootHtml.style.left=r.rootHtml.offsetLeft+e+"px";break;case"se":r.rootHtml.style.width=r.rootHtml.offsetWidth+e+"px",r.rootHtml.style.height=r.rootHtml.offsetHeight+t+"px";break;case"sw":r.rootHtml.style.height=r.rootHtml.offsetHeight+t+"px",r.rootHtml.style.width=r.rootHtml.offsetWidth-e+"px",r.rootHtml.style.left=r.rootHtml.offsetLeft+e+"px"}}var a=0,s=0;e.pageX?a=e.pageX:e.clientX&&(a=e.clientX),e.pageY?s=e.pageY:e.clientY&&(s=e.clientY),window.getSelection().removeAllRanges(),document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",n)}l["default"].apply(this);var r=this;e||(e={});var a=!e.active;r.markup='\n        <div class="tq-ui-flying-panel"\n            style="\n                width: '+(e.size?e.size.width:"")+";\n                height: "+(e.size?e.size.height:"")+";\n                left: "+(e.position?e.position.x:"")+";\n                top: "+(e.position?e.position.y:"")+';\n            "\n        >\n            <div class="tq-ui-flying-panel_header">\n                <div class="tq-ui-flying-panel_header__header">\n                    <label class="tq-ui-window-header-label">'+(e.header?e.header:"")+'</label>\n                    <img class="tq-ui-windows-collapse-button"/>\n                </div>\n            </div>\n            <div class="tq-ui-body">\n                <div class="tq-ui-body_container '+(e.removeBackground?"tq-ui-body_empty-container":"tq-ui-body_default-container")+'">\n                    '+(e.body&&"string"==typeof e.body?e.body:"")+"\n                </div>\n            </div>\n            "+(e.resizable?'\n                <div class="tq-ui-flying-panel__border tq-ui-top-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-right-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-bottom-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-left-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-top-left-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-top-right-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-bottom-left-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-bottom-right-border"></div>\n            ':"")+"\n        </div>";var s=o(e.baseElement);s.innerHTML=r.markup,r.rootHtml=s.querySelector(".tq-ui-flying-panel"),r.id=e.id||"flyingPanel-"+u++,r.rootHtml.id=r.id,r.show=function(e){e&&e.stopPropagation(),a&&(a=!1,i())},r.hide=function(e){e&&e.stopPropagation(),a||(a=!0,i())},t()}function o(e){var t=void 0;return"string"==typeof e?t=document.getElementById(e):"object"===("undefined"==typeof e?"undefined":a(e))&&(t=e),t}Object.defineProperty(i,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.FlyingPanel=r;var s=e("./subscriptionAPI/subscribeable"),l=n(s),u=0;i["default"]=r},{"./subscriptionAPI/subscribeable":8}],3:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){function t(e){var t=e.label,i=e.label+" ("+e.id+")",n=document.createElement("LI");return n.className="tq-ui-property-button",n.title=i,n.innerText=t,n.onclick=function(){r.trigger("selected-element-changed",e.id)},n}var i=r.rootHtml.querySelector("#relatedElements");i.innerHTML="";var n=e.incomings||[];if(n.length){var o=document.createElement("LABEL");o.className="tq-label",o.innerText="Incoming nodes:",i.appendChild(o);var a=document.createElement("UL");a.className="tq-ui-info-panel_related-elements_list",i.appendChild(a),n.forEach(function(e){a.appendChild(t(e))})}var s=e.outgoings||[];if(s.length){var l=document.createElement("LABEL");l.className="tq-label",l.innerText="Outgoing nodes:",i.appendChild(l);var u=document.createElement("UL");u.className="tq-ui-info-panel_related-elements_list",i.appendChild(u),s.forEach(function(e){u.appendChild(t(e))})}}function i(e){var t="";return Object.keys(e).forEach(function(i){t+='<label for="'+i+'" class="tq-label">'+i+'</label>\n                        <input id="'+i+'" type="text" class="tq-ui-property" value="'+e[i]+'" disabled></input>'}),t}function n(){var e=document.createElement("DIV");return e.className="tq-ui-info-panel",e.innerHTML=r.markup,e}a["default"].apply(this),e||(e={});var r=this,o=e.placeholder||"Select a diagram element",l='<div class="tq-ui-info-panel_empty-stuff">'+o+"</div>";r.rootHtml=n(),r.rootHtml.innerHTML=l,r.id=e.id||"infoPanel-"+s++,r.rootHtml.id=r.id,r.setSelectedElement=function(n){if(n){if(r.rootHtml.innerHTML=""+(e.launchExternal&&"node"===n.diagramType?'<div class="tq-ui-group">\n                      <button id="tqLaunchExternalBtn" class="tq-button" title="View more in new tab.">\n                        More &nbsp;\n                      <span class="glyphicon glyphicon-new-window"></span></button>\n                     </div>':"")+(n.id?'\n                    <label class="tq-label">ID</label>\n                    <input value="'+n.id+'" type="text" class="tq-ui-property" disabled></input>\n                ':"")+(n.label?'\n                    <label class="tq-label">Label</label>\n                    <input value="'+n.label+'" type="text" class="tq-ui-property" disabled></input>\n                ':"")+(n.types?'\n                    <label class="tq-label">Types</label>\n                    <input value="'+n.types+'" type="text" class="tq-ui-property" disabled></input>\n                ':"")+(n.source?'\n                    <label for="linkFrom" class="tq-label">Source</label>\n                    <div id="linkFrom" type="text" class="tq-ui-property-button"></div>\n                ':"")+(n.target?'\n                    <label for="linkTo" class="tq-label">Target</label>\n                    <div id="linkTo" type="text" class="tq-ui-property-button"></div>\n                ':"")+(n.thickness?'\n                    <label for="thickness" class="tq-label">Thickness</label>\n                    <input value="'+n.thickness+'" type="text" class="tq-ui-property" disabled></input>\n                ':"")+(n.data?i(n.data):"")+(n.relations?'\n                    <label for="relatedElements" class="tq-label">Related elements</label>\n                    <div   id="relatedElements" class="tq-ui-info-panel_related-elements"></div>\n                ':""),e.launchExternal&&"node"===n.diagramType){var o=document.getElementById("tqLaunchExternalBtn");o.onclick=function(){e.launchExternal(n)}}if(n.relations&&t(n.relations),n.source){var a=document.getElementById("linkFrom");a.innerText=n.source.label,a.title=n.source.label+"(ID: "+n.source.id+")",a.onclick=function(){r.trigger("selected-element-changed",n.source.id)}}if(n.target){var s=document.getElementById("linkTo");s.innerText=n.target.label,s.title=n.target.label+"(ID: "+n.target.id+")",s.onclick=function(){r.trigger("selected-element-changed",n.target.id)}}}else r.rootHtml.innerHTML=l},e.selectedElement&&r.setSelectedElement(e.selectedElement)}Object.defineProperty(i,"__esModule",{value:!0}),i.InfoPanel=r;var o=e("./subscriptionAPI/subscribeable"),a=n(o),s=0;i["default"]=r},{"./subscriptionAPI/subscribeable":8}],4:[function(e,t,i){"use strict";function n(e){function t(){var e=document.createElement("DIV");return e.innerHTML=i.markup,e.querySelector(".tq-ui-legend-panel_body_legends")}var i=this;e||(e={});var n=e.legends||[];i.markup='\n        <div class="tq-ui-legend-panel_body_legends">\n        '+n.map(function(e){return'\n                <div class="tq-ui-legend-panel_body_legends_legend" title="'+e.description+'">\n                    <div class="tq-ui-legend-panel_body_legends_legend_img"><img src="'+e.image+'"></div>\n                    <label class="tq-label">'+e.label+"</label>\n                </div>\n            "}).join("")+"\n        </div>\n    ",i.rootHtml=t(),i.id=e.id||"legends-"+r++,i.rootHtml.id=i.id}Object.defineProperty(i,"__esModule",{value:!0}),i.Legends=n;var r=0;i["default"]=n},{}],5:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=e("./coloredButtonsList"),o=n(r),a=e("./flyingPanel"),s=n(a),l=e("./infoPanel"),u=n(l),d=e("./legends"),c=n(d),h=e("./progressScreen"),f=n(h),p=e("./searchPanel"),g=n(p),m=e("./switcher"),v=n(m),y=e("./tabPanel"),b=n(y),x=e("./toolbar"),w=n(x);t.exports={ColoredButtonsList:o["default"],FlyingPanel:s["default"],InfoPanel:u["default"],Legends:c["default"],ProgressScreen:f["default"],SearchPanel:g["default"],Switcher:v["default"],TabPanel:b["default"],Toolbar:w["default"]}},{"./coloredButtonsList":1,"./flyingPanel":2,"./infoPanel":3,"./legends":4,"./progressScreen":6,"./searchPanel":7,"./switcher":9,"./tabPanel":10,"./toolbar":11}],6:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){var e=document.createElement("DIV");return e.className="tq-ui-progress-screen",e.innerHTML=n.markup,e}function i(e){var t=void 0;return"string"==typeof e?t=document.getElementById(e):"object"===("undefined"==typeof e?"undefined":o(e))&&(t=e),t}s["default"].apply(this);var n=this;e||(e={}),n.markup="",n.state="completed",n.rootHtml=t(),n.id=e.id||"tabPanel-"+l++,n.rootHtml.id=n.id;var r=i(e.baseElement);r.appendChild(n.rootHtml),n.setState=function(e,t){e&&(n.state=e,"active"===e?(n.rootHtml.innerHTML="<h1>"+(t||u)+'</h1><div class="tq-ui-progress-screen__progress"></div>',n.rootHtml.style.display=null):"completed"===e?(n.rootHtml.innerHTML="",n.rootHtml.style.display="none"):"error"===e&&(n.rootHtml.innerHTML="<h1>"+(t||d)+"</h1>",n.rootHtml.style.display=null),n.trigger("diagram-state-changed",e))},n.setState(e.state,e.text)}Object.defineProperty(i,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.ProgressScreen=r;var a=e("./subscriptionAPI/subscribeable"),s=n(a),l=0,u="Loading",d="Error has occurred!";i["default"]=r},{"./subscriptionAPI/subscribeable":8}],7:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){a["default"].apply(this),e||(e={});var t=e.searchButtonId||"tqLgSearchButton",i=e.searchId||"search";l["default"].apply(this,[{id:e.id,baseElement:e.baseElement,active:e.active,header:e.header||"Search panel",triggerButton:e.triggerButton,body:"\n            <span id= "+t+' class="tq-ui-search-icon glyphicon glyphicon-search" aria-hidden="true"></span>\n            <input id="'+i+'" placeHolder="Search..." class="tq-ui-search-input"></input>\n        ',removeBackground:!0,size:{width:"260px",height:"70px"}}])}Object.defineProperty(i,"__esModule",{value:!0}),i.SearchPanel=r;var o=e("./subscriptionAPI/subscribeable"),a=n(o),s=e("./flyingPanel"),l=n(s);i["default"]=r},{"./flyingPanel":2,"./subscriptionAPI/subscribeable":8}],8:[function(e,t,i){"use strict";function n(){var e=this;e._subscribtions={},e.on=function(t,i){e._subscribtions[t]||(e._subscribtions[t]=[]),e._subscribtions[t].push(i)},e.unsubscribe=function(t){Object.keys(e._subscribtions).map(function(t){return e._subscribtions[t]}).forEach(function(e){var i=e.indexOf(t);i!==-1&&e.splice(i,1)})},e.trigger=function(t,i){var n=this;i instanceof Array||(i=[i]),e._subscribtions&&e._subscribtions[t]&&e._subscribtions[t].forEach(function(e){e.apply(n,i)})}}Object.defineProperty(i,"__esModule",{value:!0}),i.Subscribable=n,i["default"]=n},{}],9:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){var t=document.createElement("DIV");return t.className="tq-ui-switch-buttons"+(e.verticalOrientation?"-vertical":""),t.innerHTML=i.markup,t}a["default"].apply(this),e||(e={});var i=this,n=e.states||[];i.markup=n.map(function(t,i){return'<button id="'+t.id+'" '+(0!==i?"":"disabled")+' title="'+(t.label||t.id)+'">\n            '+(e.verticalOrientation&&t.icon?'<span class="'+t.icon+'" aria-hidden="true"></span>':t.label||t.id)+"\n        </button>"}).join(""),i.rootHtml=t(),i.id=e.id||"switcher-"+s++,i.rootHtml.id=i.id;var r=null;n.forEach(function(e,t){var n=i.rootHtml.querySelector("#"+e.id);0===t&&(r=n),n.onclick=function(){n.disabled=!0,r.disabled=!1,r=n,i.trigger("state-changed",e.id)}}),i.setState=function(e){var t=i.rootHtml.querySelector("#"+e);t&&e!==r.id&&(t.disabled=!0,r.disabled=!1,r=t)}}Object.defineProperty(i,"__esModule",{value:!0}),i.Switcher=r;var o=e("./subscriptionAPI/subscribeable"),a=n(o),s=0;i["default"]=r},{"./subscriptionAPI/subscribeable":8}],10:[function(e,t,i){"use strict";function n(e){function t(){var e=document.createElement("DIV");return e.className="tq-ui-tab-panel",e.innerHTML=i.markup,e}var i=this;e||(e={});var n=e.tabs||[];i.markup='\n        <div class="tq-ui-tab-switcher tq-ui-switch-buttons">'+n.map(function(e,t){return'\n            <button id="'+e.id+'" '+(0!==t?"":"disabled")+">\n                "+(e.label||e.id)+"\n            </button>  \n        "}).join("")+"</div>"+n.map(function(e,t){return'\n            <div id="'+e.id+'Panel" class="tq-ui-tab-panel_page" style="display: '+(0===t?"":"none")+'">\n                <div class="tq-ui-tab-panel_page_body">\n                    '+("string"==typeof e.body?e.body:"")+"\n                </div>\n            </div>\n        "}).join(""),i.rootHtml=t(),i.id=e.id||"tabPanel-"+r++,i.rootHtml.id=i.id,n.map(function(e){if(e.body instanceof Object&&e.body.rootHtml){var t=i.rootHtml.querySelector("#"+e.id+"Panel .tq-ui-tab-panel_page_body");t.appendChild(e.body.rootHtml)}});var o=null;n.forEach(function(e,t){var n=i.rootHtml.querySelector("#"+e.id),r=i.rootHtml.querySelector("#"+e.id+"Panel");0===t&&(o={tabBtn:n,tabPanel:r}),n.onclick=function(){n.disabled=!0,r.style.display="",o.tabBtn.disabled=!1,o.tabPanel.style.display="none",o={tabBtn:n,tabPanel:r}}})}Object.defineProperty(i,"__esModule",{value:!0}),i.TabPanel=n;var r=0;i["default"]=n},{}],11:[function(e,t,i){"use strict";function n(e){function t(e){var t=void 0;if("string"==typeof e){var i=document.createElement("DIV");i.innerHTML=e,t=i.firstChild}else if(e.id&&e.icon){var n=document.createElement("DIV");if(n.innerHTML='<button id="'+e.id+'" title="'+(e.label||e.id)+'" class="tq-ui-toolbar__button">\n                <span class="'+e.icon+'" aria-hidden="true"></span>\n            </button>',t=n.firstChild,e.icon2){var r=!0;t.onclick=function(i){t.innerHTML='<span class="'+(r?e.icon2:e.icon)+'" aria-hidden="true"></span>',e.callback(i),r=!r}}else t.onclick=e.callback}else e.rootHtml&&(t=e.rootHtml);return t}function i(){var t=void 0;return"string"==typeof e.baseElement?t=document.getElementById(e.baseElement):"object"===r(e.baseElement)&&(t=e.baseElement),t?(t.innerHTML=n.markup,t):null}var n=this;if(e||(e={}),n.markup='\n        <div id="toolbarRootElement" class="tq-ui-toolbar">\n        </div>\n    ',n.rootHtml=i(),n.id=e.id||"toolbar-"+o++,n.rootHtml.id=n.id,!n.rootHtml)throw new Error("The root element is not specified!");n.container=n.rootHtml.querySelector("#toolbarRootElement"),n.pushTool=function(e){var i=t(e);i&&("string"!=typeof i?a.push(e):a.push({id:"customhtml"+o++,markup:e,rootHtml:i}),n.container.appendChild(i))},n.insertTool=function(e,i){var r=Math.min(Math.max(i,0),a.length-1),o=n.container.querySelector("#"+a[r].id);if(o){var s=t(e);s&&(a.splice(r,0,e),n.container.insertBefore(s,o))}else n.pushTool(e)},n.removeTool=function(e){var t="string"==typeof e?e:e.id;a.splice(a.indexOf(e),1);var i=n.container.querySelector("#"+t);n.container.removeChild(i)};var a=[];e.tools.forEach(function(e){n.pushTool(e)})}Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.Toolbar=n;var o=0;i["default"]=n},{}]},{},[5])(5)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,i){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(e("./src/adaptor")),n(e("./src/d3adaptor")),n(e("./src/descent")),n(e("./src/geom")),n(e("./src/gridrouter")),n(e("./src/handledisconnected")),n(e("./src/layout")),n(e("./src/layout3d")),n(e("./src/linklengths")),n(e("./src/powergraph")),n(e("./src/pqueue")),n(e("./src/rbtree")),n(e("./src/rectangle")),n(e("./src/shortestpaths")),n(e("./src/vpsc")),n(e("./src/batch"))},{"./src/adaptor":7,"./src/batch":8,"./src/d3adaptor":9,"./src/descent":12,"./src/geom":13,"./src/gridrouter":14,"./src/handledisconnected":15,"./src/layout":16,"./src/layout3d":17,"./src/linklengths":18,"./src/powergraph":19,"./src/pqueue":20,"./src/rbtree":21,"./src/rectangle":22,"./src/shortestpaths":23,"./src/vpsc":24}],7:[function(e,t,i){"use strict";function n(e){return new a(e)}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./layout"),a=function(e){function t(t){var i=e.call(this)||this,n=t;return n.trigger&&(i.trigger=n.trigger),n.kick&&(i.kick=n.kick),n.drag&&(i.drag=n.drag),n.on&&(i.on=n.on),i.dragstart=i.dragStart=o.Layout.dragStart,i.dragend=i.dragEnd=o.Layout.dragEnd,i}return r(t,e),t.prototype.trigger=function(e){},t.prototype.kick=function(){},t.prototype.drag=function(){},t.prototype.on=function(e,t){return this},t}(o.Layout);i.LayoutAdaptor=a,i.adaptor=n},{"./layout":16}],8:[function(e,t,i){"use strict";function n(e,t,i,n){e.cola.start(0,0,0,10,!1);var o=r(e.cola.nodes(),e.cola.groups(),i,n);return o.routeEdges(e.powerGraph.powerEdges,t,function(e){return e.source.routerNode.id},function(e){return e.target.routerNode.id})}function r(e,t,i,n){e.forEach(function(e){e.routerNode={name:e.name,bounds:e.bounds.inflate(-i)}}),t.forEach(function(t){t.routerNode={bounds:t.bounds.inflate(-n),children:("undefined"!=typeof t.groups?t.groups.map(function(t){return e.length+t.id}):[]).concat("undefined"!=typeof t.leaves?t.leaves.map(function(e){return e.index}):[])}});var r=e.concat(t).map(function(e,t){return e.routerNode.id=t,e.routerNode});return new s.GridRouter(r,{getChildren:function(e){return e.children},getBounds:function(e){return e.bounds}},i-n)}function o(e,t,i){var n;e.nodes.forEach(function(e,t){return e.index=t}),(new a.Layout).avoidOverlaps(!1).nodes(e.nodes).links(e.links).powerGraphGroups(function(e){n=e,n.groups.forEach(function(e){return e.padding=i})});var r=e.nodes.length,o=[],s=e.nodes.slice(0);return s.forEach(function(e,t){return e.index=t}),n.groups.forEach(function(e){var t=e.index=e.id+r;s.push(e),"undefined"!=typeof e.leaves&&e.leaves.forEach(function(e){return o.push({source:t,target:e.index})}),"undefined"!=typeof e.groups&&e.groups.forEach(function(e){return o.push({source:t,target:e.id+r})})}),n.powerEdges.forEach(function(e){o.push({source:e.source.index,target:e.target.index})}),(new a.Layout).size(t).nodes(s).links(o).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new a.Layout).convergenceThreshold(.001).size(t).avoidOverlaps(!0).nodes(e.nodes).links(e.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(e){n=e,n.groups.forEach(function(e){e.padding=i})}).start(50,0,100,0,!1),powerGraph:n}}Object.defineProperty(i,"__esModule",{value:!0});var a=e("./layout"),s=e("./gridrouter");i.gridify=n,i.powerGraphGridLayout=o},{"./gridrouter":14,"./layout":16}],9:[function(e,t,i){"use strict";function n(e){return!e||r(e)?new o.D3StyleLayoutAdaptor:new a.D3StyleLayoutAdaptor(e)}function r(e){var t=/^3\./;return e.version&&null!==e.version.match(t)}Object.defineProperty(i,"__esModule",{value:!0});var o=e("./d3v3adaptor"),a=e("./d3v4adaptor");i.d3adaptor=n},{"./d3v3adaptor":10,"./d3v4adaptor":11}],10:[function(e,t,i){"use strict";function n(){return new a}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./layout"),a=function(e){function t(){var t=e.call(this)||this;t.event=d3.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var i=t;return t.drag=function(){if(!e)var e=d3.behavior.drag().origin(o.Layout.dragOrigin).on("dragstart.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",function(e){o.Layout.drag(e,d3.event),i.resume()}).on("dragend.d3adaptor",o.Layout.dragEnd);return arguments.length?void this.call(e):e},t}return r(t,e),t.prototype.trigger=function(e){var t={type:o.EventType[e.type],alpha:e.alpha,stress:e.stress};this.event[t.type](t)},t.prototype.kick=function(){var t=this;d3.timer(function(){return e.prototype.tick.call(t)})},t.prototype.on=function(e,t){return"string"==typeof e?this.event.on(e,t):this.event.on(o.EventType[e],t),this},t}(o.Layout);i.D3StyleLayoutAdaptor=a,i.d3adaptor=n},{"./layout":16}],11:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var r=e("./layout"),o=function(e){function t(t){var i=e.call(this)||this;i.d3Context=t,i.event=t.dispatch(r.EventType[r.EventType.start],r.EventType[r.EventType.tick],r.EventType[r.EventType.end]);var n=i;return i.drag=function(){if(!e)var e=t.drag().subject(r.Layout.dragOrigin).on("start.d3adaptor",r.Layout.dragStart).on("drag.d3adaptor",function(e){r.Layout.drag(e,t.event),n.resume()}).on("end.d3adaptor",r.Layout.dragEnd);return arguments.length?void arguments[0].call(e):e},i}return n(t,e),t.prototype.trigger=function(e){var t={type:r.EventType[e.type],alpha:e.alpha,stress:e.stress};this.event.call(t.type,t)},t.prototype.kick=function(){var t=this,i=this.d3Context.timer(function(){return e.prototype.tick.call(t)&&i.stop()})},t.prototype.on=function(e,t){return"string"==typeof e?this.event.on(e,t):this.event.on(r.EventType[e],t),this},t}(r.Layout);i.D3StyleLayoutAdaptor=o},{"./layout":16}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.locks={}}return e.prototype.add=function(e,t){this.locks[e]=t},e.prototype.clear=function(){this.locks={}},e.prototype.isEmpty=function(){for(var e in this.locks)return!1;return!0},e.prototype.apply=function(e){for(var t in this.locks)e(Number(t),this.locks[t])},e}();i.Locks=n;var r=function(){function e(e,t,i){void 0===i&&(i=null),this.D=t,this.G=i,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new o,this.project=null,this.x=e,this.k=e.length;var r=this.n=e[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new n,this.minD=Number.MAX_VALUE;for(var a,s=r;s--;)for(a=r;--a>s;){var l=t[s][a];l>0&&l<this.minD&&(this.minD=l)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(r),this.H[s]=new Array(r),a=r;a--;)this.H[s][a]=new Array(r);this.Hd[s]=new Array(r),this.a[s]=new Array(r),this.b[s]=new Array(r),this.c[s]=new Array(r),this.d[s]=new Array(r),this.e[s]=new Array(r),this.ia[s]=new Array(r),this.ib[s]=new Array(r),this.xtmp[s]=new Array(r)}}return e.createSquareMatrix=function(e,t){for(var i=new Array(e),n=0;n<e;++n){i[n]=new Array(e);for(var r=0;r<e;++r)i[n][r]=t(n,r)}return i},e.prototype.offsetDir=function(){for(var e=this,t=new Array(this.k),i=0,n=0;n<this.k;++n){var r=t[n]=this.random.getNextBetween(.01,1)-.5;i+=r*r}return i=Math.sqrt(i),t.map(function(t){return t*=e.minD/i})},e.prototype.computeDerivatives=function(e){var t=this,i=this.n;if(!(i<1)){for(var n,r=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,l=0;l<i;++l){for(n=0;n<this.k;++n)a[n]=this.g[n][l]=0;for(var u=0;u<i;++u)if(l!==u){for(var d=i;d--;){var c=0;for(n=0;n<this.k;++n){var h=r[n]=e[n][l]-e[n][u];c+=o[n]=h*h}if(c>1e-9)break;var f=this.offsetDir();for(n=0;n<this.k;++n)e[n][u]+=f[n]}var p=Math.sqrt(c),g=this.D[l][u],m=null!=this.G?this.G[l][u]:1;if(m>1&&p>g||!isFinite(g))for(n=0;n<this.k;++n)this.H[n][l][u]=0;else{m>1&&(m=1);var v=g*g,y=2*m*(p-g)/(v*p),b=p*p*p,x=2*-m/(v*b);for(isFinite(y)||console.log(y),n=0;n<this.k;++n)this.g[n][l]+=r[n]*y,a[n]-=this.H[n][l][u]=x*(b+g*(o[n]-c)+p*c)}}for(n=0;n<this.k;++n)s=Math.max(s,this.H[n][l][l]=a[n])}for(var w=this.snapGridSize/2,E=this.snapGridSize,_=this.snapStrength,P=_/(w*w),k=this.numGridSnapNodes,l=0;l<k;++l)for(n=0;n<this.k;++n){var A=this.x[n][l],M=A/E,S=M%1,T=M-S,L=Math.abs(S),h=L<=.5?A-T*E:A>0?A-(T+1)*E:A-(T-1)*E;-w<h&&h<=w&&(this.scaleSnapByMaxH?(this.g[n][l]+=s*P*h,this.H[n][l][l]+=s*P):(this.g[n][l]+=P*h,this.H[n][l][l]+=P))}this.locks.isEmpty()||this.locks.apply(function(i,r){for(n=0;n<t.k;++n)t.H[n][i][i]+=s,t.g[n][i]-=s*(r[n]-e[n][i])})}},e.dotProd=function(e,t){for(var i=0,n=e.length;n--;)i+=e[n]*t[n];return i},e.rightMultiply=function(t,i,n){for(var r=t.length;r--;)n[r]=e.dotProd(t[r],i)},e.prototype.computeStepSize=function(t){for(var i=0,n=0,r=0;r<this.k;++r)i+=e.dotProd(this.g[r],t[r]),e.rightMultiply(this.H[r],t[r],this.Hd[r]),n+=e.dotProd(t[r],this.Hd[r]);return 0!==n&&isFinite(n)?1*i/n:0},e.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var e=this.computeStepSize(this.g),t=0;t<this.k;++t)this.takeDescentStep(this.x[t],this.g[t],e);return this.computeStress()},e.copy=function(e,t){for(var i=e.length,n=t[0].length,r=0;r<i;++r)for(var o=0;o<n;++o)t[r][o]=e[r][o]},e.prototype.stepAndProject=function(t,i,n,r){e.copy(t,i),this.takeDescentStep(i[0],n[0],r),this.project&&this.project[0](t[0],t[1],i[0]),this.takeDescentStep(i[1],n[1],r),this.project&&this.project[1](i[0],t[1],i[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(i[o],n[o],r)},e.mApply=function(e,t,i){for(var n=e;n-- >0;)for(var r=t;r-- >0;)i(n,r)},e.prototype.matrixApply=function(t){e.mApply(this.k,this.n,t)},e.prototype.computeNextPosition=function(e,t){var i=this;this.computeDerivatives(e);var n=this.computeStepSize(this.g);if(this.stepAndProject(e,t,this.g,n),this.project){this.matrixApply(function(n,r){return i.e[n][r]=e[n][r]-t[n][r]});var r=this.computeStepSize(this.e);r=Math.max(.2,Math.min(r,1)),this.stepAndProject(e,t,this.e,r)}},e.prototype.run=function(e){for(var t=Number.MAX_VALUE,i=!1;!i&&e-- >0;){var n=this.rungeKutta();i=Math.abs(t/n-1)<this.threshold,t=n}return t},e.prototype.rungeKutta=function(){var t=this;this.computeNextPosition(this.x,this.a),e.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),e.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var i=0;return this.matrixApply(function(e,n){var r=(t.a[e][n]+2*t.b[e][n]+2*t.c[e][n]+t.d[e][n])/6,o=t.x[e][n]-r;i+=o*o,t.x[e][n]=r}),i},e.mid=function(t,i,n){e.mApply(t.length,t[0].length,function(e,r){return n[e][r]=t[e][r]+(i[e][r]-t[e][r])/2})},e.prototype.takeDescentStep=function(e,t,i){for(var n=0;n<this.n;++n)e[n]=e[n]-i*t[n]},e.prototype.computeStress=function(){for(var e=0,t=0,i=this.n-1;t<i;++t)for(var n=t+1,r=this.n;n<r;++n){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][t]-this.x[a][n];o+=s*s}o=Math.sqrt(o);var l=this.D[t][n];if(isFinite(l)){var u=l-o,d=l*l;e+=u*u/d}}return e},e.zeroDistance=1e-10,e}();i.Descent=r;var o=function(){function e(e){void 0===e&&(e=1),this.seed=e,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return e.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},e.prototype.getNextBetween=function(e,t){return e+this.getNext()*(t-e)},e}();i.PseudoRandom=o},{}],13:[function(e,t,i){"use strict";function n(e,t,i){return(t.x-e.x)*(i.y-e.y)-(i.x-e.x)*(t.y-e.y)}function r(e,t,i){return n(e,t,i)>0}function o(e,t,i){return n(e,t,i)<0}function a(e){var t,i=e.slice(0).sort(function(e,t){return e.x!==t.x?t.x-e.x:t.y-e.y}),r=e.length,o=0,a=i[0].x;for(t=1;t<r&&i[t].x===a;++t);var s=t-1,l=[];if(l.push(i[o]),s===r-1)i[s].y!==i[o].y&&l.push(i[s]);else{var u,d=r-1,c=i[r-1].x;for(t=r-2;t>=0&&i[t].x===c;t--);for(u=t+1,t=s;++t<=u;)if(!(n(i[o],i[u],i[t])>=0&&t<u)){for(;l.length>1&&!(n(l[l.length-2],l[l.length-1],i[t])>0);)l.length-=1;t!=o&&l.push(i[t])}d!=u&&l.push(i[d]);var h=l.length;for(t=u;--t>=s;)if(!(n(i[d],i[s],i[t])>=0&&t>s)){for(;l.length>h&&!(n(l[l.length-2],l[l.length-1],i[t])>0);)l.length-=1;t!=o&&l.push(i[t])}}return l;
}function s(e,t,i){t.slice(0).sort(function(t,i){return Math.atan2(t.y-e.y,t.x-e.x)-Math.atan2(i.y-e.y,i.x-e.x)}).forEach(i)}function l(e,t){var i=t.slice(0);return i.push(t[0]),{rtan:u(e,i),ltan:d(e,i)}}function u(e,t){var i,n,a,s,l,u=t.length-1;if(o(e,t[1],t[0])&&!r(e,t[u-1],t[0]))return 0;for(i=0,n=u;;){if(n-i===1)return r(e,t[i],t[n])?i:n;if(a=Math.floor((i+n)/2),l=o(e,t[a+1],t[a]),l&&!r(e,t[a-1],t[a]))return a;s=r(e,t[i+1],t[i]),s?l?n=a:r(e,t[i],t[a])?n=a:i=a:l&&o(e,t[i],t[a])?n=a:i=a}}function d(e,t){var i,n,a,s,l,u=t.length-1;if(r(e,t[u-1],t[0])&&!o(e,t[1],t[0]))return 0;for(i=0,n=u;;){if(n-i===1)return o(e,t[i],t[n])?i:n;if(a=Math.floor((i+n)/2),l=o(e,t[a+1],t[a]),r(e,t[a-1],t[a])&&!l)return a;s=o(e,t[i+1],t[i]),s?l?o(e,t[i],t[a])?n=a:i=a:n=a:l?i=a:r(e,t[i],t[a])?n=a:i=a}}function c(e,t,i,n,r,o){var a,s;a=i(t[0],e),s=n(e[a],t);for(var l=!1;!l;){for(l=!0;;){if(a===e.length-1&&(a=0),r(t[s],e[a],e[a+1]))break;++a}for(;;){if(0===s&&(s=t.length-1),o(e[a],t[s],t[s-1]))break;--s,l=!1}}return{t1:a,t2:s}}function h(e,t){var i=f(t,e);return{t1:i.t2,t2:i.t1}}function f(e,t){return c(e,t,u,d,r,o)}function p(e,t){return c(e,t,d,d,o,o)}function g(e,t){return c(e,t,u,u,r,r)}function m(e,t){for(var i=[],n=1,r=t.length;n<r;++n){var o=E.Rectangle.lineIntersection(e.x1,e.y1,e.x2,e.y2,t[n-1].x,t[n-1].y,t[n].x,t[n].y);o&&i.push(o)}return i}function v(e,t){for(var i=e.length-1,r=t.length-1,o=new M,a=0;a<i;++a)for(var s=0;s<r;++s){var l=e[0==a?i-1:a-1],u=e[a],d=e[a+1],c=t[0==s?r-1:s-1],h=t[s],f=t[s+1],p=n(l,u,h),g=n(u,c,h),m=n(u,h,f),v=n(c,h,u),y=n(h,l,u),b=n(h,u,d);p>=0&&g>=0&&m<0&&v>=0&&y>=0&&b<0?o.ll=new A(a,s):p<=0&&g<=0&&m>0&&v<=0&&y<=0&&b>0?o.rr=new A(a,s):p<=0&&g>0&&m<=0&&v>=0&&y<0&&b>=0?o.rl=new A(a,s):p>=0&&g<0&&m>=0&&v<=0&&y>0&&b<=0&&(o.lr=new A(a,s))}return o}function y(e,t){for(var i=1,n=t.length;i<n;++i)if(o(t[i-1],t[i],e))return!1;return!0}function b(e,t){return!e.every(function(e){return!y(e,t)})}function x(e,t){if(b(e,t))return!0;if(b(t,e))return!0;for(var i=1,n=e.length;i<n;++i){var r=e[i],o=e[i-1];if(m(new P(o.x,o.y,r.x,r.y),t).length>0)return!0}return!1}var w=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var E=e("./rectangle"),_=function(){function e(){}return e}();i.Point=_;var P=function(){function e(e,t,i,n){this.x1=e,this.y1=t,this.x2=i,this.y2=n}return e}();i.LineSegment=P;var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t}(_);i.PolyPoint=k,i.isLeft=n,i.ConvexHull=a,i.clockwiseRadialSweep=s,i.tangent_PolyPolyC=c,i.LRtangent_PolyPolyC=h,i.RLtangent_PolyPolyC=f,i.LLtangent_PolyPolyC=p,i.RRtangent_PolyPolyC=g;var A=function(){function e(e,t){this.t1=e,this.t2=t}return e}();i.BiTangent=A;var M=function(){function e(){}return e}();i.BiTangents=M;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t}(_);i.TVGPoint=S;var T=function(){function e(e,t,i,n){this.id=e,this.polyid=t,this.polyvertid=i,this.p=n,n.vv=this}return e}();i.VisibilityVertex=T;var L=function(){function e(e,t){this.source=e,this.target=t}return e.prototype.length=function(){var e=this.source.p.x-this.target.p.x,t=this.source.p.y-this.target.p.y;return Math.sqrt(e*e+t*t)},e}();i.VisibilityEdge=L;var N=function(){function e(e,t){if(this.P=e,this.V=[],this.E=[],t)this.V=t.V.slice(0),this.E=t.E.slice(0);else{for(var i=e.length,n=0;n<i;n++){for(var r=e[n],o=0;o<r.length;++o){var a=r[o],s=new T(this.V.length,n,o,a);this.V.push(s),o>0&&this.E.push(new L(r[o-1].vv,s))}r.length>1&&this.E.push(new L(r[0].vv,r[r.length-1].vv))}for(var n=0;n<i-1;n++)for(var l=e[n],o=n+1;o<i;o++){var u=e[o],d=v(l,u);for(var c in d){var h=d[c],f=l[h.t1],p=u[h.t2];this.addEdgeIfVisible(f,p,n,o)}}}}return e.prototype.addEdgeIfVisible=function(e,t,i,n){this.intersectsPolys(new P(e.x,e.y,t.x,t.y),i,n)||this.E.push(new L(e.vv,t.vv))},e.prototype.addPoint=function(e,t){var i=this.P.length;this.V.push(new T(this.V.length,i,0,e));for(var n=0;n<i;++n)if(n!==t){var r=this.P[n],o=l(e,r);this.addEdgeIfVisible(e,r[o.ltan],t,n),this.addEdgeIfVisible(e,r[o.rtan],t,n)}return e.vv},e.prototype.intersectsPolys=function(e,t,i){for(var n=0,r=this.P.length;n<r;++n)if(n!=t&&n!=i&&m(e,this.P[n]).length>0)return!0;return!1},e}();i.TangentVisibilityGraph=N,i.tangents=v,i.polysOverlap=x},{"./rectangle":22}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./rectangle"),r=e("./vpsc"),o=e("./shortestpaths"),a=function(){function e(e,t,i){this.id=e,this.rect=t,this.children=i,this.leaf="undefined"==typeof i||0===i.length}return e}();i.NodeWrapper=a;var s=function(){function e(e,t,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null),this.id=e,this.x=t,this.y=i,this.node=n,this.line=r}return e}();i.Vert=s;var l=function(){function e(t,i){this.s=t,this.t=i;var n=e.findMatch(t,i),r=i.slice(0).reverse(),o=e.findMatch(t,r);n.length>=o.length?(this.length=n.length,this.si=n.si,this.ti=n.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=i.length-o.ti-o.length,this.reversed=!0)}return e.findMatch=function(e,t){for(var i=e.length,n=t.length,r={length:0,si:-1,ti:-1},o=new Array(i),a=0;a<i;a++){o[a]=new Array(n);for(var s=0;s<n;s++)if(e[a]===t[s]){var l=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;l>r.length&&(r.length=l,r.si=a-l+1,r.ti=s-l+1)}else o[a][s]=0}return r},e.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},e}();i.LongestCommonSubsequence=l;var u=function(){function e(e,t,i){void 0===i&&(i=12);var r=this;this.originalnodes=e,this.groupPadding=i,this.leaves=null,this.nodes=e.map(function(e,i){return new a(i,t.getBounds(e),t.getChildren(e))}),this.leaves=this.nodes.filter(function(e){return e.leaf}),this.groups=this.nodes.filter(function(e){return!e.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(e){return e.children.forEach(function(t){return r.nodes[t].parent=e})}),this.root={children:[]},this.nodes.forEach(function(e){"undefined"==typeof e.parent&&(e.parent=r.root,r.root.children.push(e.id)),e.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(e,t){return r.getDepth(e)-r.getDepth(t)});var o=this.backToFront.slice(0).reverse().filter(function(e){return!e.leaf});o.forEach(function(e){var t=n.Rectangle.empty();e.children.forEach(function(e){return t=t.union(r.nodes[e].rect)}),e.rect=t.inflate(r.groupPadding)});var l=this.midPoints(this.cols.map(function(e){return e.pos})),u=this.midPoints(this.rows.map(function(e){return e.pos})),d=l[0],c=l[l.length-1],h=u[0],f=u[u.length-1],p=this.rows.map(function(e){return{x1:d,x2:c,y1:e.pos,y2:e.pos}}).concat(u.map(function(e){return{x1:d,x2:c,y1:e,y2:e}})),g=this.cols.map(function(e){return{x1:e.pos,x2:e.pos,y1:h,y2:f}}).concat(l.map(function(e){return{x1:e,x2:e,y1:h,y2:f}})),m=p.concat(g);m.forEach(function(e){return e.verts=[]}),this.verts=[],this.edges=[],p.forEach(function(e){return g.forEach(function(t){var i=new s(r.verts.length,t.x1,e.y1);e.verts.push(i),t.verts.push(i),r.verts.push(i);for(var n=r.backToFront.length;n-- >0;){var o=r.backToFront[n],a=o.rect,l=Math.abs(i.x-a.cx()),u=Math.abs(i.y-a.cy());if(l<a.width()/2&&u<a.height()/2){i.node=o;break}}})}),m.forEach(function(e,t){r.nodes.forEach(function(t,i){t.rect.lineIntersections(e.x1,e.y1,e.x2,e.y2).forEach(function(i,n){var o=new s(r.verts.length,i.x,i.y,t,e);r.verts.push(o),e.verts.push(o),t.ports.push(o)})});var i=Math.abs(e.y1-e.y2)<.1,n=function(e,t){return i?t.x-e.x:t.y-e.y};e.verts.sort(n);for(var o=1;o<e.verts.length;o++){var a=e.verts[o-1],l=e.verts[o];a.node&&a.node===l.node&&a.node.leaf||r.edges.push({source:a.id,target:l.id,length:Math.abs(n(a,l))})}})}return e.prototype.avg=function(e){return e.reduce(function(e,t){return e+t})/e.length},e.prototype.getGridLines=function(e){for(var t=[],i=this.leaves.slice(0,this.leaves.length);i.length>0;){var n=i.filter(function(t){return t.rect["overlap"+e.toUpperCase()](i[0].rect)}),r={nodes:n,pos:this.avg(n.map(function(t){return t.rect["c"+e]()}))};t.push(r),r.nodes.forEach(function(e){return i.splice(i.indexOf(e),1)})}return t.sort(function(e,t){return e.pos-t.pos}),t},e.prototype.getDepth=function(e){for(var t=0;e.parent!==this.root;)t++,e=e.parent;return t},e.prototype.midPoints=function(e){for(var t=e[1]-e[0],i=[e[0]-t/2],n=1;n<e.length;n++)i.push((e[n]+e[n-1])/2);return i.push(e[e.length-1]+t/2),i},e.prototype.findLineage=function(e){var t=[e];do e=e.parent,t.push(e);while(e!==this.root);return t.reverse()},e.prototype.findAncestorPathBetween=function(e,t){for(var i=this.findLineage(e),n=this.findLineage(t),r=0;i[r]===n[r];)r++;return{commonAncestor:i[r-1],lineages:i.slice(r).concat(n.slice(r))}},e.prototype.siblingObstacles=function(e,t){var i=this,n=this.findAncestorPathBetween(e,t),r={};n.lineages.forEach(function(e){return r[e.id]={}});var o=n.commonAncestor.children.filter(function(e){return!(e in r)});return n.lineages.filter(function(e){return e.parent!==n.commonAncestor}).forEach(function(e){return o=o.concat(e.parent.children.filter(function(t){return t!==e.id}))}),o.map(function(e){return i.nodes[e]})},e.getSegmentSets=function(e,t,i){for(var n=[],r=0;r<e.length;r++)for(var o=e[r],a=0;a<o.length;a++){var s=o[a];s.edgeid=r,s.i=a;var l=s[1][t]-s[0][t];Math.abs(l)<.1&&n.push(s)}n.sort(function(e,i){return e[0][t]-i[0][t]});for(var u=[],d=null,c=0;c<n.length;c++){var s=n[c];(!d||Math.abs(s[0][t]-d.pos)>.1)&&(d={pos:s[0][t],segments:[]},u.push(d)),d.segments.push(s)}return u},e.nudgeSegs=function(e,t,i,n,o,a){var s=n.length;if(!(s<=1)){for(var l=n.map(function(t){return new r.Variable(t[0][e])}),u=[],d=0;d<s;d++)for(var c=0;c<s;c++)if(d!==c){var h=n[d],f=n[c],p=h.edgeid,g=f.edgeid,m=-1,v=-1;"x"==e?o(p,g)&&(h[0][t]<h[1][t]?(m=c,v=d):(m=d,v=c)):o(p,g)&&(h[0][t]<h[1][t]?(m=d,v=c):(m=c,v=d)),m>=0&&u.push(new r.Constraint(l[m],l[v],a))}var y=new r.Solver(l,u);y.solve(),l.forEach(function(t,r){var o=n[r],a=t.position();o[0][e]=o[1][e]=a;var s=i[o.edgeid];o.i>0&&(s[o.i-1][1][e]=a),o.i<s.length-1&&(s[o.i+1][0][e]=a)})}},e.nudgeSegments=function(t,i,n,r,o){for(var a=e.getSegmentSets(t,i,n),s=0;s<a.length;s++){for(var l=a[s],u=[],d=0;d<l.segments.length;d++){var c=l.segments[d];u.push({type:0,s:c,pos:Math.min(c[0][n],c[1][n])}),u.push({type:1,s:c,pos:Math.max(c[0][n],c[1][n])})}u.sort(function(e,t){return e.pos-t.pos+e.type-t.type});var h=[],f=0;u.forEach(function(a){0===a.type?(h.push(a.s),f++):f--,0==f&&(e.nudgeSegs(i,n,t,h,r,o),h=[])})}},e.prototype.routeEdges=function(t,i,n,r){var o=this,a=t.map(function(e){return o.route(n(e),r(e))}),s=e.orderEdges(a),l=a.map(function(t){return e.makeSegments(t)});return e.nudgeSegments(l,"x","y",s,i),e.nudgeSegments(l,"y","x",s,i),e.unreverseEdges(l,a),l},e.unreverseEdges=function(e,t){e.forEach(function(e,i){var n=t[i];n.reversed&&(e.reverse(),e.forEach(function(e){e.reverse()}))})},e.angleBetween2Lines=function(e,t){var i=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=i-n;return(r>Math.PI||r<-Math.PI)&&(r=n-i),r},e.isLeft=function(e,t,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)<=0},e.getOrder=function(e){for(var t={},i=0;i<e.length;i++){var n=e[i];"undefined"==typeof t[n.l]&&(t[n.l]={}),t[n.l][n.r]=!0}return function(e,i){return"undefined"!=typeof t[e]&&t[e][i]}},e.orderEdges=function(t){for(var i=[],n=0;n<t.length-1;n++)for(var r=n+1;r<t.length;r++){var o,a,s,u=t[n],d=t[r],c=new l(u,d);0!==c.length&&(c.reversed&&(d.reverse(),d.reversed=!0,c=new l(u,d)),(c.si<=0||c.ti<=0)&&(c.si+c.length>=u.length||c.ti+c.length>=d.length)?i.push({l:n,r:r}):(c.si+c.length>=u.length||c.ti+c.length>=d.length?(o=u[c.si+1],s=u[c.si-1],a=d[c.ti-1]):(o=u[c.si+c.length-2],a=u[c.si+c.length],s=d[c.ti+c.length]),e.isLeft(o,a,s)?i.push({l:r,r:n}):i.push({l:n,r:r})))}return e.getOrder(i)},e.makeSegments=function(e){function t(e){return{x:e.x,y:e.y}}for(var i=function(e,t,i){return Math.abs((t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x))<.001},n=[],r=t(e[0]),o=1;o<e.length;o++){var a=t(e[o]),s=o<e.length-1?e[o+1]:null;s&&i(r,a,s)||(n.push([r,a]),r=a)}return n},e.prototype.route=function(e,t){var i=this,n=this.nodes[e],r=this.nodes[t];this.obstacles=this.siblingObstacles(n,r);var a={};this.obstacles.forEach(function(e){return a[e.id]=e}),this.passableEdges=this.edges.filter(function(e){var t=i.verts[e.source],n=i.verts[e.target];return!(t.node&&t.node.id in a||n.node&&n.node.id in a)});for(var s=1;s<n.ports.length;s++){var l=n.ports[0].id,u=n.ports[s].id;this.passableEdges.push({source:l,target:u,length:0})}for(var s=1;s<r.ports.length;s++){var l=r.ports[0].id,u=r.ports[s].id;this.passableEdges.push({source:l,target:u,length:0})}var d=function(e){return e.source},c=function(e){return e.target},h=function(e){return e.length},f=new o.Calculator(this.verts.length,this.passableEdges,d,c,h),p=function(e,t,o){var a=i.verts[e],s=i.verts[t],l=i.verts[o],u=Math.abs(l.x-a.x),d=Math.abs(l.y-a.y);return a.node===n&&a.node===s.node||s.node===r&&s.node===l.node?0:u>1&&d>1?1e3:0},g=f.PathFromNodeToNodeWithPrevCost(n.ports[0].id,r.ports[0].id,p),m=g.reverse().map(function(e){return i.verts[e]});return m.push(this.nodes[r.id].ports[0]),m.filter(function(e,t){return!(t<m.length-1&&m[t+1].node===n&&e.node===n||t>0&&e.node===r&&m[t-1].node===r)})},e.getRoutePath=function(t,i,n,r){var o={routepath:"M "+t[0][0].x+" "+t[0][0].y+" ",arrowpath:""};if(t.length>1)for(var a=0;a<t.length;a++){var s=t[a],l=s[1].x,u=s[1].y,d=l-s[0].x,c=u-s[0].y;if(a<t.length-1){Math.abs(d)>0?l-=d/Math.abs(d)*i:u-=c/Math.abs(c)*i,o.routepath+="L "+l+" "+u+" ";var h=t[a+1],f=h[0].x,p=h[0].y,g=h[1].x,m=h[1].y;d=g-f,c=m-p;var v,y,b=e.angleBetween2Lines(s,h)<0?1:0;Math.abs(d)>0?(v=f+d/Math.abs(d)*i,y=p):(v=f,y=p+c/Math.abs(c)*i);var x=Math.abs(v-l),w=Math.abs(y-u);o.routepath+="A "+x+" "+w+" 0 0 "+b+" "+v+" "+y+" "}else{var E,_,P=[l,u];Math.abs(d)>0?(l-=d/Math.abs(d)*r,E=[l,u+n],_=[l,u-n]):(u-=c/Math.abs(c)*r,E=[l+n,u],_=[l-n,u]),o.routepath+="L "+l+" "+u+" ",r>0&&(o.arrowpath="M "+P[0]+" "+P[1]+" L "+E[0]+" "+E[1]+" L "+_[0]+" "+_[1])}}else{var E,_,s=t[0],l=s[1].x,u=s[1].y,d=l-s[0].x,c=u-s[0].y,P=[l,u];Math.abs(d)>0?(l-=d/Math.abs(d)*r,E=[l,u+n],_=[l,u-n]):(u-=c/Math.abs(c)*r,E=[l+n,u],_=[l-n,u]),o.routepath+="L "+l+" "+u+" ",r>0&&(o.arrowpath="M "+P[0]+" "+P[1]+" L "+E[0]+" "+E[1]+" L "+_[0]+" "+_[1])}return o},e}();i.GridRouter=u},{"./rectangle":22,"./shortestpaths":23,"./vpsc":24}],15:[function(e,t,i){"use strict";function n(e,t,i,n,r){function a(e){function t(e){var t=Number.MAX_VALUE,i=Number.MAX_VALUE,r=0,o=0;e.array.forEach(function(e){var a="undefined"!=typeof e.width?e.width:n,s="undefined"!=typeof e.height?e.height:n;a/=2,s/=2,r=Math.max(e.x+a,r),t=Math.min(e.x-a,t),o=Math.max(e.y+s,o),i=Math.min(e.y-s,i)}),e.width=r-t,e.height=o-i}e.forEach(function(e){t(e)})}function s(e){e.forEach(function(e){var t={x:0,y:0};e.array.forEach(function(e){t.x+=e.x,t.y+=e.y}),t.x/=e.array.length,t.y/=e.array.length;var i={x:t.x-e.width/2,y:t.y-e.height/2},n={x:e.x-i.x+g/2-v/2,y:e.y-i.y+m/2-y/2};e.array.forEach(function(e){e.x+=n.x,e.y+=n.y})})}function l(e,t){var i=Number.POSITIVE_INFINITY,n=0;e.sort(function(e,t){return t.height-e.height}),b=e.reduce(function(e,t){return e.width<t.width?e.width:t.width});for(var r=g=b,a=m=c(e),s=0,l=Number.MAX_VALUE,d=Number.MAX_VALUE,h=-1,f=Number.MAX_VALUE,p=Number.MAX_VALUE;f>b||p>o.FLOAT_EPSILON;){if(1!=h)var g=a-(a-r)/o.GOLDEN_SECTION,l=u(e,g);if(0!=h)var m=r+(a-r)/o.GOLDEN_SECTION,d=u(e,m);if(f=Math.abs(g-m),p=Math.abs(l-d),l<i&&(i=l,n=g),d<i&&(i=d,n=m),l>d?(r=g,g=m,l=d,h=1):(a=m,m=g,d=l,h=0),s++>100)break}u(e,n)}function u(e,t){w=[],v=0,y=0,x=p;for(var i=0;i<e.length;i++){var n=e[i];d(n,t)}return Math.abs(h()-r)}function d(e,t){for(var i=void 0,n=0;n<w.length;n++)if(w[n].space_left>=e.height&&w[n].x+w[n].width+e.width+o.PADDING-t<=o.FLOAT_EPSILON){i=w[n];break}w.push(e),void 0!==i?(e.x=i.x+i.width+o.PADDING,e.y=i.bottom,e.space_left=e.height,e.bottom=e.y,i.space_left-=e.height+o.PADDING,i.bottom+=e.height+o.PADDING):(e.y=x,x+=e.height+o.PADDING,e.x=f,e.bottom=e.y,e.space_left=e.height),e.y+e.height-y>-o.FLOAT_EPSILON&&(y=e.y+e.height-p),e.x+e.width-v>-o.FLOAT_EPSILON&&(v=e.x+e.width-f)}function c(e){var t=0;return e.forEach(function(e){return t+=e.width+o.PADDING}),t}function h(){return v/y}void 0===r&&(r=1);var f=0,p=0,g=t,m=i,r="undefined"!=typeof r?r:1,n="undefined"!=typeof n?n:0,v=0,y=0,b=0,x=0,w=[];0!=e.length&&(a(e),l(e,r),s(e))}function r(e,t){function i(e,t){if(void 0===n[e.index]){t&&(a++,o.push({array:[]})),n[e.index]=a,o[a-1].array.push(e);var s=r[e.index];if(s)for(var l=0;l<s.length;l++)i(s[l],!1)}}for(var n={},r={},o=[],a=0,s=0;s<t.length;s++){var l=t[s],u=l.source,d=l.target;r[u.index]?r[u.index].push(d):r[u.index]=[d],r[d.index]?r[d.index].push(u):r[d.index]=[u]}for(var s=0;s<e.length;s++){var c=e[s];n[c.index]||i(c,!0)}return o}Object.defineProperty(i,"__esModule",{value:!0});var o={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};i.applyPacking=n,i.separateGraphs=r},{}],16:[function(e,t,i){"use strict";function n(e){return"undefined"!=typeof e.leaves||"undefined"!=typeof e.groups}Object.defineProperty(i,"__esModule",{value:!0});var r,o=e("./powergraph"),a=e("./linklengths"),s=e("./descent"),l=e("./rectangle"),u=e("./shortestpaths"),d=e("./geom"),c=e("./handledisconnected");!function(e){e[e.start=0]="start",e[e.tick=1]="tick",e[e.end=2]="end"}(r=i.EventType||(i.EventType={}));var h=function(){function e(){var t=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:e.getSourceIndex,getTargetIndex:e.getTargetIndex,setLength:e.setLinkLength,getType:function(e){return"function"==typeof t._linkType?t._linkType(e):0}}}return e.prototype.on=function(e,t){return this.event||(this.event={}),"string"==typeof e?this.event[r[e]]=t:this.event[e]=t,this},e.prototype.trigger=function(e){this.event&&"undefined"!=typeof this.event[e.type]&&this.event[e.type](e)},e.prototype.kick=function(){for(;!this.tick(););},e.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:r.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var e,t,i=this._nodes.length;this._links.length;for(this._descent.locks.clear(),t=0;t<i;++t)if(e=this._nodes[t],e.fixed){"undefined"!=typeof e.px&&"undefined"!=typeof e.py||(e.px=e.x,e.py=e.y);var n=[e.px,e.py];this._descent.locks.add(t,n)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:"undefined"!=typeof this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:r.tick,alpha:this._alpha,stress:this._lastStress}),!1},e.prototype.updateNodePositions=function(){for(var e,t=this._descent.x[0],i=this._descent.x[1],n=this._nodes.length;n--;)e=this._nodes[n],e.x=t[n],e.y=i[n]},e.prototype.nodes=function(e){if(!e){if(0===this._nodes.length&&this._links.length>0){var t=0;this._links.forEach(function(e){t=Math.max(t,e.source,e.target)}),this._nodes=new Array((++t));for(var i=0;i<t;++i)this._nodes[i]={}}return this._nodes}return this._nodes=e,this},e.prototype.groups=function(e){var t=this;return e?(this._groups=e,this._rootGroup={},this._groups.forEach(function(e){"undefined"==typeof e.padding&&(e.padding=1),"undefined"!=typeof e.leaves&&e.leaves.forEach(function(i,n){"number"==typeof i&&((e.leaves[n]=t._nodes[i]).parent=e)}),"undefined"!=typeof e.groups&&e.groups.forEach(function(i,n){"number"==typeof i&&((e.groups[n]=t._groups[i]).parent=e)})}),this._rootGroup.leaves=this._nodes.filter(function(e){return"undefined"==typeof e.parent}),this._rootGroup.groups=this._groups.filter(function(e){return"undefined"==typeof e.parent}),this):this._groups},e.prototype.powerGraphGroups=function(e){var t=o.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(t.groups),e(t),this},e.prototype.avoidOverlaps=function(e){return arguments.length?(this._avoidOverlaps=e,this):this._avoidOverlaps},e.prototype.handleDisconnected=function(e){return arguments.length?(this._handleDisconnected=e,this):this._handleDisconnected},e.prototype.flowLayout=function(e,t){return arguments.length||(e="y"),this._directedLinkConstraints={axis:e,getMinSeparation:"number"==typeof t?function(){return t}:t},this},e.prototype.links=function(e){return arguments.length?(this._links=e,this):this._links},e.prototype.constraints=function(e){return arguments.length?(this._constraints=e,this):this._constraints},e.prototype.distanceMatrix=function(e){return arguments.length?(this._distanceMatrix=e,this):this._distanceMatrix},e.prototype.size=function(e){return e?(this._canvasSize=e,this):this._canvasSize},e.prototype.defaultNodeSize=function(e){return e?(this._defaultNodeSize=e,this):this._defaultNodeSize},e.prototype.groupCompactness=function(e){return e?(this._groupCompactness=e,this):this._groupCompactness},e.prototype.linkDistance=function(e){return e?(this._linkDistance="function"==typeof e?e:+e,this._linkLengthCalculator=null,this):this._linkDistance},e.prototype.linkType=function(e){return this._linkType=e,this},e.prototype.convergenceThreshold=function(e){return e?(this._threshold="function"==typeof e?e:+e,this):this._threshold},e.prototype.alpha=function(e){return arguments.length?(e=+e,this._alpha?e>0?this._alpha=e:this._alpha=0:e>0&&(this._running||(this._running=!0,this.trigger({type:r.start,alpha:this._alpha=e}),this.kick())),this):this._alpha},e.prototype.getLinkLength=function(e){return"function"==typeof this._linkDistance?+this._linkDistance(e):this._linkDistance},e.setLinkLength=function(e,t){e.length=t},e.prototype.getLinkType=function(e){return"function"==typeof this._linkType?this._linkType(e):0},e.prototype.symmetricDiffLinkLengths=function(e,t){var i=this;return void 0===t&&(t=1),this.linkDistance(function(t){return e*t.length}),this._linkLengthCalculator=function(){return a.symmetricDiffLinkLengths(i._links,i.linkAccessor,t)},this},e.prototype.jaccardLinkLengths=function(e,t){var i=this;return void 0===t&&(t=1),this.linkDistance(function(t){return e*t.length}),this._linkLengthCalculator=function(){return a.jaccardLinkLengths(i._links,i.linkAccessor,t)},this},e.prototype.start=function(t,i,n,r,o){var d=this;void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=!0);var c,h=this.nodes().length,f=h+2*this._groups.length,p=(this._links.length,this._canvasSize[0]),g=this._canvasSize[1],m=new Array(f),v=new Array(f),y=null,b=this._avoidOverlaps;this._nodes.forEach(function(e,t){e.index=t,"undefined"==typeof e.x&&(e.x=p/2,e.y=g/2),m[t]=e.x,v[t]=e.y}),this._linkLengthCalculator&&this._linkLengthCalculator();var x;this._distanceMatrix?x=this._distanceMatrix:(x=new u.Calculator(f,this._links,e.getSourceIndex,e.getTargetIndex,function(e){return d.getLinkLength(e)}).DistanceMatrix(),y=s.Descent.createSquareMatrix(f,function(){return 2}),this._links.forEach(function(e){"number"==typeof e.source&&(e.source=d._nodes[e.source]),"number"==typeof e.target&&(e.target=d._nodes[e.target])}),this._links.forEach(function(t){var i=e.getSourceIndex(t),n=e.getTargetIndex(t);y[i][n]=y[n][i]=t.weight||1}));var w=s.Descent.createSquareMatrix(f,function(e,t){return x[e][t]});if(this._rootGroup&&"undefined"!=typeof this._rootGroup.groups){var c=h,E=function(e,t,i,n){y[e][t]=y[t][e]=i,w[e][t]=w[t][e]=n};this._groups.forEach(function(e){E(c,c+1,d._groupCompactness,.1),m[c]=0,v[c++]=0,m[c]=0,v[c++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var _=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,_=_.concat(a.generateDirectedEdgeConstraints(h,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new s.Descent([m,v],w),this._descent.locks.clear();for(var c=0;c<h;++c){var P=this._nodes[c];if(P.fixed){P.px=P.x,P.py=P.y;var k=[P.x,P.y];this._descent.locks.add(c,k)}}if(this._descent.threshold=this._threshold,this.initialLayout(t,m,v),_.length>0&&(this._descent.project=new l.Projection(this._nodes,this._groups,this._rootGroup,_).projectFunctions()),this._descent.run(i),this.separateOverlappingComponents(p,g),this.avoidOverlaps(b),b&&(this._nodes.forEach(function(e,t){e.x=m[t],e.y=v[t]}),this._descent.project=new l.Projection(this._nodes,this._groups,this._rootGroup,_,(!0)).projectFunctions(),this._nodes.forEach(function(e,t){m[t]=e.x,v[t]=e.y})),this._descent.G=y,this._descent.run(n),r){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=h,this._descent.scaleSnapByMaxH=h!=f;var A=s.Descent.createSquareMatrix(f,function(e,t){return e>=h||t>=h?y[e][t]:0});this._descent.G=A,this._descent.run(r)}return this.updateNodePositions(),this.separateOverlappingComponents(p,g),o?this.resume():this},e.prototype.initialLayout=function(t,i,n){if(this._groups.length>0&&t>0){var r=this._nodes.length,o=this._links.map(function(e){return{source:e.source.index,target:e.target.index}}),a=this._nodes.map(function(e){return{index:e.index}});this._groups.forEach(function(e,t){a.push({index:e.index=r+t})}),this._groups.forEach(function(e,t){"undefined"!=typeof e.leaves&&e.leaves.forEach(function(t){return o.push({source:e.index,target:t.index})}),"undefined"!=typeof e.groups&&e.groups.forEach(function(t){return o.push({source:e.index,target:t.index})})}),(new e).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(t,0,0,0,!1),this._nodes.forEach(function(e){i[e.index]=a[e.index].x,n[e.index]=a[e.index].y})}else this._descent.run(t)},e.prototype.separateOverlappingComponents=function(e,t){var i=this;if(!this._distanceMatrix&&this._handleDisconnected){var n=this._descent.x[0],r=this._descent.x[1];this._nodes.forEach(function(e,t){e.x=n[t],e.y=r[t]});var o=c.separateGraphs(this._nodes,this._links);c.applyPacking(o,e,t,this._defaultNodeSize),this._nodes.forEach(function(e,t){i._descent.x[0][t]=e.x,i._descent.x[1][t]=e.y,e.bounds&&(e.bounds.setXCentre(e.x),e.bounds.setYCentre(e.y))})}},e.prototype.resume=function(){return this.alpha(.1)},e.prototype.stop=function(){return this.alpha(0)},e.prototype.prepareEdgeRouting=function(e){void 0===e&&(e=0),this._visibilityGraph=new d.TangentVisibilityGraph(this._nodes.map(function(t){return t.bounds.inflate(-e).vertices()}))},e.prototype.routeEdge=function(e,t,i){void 0===t&&(t=5);var n=[],r=new d.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:e.source.x,y:e.source.y},a={x:e.target.x,y:e.target.y},s=r.addPoint(o,e.source.index),c=r.addPoint(a,e.target.index);r.addEdgeIfVisible(o,a,e.source.index,e.target.index),"undefined"!=typeof i&&i(r);var h=function(e){return e.source.id},f=function(e){return e.target.id},p=function(e){return e.length()},g=new u.Calculator(r.V.length,r.E,h,f,p),m=g.PathFromNodeToNode(s.id,c.id);if(1===m.length||m.length===r.V.length){var v=l.makeEdgeBetween(e.source.innerBounds,e.target.innerBounds,t);n=[v.sourceIntersection,v.arrowStart]}else{for(var y=m.length-2,b=r.V[m[y]].p,x=r.V[m[0]].p,n=[e.source.innerBounds.rayIntersection(b.x,b.y)],w=y;w>=0;--w)n.push(r.V[m[w]].p);n.push(l.makeEdgeTo(x,e.target.innerBounds,t))}return n},e.getSourceIndex=function(e){return"number"==typeof e.source?e.source:e.source.index},e.getTargetIndex=function(e){return"number"==typeof e.target?e.target:e.target.index},e.linkId=function(t){return e.getSourceIndex(t)+"-"+e.getTargetIndex(t)},e.dragStart=function(t){n(t)?e.storeOffset(t,e.dragOrigin(t)):(e.stopNode(t),t.fixed|=2)},e.stopNode=function(e){e.px=e.x,e.py=e.y},e.storeOffset=function(t,i){"undefined"!=typeof t.leaves&&t.leaves.forEach(function(t){t.fixed|=2,e.stopNode(t),t._dragGroupOffsetX=t.x-i.x,t._dragGroupOffsetY=t.y-i.y}),"undefined"!=typeof t.groups&&t.groups.forEach(function(t){return e.storeOffset(t,i)})},e.dragOrigin=function(e){return n(e)?{x:e.bounds.cx(),y:e.bounds.cy()}:e},e.drag=function(t,i){n(t)?("undefined"!=typeof t.leaves&&t.leaves.forEach(function(e){t.bounds.setXCentre(i.x),t.bounds.setYCentre(i.y),e.px=e._dragGroupOffsetX+i.x,e.py=e._dragGroupOffsetY+i.y}),"undefined"!=typeof t.groups&&t.groups.forEach(function(t){return e.drag(t,i)})):(t.px=i.x,t.py=i.y)},e.dragEnd=function(t){n(t)?("undefined"!=typeof t.leaves&&t.leaves.forEach(function(t){e.dragEnd(t),delete t._dragGroupOffsetX,delete t._dragGroupOffsetY}),"undefined"!=typeof t.groups&&t.groups.forEach(e.dragEnd)):t.fixed&=-7},e.mouseOver=function(e){e.fixed|=4,e.px=e.x,e.py=e.y},e.mouseOut=function(e){e.fixed&=-5},e}();i.Layout=h},{"./descent":12,"./geom":13,"./handledisconnected":15,"./linklengths":18,"./powergraph":19,"./rectangle":22,"./shortestpaths":23}],17:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./shortestpaths"),r=e("./descent"),o=e("./rectangle"),a=e("./linklengths"),s=function(){function e(e,t){this.source=e,this.target=t}return e.prototype.actualLength=function(e){var t=this;return Math.sqrt(e.reduce(function(e,i){var n=i[t.target]-i[t.source];return e+n*n},0))},e}();i.Link3D=s;var l=function(){function e(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.x=e,this.y=t,this.z=i}return e}();i.Node3D=l;var u=function(){function e(t,i,n){void 0===n&&(n=1);var r=this;this.nodes=t,this.links=i,this.idealLinkLength=n,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(e.k);for(var o=0;o<e.k;++o)this.result[o]=new Array(t.length);t.forEach(function(t,i){for(var n=0,o=e.dims;n<o.length;n++){var a=o[n];"undefined"==typeof t[a]&&(t[a]=Math.random())}r.result[0][i]=t.x,r.result[1][i]=t.y,r.result[2][i]=t.z})}return e.prototype.linkLength=function(e){return e.actualLength(this.result)},e.prototype.start=function(e){var t=this;void 0===e&&(e=100);var i=this.nodes.length,s=new d;this.useJaccardLinkLengths&&a.jaccardLinkLengths(this.links,s,1.5),this.links.forEach(function(e){return e.length*=t.idealLinkLength});var l=new n.Calculator(i,this.links,function(e){return e.source},function(e){return e.target},function(e){return e.length}).DistanceMatrix(),u=r.Descent.createSquareMatrix(i,function(e,t){return l[e][t]}),c=r.Descent.createSquareMatrix(i,function(){return 2});this.links.forEach(function(e){var t=e.source,i=e.target;return c[t][i]=c[i][t]=1}),this.descent=new r.Descent(this.result,u),this.descent.threshold=.001,this.descent.G=c,this.constraints&&(this.descent.project=new o.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var h=0;h<this.nodes.length;h++){var f=this.nodes[h];f.fixed&&this.descent.locks.add(h,[f.x,f.y,f.z])}return this.descent.run(e),this},e.prototype.tick=function(){this.descent.locks.clear();for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];t.fixed&&this.descent.locks.add(e,[t.x,t.y,t.z])}return this.descent.rungeKutta()},e.dims=["x","y","z"],e.k=e.dims.length,e}();i.Layout3D=u;var d=function(){function e(){}return e.prototype.getSourceIndex=function(e){return e.source},e.prototype.getTargetIndex=function(e){return e.target},e.prototype.getLength=function(e){return e.length},e.prototype.setLength=function(e,t){e.length=t},e}()},{"./descent":12,"./linklengths":18,"./rectangle":22,"./shortestpaths":23}],18:[function(e,t,i){"use strict";
function n(e,t){var i={};for(var n in e)i[n]={};for(var n in t)i[n]={};return Object.keys(i).length}function r(e,t){var i=0;for(var n in e)"undefined"!=typeof t[n]&&++i;return i}function o(e,t){var i={},n=function(e,t){"undefined"==typeof i[e]&&(i[e]={}),i[e][t]={}};return e.forEach(function(e){var i=t.getSourceIndex(e),r=t.getTargetIndex(e);n(i,r),n(r,i)}),i}function a(e,t,i,n){var r=o(e,n);e.forEach(function(e){var o=r[n.getSourceIndex(e)],a=r[n.getTargetIndex(e)];n.setLength(e,1+t*i(o,a))})}function s(e,t,i){void 0===i&&(i=1),a(e,i,function(e,t){return Math.sqrt(n(e,t)-r(e,t))},t)}function l(e,t,i){void 0===i&&(i=1),a(e,i,function(e,t){return Math.min(Object.keys(e).length,Object.keys(t).length)<1.1?0:r(e,t)/n(e,t)},t)}function u(e,t,i,n){var r=d(e,t,n),o={};r.forEach(function(e,t){return e.forEach(function(e){return o[e]=t})});var a=[];return t.forEach(function(e){var t=n.getSourceIndex(e),r=n.getTargetIndex(e),s=o[t],l=o[r];s!==l&&a.push({axis:i,left:t,right:r,gap:n.getMinSeparation(e)})}),a}function d(e,t,i){function n(e){e.index=e.lowlink=o++,a.push(e),e.onStack=!0;for(var t=0,i=e.out;t<i.length;t++){var r=i[t];"undefined"==typeof r.index?(n(r),e.lowlink=Math.min(e.lowlink,r.lowlink)):r.onStack&&(e.lowlink=Math.min(e.lowlink,r.index))}if(e.lowlink===e.index){for(var l=[];a.length&&(r=a.pop(),r.onStack=!1,l.push(r),r!==e););s.push(l.map(function(e){return e.id}))}}for(var r=[],o=0,a=[],s=[],l=0;l<e;l++)r.push({id:l,out:[]});for(var u=0,d=t;u<d.length;u++){var c=d[u],h=r[i.getSourceIndex(c)],f=r[i.getTargetIndex(c)];h.out.push(f)}for(var p=0,g=r;p<g.length;p++){var m=g[p];"undefined"==typeof m.index&&n(m)}return s}Object.defineProperty(i,"__esModule",{value:!0}),i.symmetricDiffLinkLengths=s,i.jaccardLinkLengths=l,i.generateDirectedEdgeConstraints=u,i.stronglyConnectedComponents=d},{}],19:[function(e,t,i){"use strict";function n(e,t,i){e.forAll(function(e){if(e.isLeaf())t.leaves||(t.leaves=[]),t.leaves.push(e.id);else{var r=t;if(e.gid=i.length,!e.isIsland()||e.isPredefined()){if(r={id:e.gid},e.isPredefined())for(var o in e.definition)r[o]=e.definition[o];t.groups||(t.groups=[]),t.groups.push(e.gid),i.push(r)}n(e.children,r,i)}})}function r(e,t){var i={};for(var n in e)n in t&&(i[n]=e[n]);return i}function o(e,t,i,n){for(var r=e.length,o=new s(r,t,i,n);o.greedyMerge(););var a=[],l=o.getGroupHierarchy(a);return a.forEach(function(t){var i=function(i){var n=t[i];"number"==typeof n&&(t[i]=e[n])};i("source"),i("target")}),{groups:l,powerEdges:a}}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t,i){this.source=e,this.target=t,this.type=i}return e}();i.PowerEdge=a;var s=function(){function e(e,t,i,n){var r=this;if(this.linkAccessor=i,this.modules=new Array(e),this.roots=[],n)this.initModulesFromGroup(n);else{this.roots.push(new u);for(var o=0;o<e;++o)this.roots[0].add(this.modules[o]=new l(o))}this.R=t.length,t.forEach(function(e){var t=r.modules[i.getSourceIndex(e)],n=r.modules[i.getTargetIndex(e)],o=i.getType(e);t.outgoing.add(o,n),n.incoming.add(o,t)})}return e.prototype.initModulesFromGroup=function(e){var t=new u;this.roots.push(t);for(var i=0;i<e.leaves.length;++i){var n=e.leaves[i],r=new l(n.id);this.modules[n.id]=r,t.add(r)}if(e.groups)for(var o=0;o<e.groups.length;++o){var a=e.groups[o],s={};for(var c in a)"leaves"!==c&&"groups"!==c&&a.hasOwnProperty(c)&&(s[c]=a[c]);t.add(new l(-1-o,new d,new d,this.initModulesFromGroup(a),s))}return t},e.prototype.merge=function(e,t,i){void 0===i&&(i=0);var n=e.incoming.intersection(t.incoming),r=e.outgoing.intersection(t.outgoing),o=new u;o.add(e),o.add(t);var a=new l(this.modules.length,r,n,o);this.modules.push(a);var s=function(i,n,r){i.forAll(function(i,o){i.forAll(function(i){var s=i[n];s.add(o,a),s.remove(o,e),s.remove(o,t),e[r].remove(o,i),t[r].remove(o,i)})})};return s(r,"incoming","outgoing"),s(n,"outgoing","incoming"),this.R-=n.count()+r.count(),this.roots[i].remove(e),this.roots[i].remove(t),this.roots[i].add(a),a},e.prototype.rootMerges=function(e){void 0===e&&(e=0);for(var t=this.roots[e].modules(),i=t.length,n=new Array(i*(i-1)),r=0,o=0,a=i-1;o<a;++o)for(var s=o+1;s<i;++s){var l=t[o],u=t[s];n[r]={id:r,nEdges:this.nEdges(l,u),a:l,b:u},r++}return n},e.prototype.greedyMerge=function(){for(var e=0;e<this.roots.length;++e)if(!(this.roots[e].modules().length<2)){var t=this.rootMerges(e).sort(function(e,t){return e.nEdges==t.nEdges?e.id-t.id:e.nEdges-t.nEdges}),i=t[0];if(!(i.nEdges>=this.R))return this.merge(i.a,i.b,e),!0}},e.prototype.nEdges=function(e,t){var i=e.incoming.intersection(t.incoming),n=e.outgoing.intersection(t.outgoing);return this.R-i.count()-n.count()},e.prototype.getGroupHierarchy=function(e){var t=this,i=[],r={};n(this.roots[0],r,i);var o=this.allEdges();return o.forEach(function(n){var r=t.modules[n.source],o=t.modules[n.target];e.push(new a("undefined"==typeof r.gid?n.source:i[r.gid],"undefined"==typeof o.gid?n.target:i[o.gid],n.type))}),i},e.prototype.allEdges=function(){var t=[];return e.getEdges(this.roots[0],t),t},e.getEdges=function(t,i){t.forAll(function(t){t.getEdges(i),e.getEdges(t.children,i)})},e}();i.Configuration=s;var l=function(){function e(e,t,i,n,r){void 0===t&&(t=new d),void 0===i&&(i=new d),void 0===n&&(n=new u),this.id=e,this.outgoing=t,this.incoming=i,this.children=n,this.definition=r}return e.prototype.getEdges=function(e){var t=this;this.outgoing.forAll(function(i,n){i.forAll(function(i){e.push(new a(t.id,i.id,n))})})},e.prototype.isLeaf=function(){return 0===this.children.count()},e.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},e.prototype.isPredefined=function(){return"undefined"!=typeof this.definition},e}();i.Module=l;var u=function(){function e(){this.table={}}return e.prototype.count=function(){return Object.keys(this.table).length},e.prototype.intersection=function(t){var i=new e;return i.table=r(this.table,t.table),i},e.prototype.intersectionCount=function(e){return this.intersection(e).count()},e.prototype.contains=function(e){return e in this.table},e.prototype.add=function(e){this.table[e.id]=e},e.prototype.remove=function(e){delete this.table[e.id]},e.prototype.forAll=function(e){for(var t in this.table)e(this.table[t])},e.prototype.modules=function(){var e=[];return this.forAll(function(t){t.isPredefined()||e.push(t)}),e},e}();i.ModuleSet=u;var d=function(){function e(){this.sets={},this.n=0}return e.prototype.count=function(){return this.n},e.prototype.contains=function(e){var t=!1;return this.forAllModules(function(i){t||i.id!=e||(t=!0)}),t},e.prototype.add=function(e,t){var i=e in this.sets?this.sets[e]:this.sets[e]=new u;i.add(t),++this.n},e.prototype.remove=function(e,t){var i=this.sets[e];i.remove(t),0===i.count()&&delete this.sets[e],--this.n},e.prototype.forAll=function(e){for(var t in this.sets)e(this.sets[t],Number(t))},e.prototype.forAllModules=function(e){this.forAll(function(t,i){return t.forAll(e)})},e.prototype.intersection=function(t){var i=new e;return this.forAll(function(e,n){if(n in t.sets){var r=e.intersection(t.sets[n]),o=r.count();o>0&&(i.sets[n]=r,i.n+=o)}}),i},e}();i.LinkSets=d,i.getGroups=o},{}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e){this.elem=e,this.subheaps=[]}return e.prototype.toString=function(e){for(var t="",i=!1,n=0;n<this.subheaps.length;++n){var r=this.subheaps[n];r.elem?(i&&(t+=","),t+=r.toString(e),i=!0):i=!1}return""!==t&&(t="("+t+")"),(this.elem?e(this.elem):"")+t},e.prototype.forEach=function(e){this.empty()||(e(this.elem,this),this.subheaps.forEach(function(t){return t.forEach(e)}))},e.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(e,t){return e+t.count()},0)},e.prototype.min=function(){return this.elem},e.prototype.empty=function(){return null==this.elem},e.prototype.contains=function(e){if(this===e)return!0;for(var t=0;t<this.subheaps.length;t++)if(this.subheaps[t].contains(e))return!0;return!1},e.prototype.isHeap=function(e){var t=this;return this.subheaps.every(function(i){return e(t.elem,i.elem)&&i.isHeap(e)})},e.prototype.insert=function(t,i){return this.merge(new e(t),i)},e.prototype.merge=function(e,t){return this.empty()?e:e.empty()?this:t(this.elem,e.elem)?(this.subheaps.push(e),this):(e.subheaps.push(this),e)},e.prototype.removeMin=function(e){return this.empty()?null:this.mergePairs(e)},e.prototype.mergePairs=function(t){if(0==this.subheaps.length)return new e(null);if(1==this.subheaps.length)return this.subheaps[0];var i=this.subheaps.pop().merge(this.subheaps.pop(),t),n=this.mergePairs(t);return i.merge(n,t)},e.prototype.decreaseKey=function(t,i,n,r){var o=t.removeMin(r);t.elem=o.elem,t.subheaps=o.subheaps,null!==n&&null!==o.elem&&n(t.elem,t);var a=new e(i);return null!==n&&n(i,a),this.merge(a,r)},e}();i.PairingHeap=n;var r=function(){function e(e){this.lessThan=e}return e.prototype.top=function(){return this.empty()?null:this.root.elem},e.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i,r,o=0;r=e[o];++o)i=new n(r),this.root=this.empty()?i:this.root.merge(i,this.lessThan);return i},e.prototype.empty=function(){return!this.root||!this.root.elem},e.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},e.prototype.forEach=function(e){this.root.forEach(e)},e.prototype.pop=function(){if(this.empty())return null;var e=this.root.min();return this.root=this.root.removeMin(this.lessThan),e},e.prototype.reduceKey=function(e,t,i){void 0===i&&(i=null),this.root=this.root.decreaseKey(e,t,i,this.lessThan)},e.prototype.toString=function(e){return this.root.toString(e)},e.prototype.count=function(){return this.root.count()},e}();i.PriorityQueue=r},{}],21:[function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(){this.findIter=function(e){for(var t=this._root,i=this.iterator();null!==t;){var n=this._comparator(e,t.data);if(0===n)return i._cursor=t,i;i._ancestors.push(t),t=t.get_child(n>0)}return null}}return e.prototype.clear=function(){this._root=null,this.size=0},e.prototype.find=function(e){for(var t=this._root;null!==t;){var i=this._comparator(e,t.data);if(0===i)return t.data;t=t.get_child(i>0)}return null},e.prototype.lowerBound=function(e){return this._bound(e,this._comparator)},e.prototype.upperBound=function(e){function t(e,t){return i(t,e)}var i=this._comparator;return this._bound(e,t)},e.prototype.min=function(){var e=this._root;if(null===e)return null;for(;null!==e.left;)e=e.left;return e.data},e.prototype.max=function(){var e=this._root;if(null===e)return null;for(;null!==e.right;)e=e.right;return e.data},e.prototype.iterator=function(){return new o(this)},e.prototype.each=function(e){for(var t,i=this.iterator();null!==(t=i.next());)e(t)},e.prototype.reach=function(e){for(var t,i=this.iterator();null!==(t=i.prev());)e(t)},e.prototype._bound=function(e,t){for(var i=this._root,n=this.iterator();null!==i;){var r=this._comparator(e,i.data);if(0===r)return n._cursor=i,n;n._ancestors.push(i),i=i.get_child(r>0)}for(var o=n._ancestors.length-1;o>=0;--o)if(i=n._ancestors[o],t(e,i.data)>0)return n._cursor=i,n._ancestors.length=o,n;return n._ancestors.length=0,n},e}();i.TreeBase=r;var o=function(){function e(e){this._tree=e,this._ancestors=[],this._cursor=null}return e.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},e.prototype.next=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._minNode(e)}else if(null===this._cursor.right){var t;do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===t)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},e.prototype.prev=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._maxNode(e)}else if(null===this._cursor.left){var t;do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===t)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},e.prototype._minNode=function(e){for(;null!==e.left;)this._ancestors.push(e),e=e.left;this._cursor=e},e.prototype._maxNode=function(e){for(;null!==e.right;)this._ancestors.push(e),e=e.right;this._cursor=e},e}();i.Iterator=o;var a=function(){function e(e){this.data=e,this.left=null,this.right=null,this.red=!0}return e.prototype.get_child=function(e){return e?this.right:this.left},e.prototype.set_child=function(e,t){e?this.right=t:this.left=t},e}(),s=function(e){function t(t){var i=e.call(this)||this;return i._root=null,i._comparator=t,i.size=0,i}return n(t,e),t.prototype.insert=function(e){var i=!1;if(null===this._root)this._root=new a(e),i=!0,this.size++;else{var n=new a((void 0)),r=!1,o=!1,s=null,l=n,u=null,d=this._root;for(l.right=this._root;;){if(null===d?(d=new a(e),u.set_child(r,d),i=!0,this.size++):t.is_red(d.left)&&t.is_red(d.right)&&(d.red=!0,d.left.red=!1,d.right.red=!1),t.is_red(d)&&t.is_red(u)){var c=l.right===s;d===u.get_child(o)?l.set_child(c,t.single_rotate(s,!o)):l.set_child(c,t.double_rotate(s,!o))}var h=this._comparator(d.data,e);if(0===h)break;o=r,r=h<0,null!==s&&(l=s),s=u,u=d,d=d.get_child(r)}this._root=n.right}return this._root.red=!1,i},t.prototype.remove=function(e){if(null===this._root)return!1;var i=new a((void 0)),n=i;n.right=this._root;for(var r=null,o=null,s=null,l=!0;null!==n.get_child(l);){var u=l;o=r,r=n,n=n.get_child(l);var d=this._comparator(e,n.data);if(l=d>0,0===d&&(s=n),!t.is_red(n)&&!t.is_red(n.get_child(l)))if(t.is_red(n.get_child(!l))){var c=t.single_rotate(n,l);r.set_child(u,c),r=c}else if(!t.is_red(n.get_child(!l))){var h=r.get_child(!u);if(null!==h)if(t.is_red(h.get_child(!u))||t.is_red(h.get_child(u))){var f=o.right===r;t.is_red(h.get_child(u))?o.set_child(f,t.double_rotate(r,u)):t.is_red(h.get_child(!u))&&o.set_child(f,t.single_rotate(r,u));var p=o.get_child(f);p.red=!0,n.red=!0,p.left.red=!1,p.right.red=!1}else r.red=!1,h.red=!0,n.red=!0}}return null!==s&&(s.data=n.data,r.set_child(r.right===n,n.get_child(null===n.left)),this.size--),this._root=i.right,null!==this._root&&(this._root.red=!1),null!==s},t.is_red=function(e){return null!==e&&e.red},t.single_rotate=function(e,t){var i=e.get_child(!t);return e.set_child(!t,i.get_child(t)),i.set_child(t,e),e.red=!0,i.red=!1,i},t.double_rotate=function(e,i){return e.set_child(!i,t.single_rotate(e.get_child(!i),!i)),t.single_rotate(e,i)},t}(r);i.RBTree=s},{}],22:[function(e,t,i){"use strict";function n(e){return e.bounds="undefined"!=typeof e.leaves?e.leaves.reduce(function(e,t){return t.bounds.union(e)},x.empty()):x.empty(),"undefined"!=typeof e.groups&&(e.bounds=e.groups.reduce(function(e,t){return n(t).union(e)},e.bounds)),e.bounds=e.bounds.inflate(e.padding),e.bounds}function r(e,t,i){var n=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},o=r.x-n.x,a=r.y-n.y,s=Math.sqrt(o*o+a*a),l=s-i;return{sourceIntersection:n,targetIntersection:r,arrowStart:{x:n.x+l*o/s,y:n.y+l*a/s}}}function o(e,t,i){var n=t.rayIntersection(e.x,e.y);n||(n={x:t.cx(),y:t.cy()});var r=n.x-e.x,o=n.y-e.y,a=Math.sqrt(r*r+o*o);return{x:n.x-i*r/a,y:n.y-i*o/a}}function a(e,t){return e.pos>t.pos?1:e.pos<t.pos?-1:e.isOpen?-1:t.isOpen?1:0}function s(){return new b.RBTree(function(e,t){return e.pos-t.pos})}function l(e,t,i,n){void 0===n&&(n=!1);var r=e.padding,o="undefined"!=typeof e.groups?e.groups.length:0,a="undefined"!=typeof e.leaves?e.leaves.length:0,s=o?e.groups.reduce(function(e,n){return e.concat(l(n,t,i,!0))},[]):[],d=(n?2:0)+a+o,c=new Array(d),h=new Array(d),f=0,p=function(e,t){h[f]=e,c[f++]=t};if(n){var g=e.bounds,m=t.getCentre(g),v=t.getSize(g)/2,y=t.getOpen(g),b=t.getClose(g),x=m-v+r/2,w=m+v-r/2;e.minVar.desiredPosition=x,p(t.makeRect(y,b,x,r),e.minVar),e.maxVar.desiredPosition=w,p(t.makeRect(y,b,w,r),e.maxVar)}a&&e.leaves.forEach(function(e){return p(e.bounds,e.variable)}),o&&e.groups.forEach(function(e){var i=e.bounds;p(t.makeRect(t.getOpen(i),t.getClose(i),t.getCentre(i),t.getSize(i)),e.minVar)});var E=u(h,c,t,i);return o&&(c.forEach(function(e){e.cOut=[],e.cIn=[]}),E.forEach(function(e){e.left.cOut.push(e),e.right.cIn.push(e)}),e.groups.forEach(function(e){var i=(e.padding-t.getSize(e.bounds))/2;e.minVar.cIn.forEach(function(e){return e.gap+=i}),e.minVar.cOut.forEach(function(t){t.left=e.maxVar,t.gap+=i})})),s.concat(E)}function u(e,t,i,n){var r,o=e.length,l=2*o;console.assert(t.length>=o);var u=new Array(l);for(r=0;r<o;++r){var d=e[r],c=new w(t[r],d,i.getCentre(d));u[r]=new E((!0),c,i.getOpen(d)),u[r+o]=new E((!1),c,i.getClose(d))}u.sort(a);var h=new Array,f=s();for(r=0;r<l;++r){var p=u[r],c=p.v;if(p.isOpen)f.insert(c),i.findNeighbours(c,f);else{f.remove(c);var g=function(e,t){var r=(i.getSize(e.r)+i.getSize(t.r))/2+n;h.push(new y.Constraint(e.v,t.v,r))},m=function(e,t,i){for(var n,r=c[e].iterator();null!==(n=r[e]());)i(n,c),n[t].remove(c)};m("prev","next",function(e,t){return g(e,t)}),m("next","prev",function(e,t){return g(t,e)})}}return console.assert(0===f.size),h}function d(e,t){var i=function(i,n){for(var r,o=t.findIter(e);null!==(r=o[i]());){var a=r.r.overlapX(e.r);if((a<=0||a<=r.r.overlapY(e.r))&&(e[i].insert(r),r[n].insert(e)),a<=0)break}};i("next","prev"),i("prev","next")}function c(e,t){var i=function(i,n){var r=t.findIter(e)[i]();null!==r&&r.r.overlapX(e.r)>0&&(e[i].insert(r),r[n].insert(e))};i("next","prev"),i("prev","next")}function h(e,t){return u(e,t,_,1e-6)}function f(e,t){return u(e,t,P,1e-6)}function p(e){return l(e,_,1e-6)}function g(e){return l(e,P,1e-6)}function m(e){var t=e.map(function(e){return new y.Variable(e.cx())}),i=h(e,t),n=new y.Solver(t,i);n.solve(),t.forEach(function(t,i){return e[i].setXCentre(t.position())}),t=e.map(function(e){return new y.Variable(e.cy())}),i=f(e,t),n=new y.Solver(t,i),n.solve(),t.forEach(function(t,i){return e[i].setYCentre(t.position())})}var v=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var y=e("./vpsc"),b=e("./rbtree");i.computeGroupBounds=n;var x=function(){function e(e,t,i,n){this.x=e,this.X=t,this.y=i,this.Y=n}return e.empty=function(){return new e(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},e.prototype.cx=function(){return(this.x+this.X)/2},e.prototype.cy=function(){return(this.y+this.Y)/2},e.prototype.overlapX=function(e){var t=this.cx(),i=e.cx();return t<=i&&e.x<this.X?this.X-e.x:i<=t&&this.x<e.X?e.X-this.x:0},e.prototype.overlapY=function(e){var t=this.cy(),i=e.cy();return t<=i&&e.y<this.Y?this.Y-e.y:i<=t&&this.y<e.Y?e.Y-this.y:0},e.prototype.setXCentre=function(e){var t=e-this.cx();this.x+=t,this.X+=t},e.prototype.setYCentre=function(e){var t=e-this.cy();this.y+=t,this.Y+=t},e.prototype.width=function(){return this.X-this.x},e.prototype.height=function(){return this.Y-this.y},e.prototype.union=function(t){return new e(Math.min(this.x,t.x),Math.max(this.X,t.X),Math.min(this.y,t.y),Math.max(this.Y,t.Y))},e.prototype.lineIntersections=function(t,i,n,r){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var l=e.lineIntersection(t,i,n,r,o[s][0],o[s][1],o[s][2],o[s][3]);null!==l&&a.push({x:l.x,y:l.y})}return a},e.prototype.rayIntersection=function(e,t){var i=this.lineIntersections(this.cx(),this.cy(),e,t);return i.length>0?i[0]:null},e.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},e.lineIntersection=function(e,t,i,n,r,o,a,s){var l=i-e,u=a-r,d=n-t,c=s-o,h=c*l-u*d;if(0==h)return null;var f=e-r,p=t-o,g=u*p-c*f,m=g/h,v=l*p-d*f,y=v/h;return m>=0&&m<=1&&y>=0&&y<=1?{x:e+m*l,y:t+m*d}:null},e.prototype.inflate=function(t){return new e(this.x-t,this.X+t,this.y-t,this.Y+t)},e}();i.Rectangle=x,i.makeEdgeBetween=r,i.makeEdgeTo=o;var w=function(){function e(e,t,i){this.v=e,this.r=t,this.pos=i,this.prev=s(),this.next=s()}return e}(),E=function(){function e(e,t,i){this.isOpen=e,this.v=t,this.pos=i}return e}(),_={getCentre:function(e){return e.cx()},getOpen:function(e){return e.y},getClose:function(e){return e.Y},getSize:function(e){return e.width()},makeRect:function(e,t,i,n){return new x(i-n/2,i+n/2,e,t)},findNeighbours:d},P={getCentre:function(e){return e.cy()},getOpen:function(e){return e.x},getClose:function(e){return e.X},getSize:function(e){return e.height()},makeRect:function(e,t,i,n){return new x(e,t,i-n/2,i+n/2)},findNeighbours:c};i.generateXConstraints=h,i.generateYConstraints=f,i.generateXGroupConstraints=p,i.generateYGroupConstraints=g,i.removeOverlaps=m;var k=function(e){function t(t,i){var n=e.call(this,0,i)||this;return n.index=t,n}return v(t,e),t}(y.Variable);i.IndexedVariable=k;var A=function(){function e(e,t,i,r,o){void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=!1);var a=this;if(this.nodes=e,this.groups=t,this.rootGroup=i,this.avoidOverlaps=o,this.variables=e.map(function(e,t){return e.variable=new k(t,1)}),r&&this.createConstraints(r),o&&i&&"undefined"!=typeof i.groups){e.forEach(function(e){if(!e.width||!e.height)return void(e.bounds=new x(e.x,e.x,e.y,e.y));var t=e.width/2,i=e.height/2;e.bounds=new x(e.x-t,e.x+t,e.y-i,e.y+i)}),n(i);var s=e.length;t.forEach(function(e){a.variables[s]=e.minVar=new k((s++),"undefined"!=typeof e.stiffness?e.stiffness:.01),a.variables[s]=e.maxVar=new k((s++),"undefined"!=typeof e.stiffness?e.stiffness:.01)})}}return e.prototype.createSeparation=function(e){return new y.Constraint(this.nodes[e.left].variable,this.nodes[e.right].variable,e.gap,"undefined"!=typeof e.equality&&e.equality)},e.prototype.makeFeasible=function(e){var t=this;if(this.avoidOverlaps){var i="x",n="width";"x"===e.axis&&(i="y",n="height");var r=e.offsets.map(function(e){return t.nodes[e.node]}).sort(function(e,t){return e[i]-t[i]}),o=null;r.forEach(function(e){if(o){var t=o[i]+o[n];t>e[i]&&(e[i]=t)}o=e})}},e.prototype.createAlignment=function(e){var t=this,i=this.nodes[e.offsets[0].node].variable;this.makeFeasible(e);var n="x"===e.axis?this.xConstraints:this.yConstraints;e.offsets.slice(1).forEach(function(e){var r=t.nodes[e.node].variable;n.push(new y.Constraint(i,r,e.offset,(!0)))})},e.prototype.createConstraints=function(e){var t=this,i=function(e){return"undefined"==typeof e.type||"separation"===e.type};this.xConstraints=e.filter(function(e){return"x"===e.axis&&i(e)}).map(function(e){return t.createSeparation(e)}),this.yConstraints=e.filter(function(e){return"y"===e.axis&&i(e)}).map(function(e){return t.createSeparation(e)}),e.filter(function(e){return"alignment"===e.type}).forEach(function(e){return t.createAlignment(e)})},e.prototype.setupVariablesAndBounds=function(e,t,i,n){this.nodes.forEach(function(r,o){r.fixed?(r.variable.weight=r.fixedWeight?r.fixedWeight:1e3,i[o]=n(r)):r.variable.weight=1;var a=(r.width||0)/2,s=(r.height||0)/2,l=e[o],u=t[o];r.bounds=new x(l-a,l+a,u-s,u+s)})},e.prototype.xProject=function(e,t,i){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(e,t,e,i,function(e){return e.px},this.xConstraints,p,function(e){return e.bounds.setXCentre(i[e.variable.index]=e.variable.position())},function(e){var t=i[e.minVar.index]=e.minVar.position(),n=i[e.maxVar.index]=e.maxVar.position(),r=e.padding/2;e.bounds.x=t-r,e.bounds.X=n+r})},e.prototype.yProject=function(e,t,i){(this.rootGroup||this.yConstraints)&&this.project(e,t,t,i,function(e){return e.py},this.yConstraints,g,function(e){return e.bounds.setYCentre(i[e.variable.index]=e.variable.position())},function(e){var t=i[e.minVar.index]=e.minVar.position(),n=i[e.maxVar.index]=e.maxVar.position(),r=e.padding/2;e.bounds.y=t-r,e.bounds.Y=n+r})},e.prototype.projectFunctions=function(){var e=this;return[function(t,i,n){return e.xProject(t,i,n)},function(t,i,n){return e.yProject(t,i,n)}]},e.prototype.project=function(e,t,i,r,o,a,s,l,u){this.setupVariablesAndBounds(e,t,r,o),this.rootGroup&&this.avoidOverlaps&&(n(this.rootGroup),a=a.concat(s(this.rootGroup))),this.solve(this.variables,a,i,r),this.nodes.forEach(l),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(u),n(this.rootGroup))},e.prototype.solve=function(e,t,i,n){var r=new y.Solver(e,t);r.setStartingPositions(i),r.setDesiredPositions(n),r.solve()},e}();i.Projection=A},{"./rbtree":21,"./vpsc":24}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./pqueue"),r=function(){function e(e,t){this.id=e,this.distance=t}return e}(),o=function(){function e(e){this.id=e,this.neighbours=[]}return e}(),a=function(){function e(e,t,i){this.node=e,this.prev=t,this.d=i}return e}(),s=function(){function e(e,t,i,n,a){this.n=e,this.es=t,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new o(s);for(s=this.es.length;s--;){var l=this.es[s],u=i(l),d=n(l),c=a(l);this.neighbours[u].neighbours.push(new r(d,c)),this.neighbours[d].neighbours.push(new r(u,c))}}return e.prototype.DistanceMatrix=function(){for(var e=new Array(this.n),t=0;t<this.n;++t)e[t]=this.dijkstraNeighbours(t);return e},e.prototype.DistancesFromNode=function(e){return this.dijkstraNeighbours(e)},e.prototype.PathFromNodeToNode=function(e,t){return this.dijkstraNeighbours(e,t)},e.prototype.PathFromNodeToNodeWithPrevCost=function(e,t,i){var r=new n.PriorityQueue(function(e,t){return e.d<=t.d}),o=this.neighbours[e],s=new a(o,null,0),l={};for(r.push(s);!r.empty()&&(s=r.pop(),o=s.node,o.id!==t);)for(var u=o.neighbours.length;u--;){var d=o.neighbours[u],c=this.neighbours[d.id];if(!s.prev||c.id!==s.prev.node.id){var h=c.id+","+o.id;if(!(h in l&&l[h]<=s.d)){var f=s.prev?i(s.prev.node.id,o.id,c.id):0,p=s.d+d.distance+f;l[h]=p,r.push(new a(c,s,p))}}}for(var g=[];s.prev;)s=s.prev,g.push(s.node.id);return g},e.prototype.dijkstraNeighbours=function(e,t){void 0===t&&(t=-1);for(var i=new n.PriorityQueue(function(e,t){return e.d<=t.d}),r=this.neighbours.length,o=new Array(r);r--;){var a=this.neighbours[r];a.d=r===e?0:Number.POSITIVE_INFINITY,a.q=i.push(a)}for(;!i.empty();){var s=i.pop();if(o[s.id]=s.d,s.id===t){for(var l=[],u=s;"undefined"!=typeof u.prev;)l.push(u.prev.id),u=u.prev;return l}for(r=s.neighbours.length;r--;){var d=s.neighbours[r],u=this.neighbours[d.id],c=s.d+d.distance;s.d!==Number.MAX_VALUE&&u.d>c&&(u.d=c,u.prev=s,i.reduceKey(u.q,u,function(e,t){return e.q=t}))}}return o},e}();i.Calculator=s},{"./pqueue":20}],24:[function(e,t,i){"use strict";function n(e,t,i){for(var n=e.map(function(e){return new a(e.desiredCenter)}),r=[],s=e.length,l=0;l<s-1;l++){var d=e[l],c=e[l+1];r.push(new o(n[l],n[l+1],(d.size+c.size)/2))}var h=n[0],f=n[s-1],p=e[0].size/2,g=e[s-1].size/2,m=null,v=null;t&&(m=new a(t,1e3*h.weight),n.push(m),r.push(new o(m,h,p))),i&&(v=new a(i,1e3*f.weight),n.push(v),r.push(new o(f,v,g)));var y=new u(n,r);return y.solve(),{newCenters:n.slice(0,e.length).map(function(e){return e.position()}),lowerBound:m?m.position():h.position()-p,upperBound:v?v.position():f.position()+g}}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e){this.scale=e,this.AB=0,this.AD=0,this.A2=0}return e.prototype.addVariable=function(e){var t=this.scale/e.scale,i=e.offset/e.scale,n=e.weight;this.AB+=n*t*i,this.AD+=n*t*e.desiredPosition,this.A2+=n*t*t},e.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},e}();i.PositionStats=r;var o=function(){function e(e,t,i,n){void 0===n&&(n=!1),this.left=e,this.right=t,this.gap=i,this.equality=n,this.active=!1,this.unsatisfiable=!1,this.left=e,this.right=t,this.gap=i,this.equality=n}return e.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},e}();i.Constraint=o;var a=function(){function e(e,t,i){void 0===t&&(t=1),void 0===i&&(i=1),this.desiredPosition=e,this.weight=t,this.scale=i,this.offset=0}return e.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},e.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},e.prototype.visitNeighbours=function(e,t){var i=function(i,n){return i.active&&e!==n&&t(i,n)};this.cOut.forEach(function(e){return i(e,e.right)}),this.cIn.forEach(function(e){return i(e,e.left)})},e}();i.Variable=a;var s=function(){function e(e){this.vars=[],e.offset=0,this.ps=new r(e.scale),this.addVariable(e)}return e.prototype.addVariable=function(e){e.block=this,this.vars.push(e),this.ps.addVariable(e),this.posn=this.ps.getPosn()},e.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var e=0,t=this.vars.length;e<t;++e)this.ps.addVariable(this.vars[e]);this.posn=this.ps.getPosn()},e.prototype.compute_lm=function(e,t,i){var n=this,r=e.dfdv();return e.visitNeighbours(t,function(t,o){var a=n.compute_lm(o,e,i);o===t.right?(r+=a*t.left.scale,t.lm=a):(r+=a*t.right.scale,t.lm=-a),i(t)}),r/e.scale},e.prototype.populateSplitBlock=function(e,t){var i=this;e.visitNeighbours(t,function(t,n){n.offset=e.offset+(n===t.right?t.gap:-t.gap),i.addVariable(n),i.populateSplitBlock(n,e)})},e.prototype.traverse=function(e,t,i,n){var r=this;void 0===i&&(i=this.vars[0]),void 0===n&&(n=null),i.visitNeighbours(n,function(n,o){t.push(e(n)),r.traverse(e,t,o,i)})},e.prototype.findMinLM=function(){var e=null;return this.compute_lm(this.vars[0],null,function(t){!t.equality&&(null===e||t.lm<e.lm)&&(e=t)}),e},e.prototype.findMinLMBetween=function(e,t){this.compute_lm(e,null,function(){});var i=null;return this.findPath(e,null,t,function(e,t){!e.equality&&e.right===t&&(null===i||e.lm<i.lm)&&(i=e)}),i},e.prototype.findPath=function(e,t,i,n){var r=this,o=!1;return e.visitNeighbours(t,function(t,a){o||a!==i&&!r.findPath(a,e,i,n)||(o=!0,n(t,a))}),o},e.prototype.isActiveDirectedPathBetween=function(e,t){if(e===t)return!0;for(var i=e.cOut.length;i--;){var n=e.cOut[i];if(n.active&&this.isActiveDirectedPathBetween(n.right,t))return!0}return!1},e.split=function(t){return t.active=!1,[e.createSplitBlock(t.left),e.createSplitBlock(t.right)]},e.createSplitBlock=function(t){var i=new e(t);return i.populateSplitBlock(t,null),i},e.prototype.splitBetween=function(t,i){var n=this.findMinLMBetween(t,i);if(null!==n){var r=e.split(n);return{constraint:n,lb:r[0],rb:r[1]}}return null},e.prototype.mergeAcross=function(e,t,i){t.active=!0;for(var n=0,r=e.vars.length;n<r;++n){var o=e.vars[n];o.offset+=i,this.addVariable(o)}this.posn=this.ps.getPosn()},e.prototype.cost=function(){for(var e=0,t=this.vars.length;t--;){var i=this.vars[t],n=i.position()-i.desiredPosition;e+=n*n*i.weight}return e},e}();i.Block=s;var l=function(){function e(e){this.vs=e;var t=e.length;for(this.list=new Array(t);t--;){var i=new s(e[t]);this.list[t]=i,i.blockInd=t}}return e.prototype.cost=function(){for(var e=0,t=this.list.length;t--;)e+=this.list[t].cost();return e},e.prototype.insert=function(e){e.blockInd=this.list.length,this.list.push(e)},e.prototype.remove=function(e){var t=this.list.length-1,i=this.list[t];this.list.length=t,e!==i&&(this.list[e.blockInd]=i,i.blockInd=e.blockInd)},e.prototype.merge=function(e){var t=e.left.block,i=e.right.block,n=e.right.offset-e.left.offset-e.gap;t.vars.length<i.vars.length?(i.mergeAcross(t,e,n),this.remove(t)):(t.mergeAcross(i,e,-n),this.remove(i))},e.prototype.forEach=function(e){this.list.forEach(e);
},e.prototype.updateBlockPositions=function(){this.list.forEach(function(e){return e.updateWeightedPosition()})},e.prototype.split=function(e){var t=this;this.updateBlockPositions(),this.list.forEach(function(i){var n=i.findMinLM();null!==n&&n.lm<u.LAGRANGIAN_TOLERANCE&&(i=n.left.block,s.split(n).forEach(function(e){return t.insert(e)}),t.remove(i),e.push(n))})},e}();i.Blocks=l;var u=function(){function e(e,t){this.vs=e,this.cs=t,this.vs=e,e.forEach(function(e){e.cIn=[],e.cOut=[]}),this.cs=t,t.forEach(function(e){e.left.cOut.push(e),e.right.cIn.push(e)}),this.inactive=t.map(function(e){return e.active=!1,e}),this.bs=null}return e.prototype.cost=function(){return this.bs.cost()},e.prototype.setStartingPositions=function(e){this.inactive=this.cs.map(function(e){return e.active=!1,e}),this.bs=new l(this.vs),this.bs.forEach(function(t,i){return t.posn=e[i]})},e.prototype.setDesiredPositions=function(e){this.vs.forEach(function(t,i){return t.desiredPosition=e[i]})},e.prototype.mostViolated=function(){for(var t=Number.MAX_VALUE,i=null,n=this.inactive,r=n.length,o=r,a=0;a<r;++a){var s=n[a];if(!s.unsatisfiable){var l=s.slack();if((s.equality||l<t)&&(t=l,i=s,o=a,s.equality))break}}return o!==r&&(t<e.ZERO_UPPERBOUND&&!i.active||i.equality)&&(n[o]=n[r-1],n.length=r-1),i},e.prototype.satisfy=function(){null==this.bs&&(this.bs=new l(this.vs)),this.bs.split(this.inactive);for(var t=null;(t=this.mostViolated())&&(t.equality||t.slack()<e.ZERO_UPPERBOUND&&!t.active);){var i=t.left.block,n=t.right.block;if(i!==n)this.bs.merge(t);else{if(i.isActiveDirectedPathBetween(t.right,t.left)){t.unsatisfiable=!0;continue}var r=i.splitBetween(t.left,t.right);if(null===r){t.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(i),this.inactive.push(r.constraint),t.slack()>=0?this.inactive.push(t):this.bs.merge(t)}}},e.prototype.solve=function(){this.satisfy();for(var e=Number.MAX_VALUE,t=this.bs.cost();Math.abs(e-t)>1e-4;)this.satisfy(),e=t,t=this.bs.cost();return t},e.LAGRANGIAN_TOLERANCE=-1e-4,e.ZERO_UPPERBOUND=-1e-10,e}();i.Solver=u,i.removeOverlapInOneDimension=n},{}],25:[function(e,t,i){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function s(e){var t=new FileReader,i=a(t);return t.readAsArrayBuffer(e),i}function l(e){var t=new FileReader,i=a(t);return t.readAsText(e),i}function u(e){for(var t=new Uint8Array(e),i=new Array(t.length),n=0;n<t.length;n++)i[n]=String.fromCharCode(t[n]);return i.join("")}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&b(e))this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!x(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var i=t.body;if("string"==typeof e)this.url=e;else{if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=h(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(r))}}),t}function g(e){var t=new r;return e.split("\r\n").forEach(function(e){var i=e.split(":"),n=i.shift().trim();if(n){var r=i.join(":").trim();t.append(n,r)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},x=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,n){e=t(e),n=i(n);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(n)},r.prototype["delete"]=function(e){delete this.map[t(e)]},r.prototype.get=function(e){var i=this.map[t(e)];return i?i[0]:null},r.prototype.getAll=function(e){return this.map[t(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,n){this.map[t(e)]=[i(n)]},r.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(i){this.map[i].forEach(function(n){e.call(t,n,i,this)},this)},this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),n(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),n(e)},v.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},c.call(f.prototype),c.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];m.redirect=function(e,t){if(E.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=f,e.Response=m,e.fetch=function(e,t){return new Promise(function(i,n){var r=new f(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:g(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;i(new m(t,e))},o.onerror=function(){n(new TypeError("Network request failed"))},o.ontimeout=function(){n(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.UNKNOW_IMAGE="data:image/png;base64,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",i.LINK_OPTIONS="data:image/png;base64,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",i.FEED_PIPE="data:image/png;base64,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";
},{}],27:[function(e,t,i){"use strict";function n(e,t){function i(e){function t(e,n){n.forEach(function(n){n.hitTest(e)&&(n instanceof r?t(e,n.zones):i.indexOf(n)===-1&&i.push(n))})}e=e||[];var i=[];return e.forEach(function(e){t(e,h.zones)}),i.push(m),i}function n(){var e=void 0,t=void 0,i=void 0,n=void 0;h.nodes.forEach(function(r){var o=r.model.position;e=void 0===e?o.x:Math.min(e,o.x),t=void 0===t?o.y:Math.min(t,o.y),i=void 0===i?o.x:Math.max(i,o.x),n=void 0===n?o.y:Math.max(n,o.y)});for(var r=[],l=[].concat(h.nodes),u=e,d=0;u<=i;u+=f.width-p.width,d++){r[d]=[];for(var c=t,g=0;c<=n;c+=f.height-p.height,g++){var v=new o(null,{x:u,y:c,width:f.width,height:f.height,elementSize:p});l=s(v,l),r[d][g]=v}}h.zones=a(r),h.zones.push(m)}function a(e){for(var t=1e3,i=Math.sqrt(g),n=void 0,o=0;o<t&&1!==e.length;o++){n=[];for(var a=0,s=0;a<e.length;a+=i,s++){n[s]=[];for(var l=0,u=0;l<e[a].length;l+=i,u++){var d=[];d.push(e[a][l]),e[a+1]&&e[a+1][l]&&d.push(e[a+1][l]),e[a]&&e[a][l+1]&&d.push(e[a][l+1]),e[a+1]&&e[a+1][l+1]&&d.push(e[a+1][l+1]),n[s][u]=new r(d)}}e=n}return n&&(e=n),e[0]||[]}function s(e,t){var i=[];return t.forEach(function(t){e.nodeHitTest(t)?(e.nodes.push(t),h.getRelatedNodes(t).forEach(function(t){e.relatedNodes.indexOf(t)===-1&&e.relatedNodes.push(t)}),h.maps.sourceMap[t.id]&&h.maps.sourceMap[t.id].forEach(function(t){e.links.push(t)}),h.maps.targetMap[t.id]&&h.maps.targetMap[t.id].forEach(function(t){e.links.push(t)})):i.push(t)}),i}function l(e){e.relatedNodes=[],e.nodes=[],e.links=[]}function u(){var e={},t={};return h.nodes.forEach(function(t){e[t.id]=t,e[t.model.id]=t.id}),{nodeMap:e,idMap:t}}function d(e,t){var i={},n={},r={};return h.links.forEach(function(o){r[o.id]=o,t[o.model.id]=o.id;var a=e[o.model.source],s=e[o.model.target];i[s.id]||(i[s.id]=[]),i[s.id].push(o),n[a.id]||(n[a.id]=[]),n[a.id].push(o)}),{linkMap:r,sourceMap:i,targetMap:n,idMap:t}}function c(){var e=u(),t=e.nodeMap,i=e.idMap,n=d(t,i);h.maps={sourceMap:n.sourceMap,targetMap:n.targetMap,nodeMap:t,idMap:n.idMap,linkMap:n.linkMap}}var h=this;e||(e={}),e.nodes||(e.nodes=[]),e.links||(e.links=[]),h.nodes=e.nodes,h.links=e.links,h.maps={sourceMap:{},targetMap:{},nodeMap:{},linkMap:{},idMap:{}},h.zones=[];var f=t.dataZoneSize,p=t.elementSize,g=t.zonesInGroup,m=new o(null,{x:0,y:0,width:0,height:0,elementSize:0,fakeZone:!0});(p.width>=f.width||p.height>=f.height)&&(f.width=20*p.width,f.height=20*p.height),h.getElementsNearThePoints=function(e){var t=i(e),n=[],r=[];return t.forEach(function(e){e.relatedNodes.forEach(function(e){n.indexOf(e)===-1&&n.push(e)}),e.nodes.forEach(function(e){n.indexOf(e)===-1&&n.push(e)}),e.links.forEach(function(e){r.indexOf(e)===-1&&r.push(e)})}),{nodes:n,links:r}},h.getElementsForRectangle=function(e){if(!e)return{nodes:[],links:[]};var t=[];if(e.width<=f.width&&e.height<=f.height)t.push({x:e.x,y:e.y}),t.push({x:e.x+e.width,y:e.y}),t.push({x:e.x,y:e.y+e.height}),t.push({x:e.x+e.width,y:e.y+e.height});else for(var i=e.x;;i+=f.width){for(var n=e.y;t.push({x:Math.min(i,e.x+e.width),y:Math.min(n,e.y+e.height)}),!(n>=e.y+e.height);n+=f.height);if(i>=e.x+e.width)break}return h.getElementsNearThePoints(t)},h.getRelatedNodes=function(e){var t=[];return h.maps.targetMap[e.id]&&h.maps.targetMap[e.id].forEach(function(e){return t.push(h.maps.nodeMap[e.model.target])}),h.maps.sourceMap[e.id]&&h.maps.sourceMap[e.id].forEach(function(e){return t.push(h.maps.nodeMap[e.model.source])}),t},h.refresh=function(e){e&&(e.nodes&&(h.nodes=e.nodes),e.links&&(h.links=e.links)),c(),n()},h.updateZonesForNode=function(e,t){var n=e.model.position,r=i([t]);r.forEach(function(t){var i=t.nodes.filter(function(t){return t!==e});l(t),s(t,i)});var o=i([n]);o?o.forEach(function(t){s(t,[e])}):s(m,[e])},h.refresh()}function r(e){function t(){var e=void 0,t=void 0,n=void 0,r=void 0;i.zones.forEach(function(i){e=void 0===e?i.model.x:Math.min(e,i.model.x),t=void 0===t?i.model.y:Math.min(t,i.model.y),n=void 0===n?i.model.x+i.model.width:Math.max(n,i.model.x+i.model.width),r=void 0===r?i.model.y+i.model.height:Math.max(r,i.model.y+i.model.height)}),i.model.x=e,i.model.y=t,i.model.width=n-e,i.model.height=r-t}var i=this;i.model={},i.zones=e,t(),i.hitTest=function(e){return e.x>=i.model.x&&e.x<=i.model.x+i.model.width&&e.y>=i.model.y&&e.y<=i.model.y+i.model.height}}function o(e,t){var i=this;i.model=t,i.nodes=e||[],i.relatedNodes=[],i.links=[];var n=t.elementSize;i.nodeHitTest=function(e){if(i.model.fakeZone)return!0;var t=e.model.position,r=t,o={x:t.x+n.width,y:t.y},a={x:t.x,y:t.y+n.height},s={x:t.x+n.width,y:t.y+n.height};return i.hitTest(r)&&i.hitTest(o)&&i.hitTest(a)&&i.hitTest(s)},i.hitTest=function(e){return i.model.fakeZone||e.x>=i.model.x&&e.x<=i.model.x+i.model.width&&e.y>=i.model.y&&e.y<=i.model.y+i.model.height}}Object.defineProperty(i,"__esModule",{value:!0}),i.DataContainer=n,i.GroupOfZones=r,i.NodesZone=o,i["default"]=n},{}],28:[function(e,t,i){"use strict";function n(e){function t(e){return"source:("+e.source+")~#~target:("+e.target+")"}function i(e,i){var n=e.group?e:{id:t(e),source:e.source,target:e.target,linkType:o,group:[e]};return n.group.push(i),n}if(e&&e.nodes){e.links=e.links||[];var n={};e.nodes.forEach(function(e){n[e.id]=e,e.position={x:0,y:0};var t={};Object.keys(e).forEach(function(i){var n=a.indexOf(i)===-1;n&&(t[i]=e[i],delete e[i])}),e.data=t});var r={};e.links.forEach(function(e){if(n[e.source]&&n[e.target]){var o=t(e);r[o]?r[o]=i(r[o],e):r[o]=e}else n[e.source]?console.warn("Target not found! The link from "+e.source+" to "+e.target):console.warn("Source not found! The link from "+e.source+" to "+e.target)});var l={},u={},d=Object.keys(r).map(function(t){var i=r[t];return Object.keys(i).forEach(function(t){var n=s.indexOf(t)===-1;n&&(e[t]=i[t],delete i[t])}),l[i.target]||(l[i.target]=[]),l[i.target].push(i),u[i.source]||(u[i.source]=[]),u[i.source].push(i),i});return{nodes:Object.keys(n).map(function(e){return n[e]}),links:d}}}function r(e){var t={};e.forEach(function(e){var i=e.model.resource;i&&(t[i]?t[i].push(e):t[i]=[e])}),Object.keys(t).forEach(function(e){t[e].length>1&&t[e].forEach(function(i){var n=t[e].indexOf(i);i.aspects=t[e].slice(0,n).concat(t[e].slice(n+1,t[e].length))})})}Object.defineProperty(i,"__esModule",{value:!0}),i.processData=n,i.createAspectRelations=r;var o=i.LG_GROUP_TYPE_ID="tq-lg-group",a=i.NODE_MODEL_FIELDS=["id","label","viewFrame","typeId","activeResource","resource","resourceType","position","defaultPosition","data","offset"],s=i.LINK_MODEL_FIELDS=["id","source","target","linkType","group","data"];i["default"]=n},{}],29:[function(e,t,i){"use strict";function n(e){function t(e){return s+"?_viewClass="+u+"&graph="+h+"&resource="+e+"&configGraph="+f+"&_base="+p}function i(e){return s+"?_viewClass="+c+"&graph="+h+"&resource="+e+"&configGraph="+f+"&_base="+p}function n(e,t,i,n,r){var o=s+"?_viewClass="+(i||l)+"&graph="+h+"&focusNode="+encodeURIComponent(e)+"&_base="+p;return t&&(o+="&viewFrame="+t),r&&(o+="&offset="+r),g&&(o+="&reach="+g),m&&(o+="&range="+m),v&&(o+="&breadth="+v),y&&(o+="&depth="+y),n&&(o+="&diagramType="+n),o}function r(e){return fetch(e,{method:"GET",credentials:"same-origin",mode:"cors",cache:"default",headers:{Accept:"application/json, text/turtle","Content-Type":"application/sparql-query"}}).then(function(e){if(e.ok)return e.json();var t=new Error(e.statusText);throw t.response=e,t})}function o(e,t,i){var n=s+"?_base="+p+"&_viewClass="+d+"&leftNode="+e+"&rightNode="+t;return i&&(n+="&linkType="+i),n}var a=this;e||(e={});var s=e.serverURL||"/api/tbl/swp",l=e.lgViewClass||"http://edg.topbraid.solutions/model/BuildJSONforLineageModelLineageGram",u=e.vfViewClass||"edg:getViewFramesForResource",d=e.dmViewClass||"edg:DerivationMapDataService",c=e.vcViewClass||"edg:getLineageGramDataProvider",h=e.graph||"undefined",f=e.configGraph||"http://edg.topbraidlive.org/1.0/config/diagrams",p=e.base||"undefined",g=e.reach,m=e.range,v=e.breadth,y=e.depth;a.fetchData=function(e){return r(n(e.targetNodeId,e.viewFrame,e.lineageGramViewClass,e.diagramType,e.hasOwnProperty("offset")?e.offset:null))},a.getViewFrames=function(e){return r(t(e))},a.getViewClassForResource=function(e){return r(i(e))},a.relationInfo=function(e){var t=e.source.resource;e.source.hasOwnProperty("activeResource")&&(t=e.source.activeResource);var i=e.target.resource;return e.target.hasOwnProperty("activeResource")&&(i=e.target.activeResource),r(o(t,i,e.linkType))}}Object.defineProperty(i,"__esModule",{value:!0}),i.DefaultDataProvider=n,i["default"]=n},{}],30:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){function t(t){return t?t?e.colors[t]||e.colors["default"]:e.colors["default"]:"white"}function i(t){return t?!e.images[t]&&"link-options"===t||"default-link-options"===t?l.LINK_OPTIONS:!e.images[t]&&"feed-pipe"===t||"default-feed-pipe"===t?l.FEED_PIPE:e.resourcePath+(e.images[t]||e.images.unknown||l.UNKNOW_IMAGE):l.UNKNOW_IMAGE}function n(t){var i=e.linkStyles,n=a.cloneDeep(i["default-link-style"]||u),r=void 0;return r=t&&i[t]?i[t]:n||n,a.merge(n,r)}function r(t){if(t)return e.icons[t]}var o=this;o.getLinkStyle=n,o.getImage=i,o.getColor=t,o.getIcon=r}Object.defineProperty(i,"__esModule",{value:!0}),i.FEED_PIPE_LINK_STYLE=i.DEFAULT_GROUP_LINK_STYLE=i.DEFAULT_LINK_STYLE=i.DEFAULT_DERIVATION_MAP_LINK_STYLE=i.LG_GROUP_TYPE_ID=i.FEED_PIPE_TYPE=void 0,i.ResourceProvider=r;var o=e("lodash"),a=n(o),s=e("./base64Images"),l=n(s),u=(i.FEED_PIPE_TYPE="feedpipe",i.LG_GROUP_TYPE_ID="tq-lg-group",i.DEFAULT_DERIVATION_MAP_LINK_STYLE={cssClass:"derivation-link",lineType:"solid",color:"black",textColor:"black",textBackgroundColor:"white",thickness:2},i.DEFAULT_LINK_STYLE={cssClass:"lineage-gram-link",lineType:"solid",color:"#3c4260",toolButton:{image:l.LINK_OPTIONS,width:30,height:30,alwaysVisible:!1},thickness:2,hasArrow:!0});i.DEFAULT_GROUP_LINK_STYLE={cssClass:"lineage-gram-links-group",lineType:"solid",color:"#3c4260",thickness:2,hasArrow:!0,toolButton:{alwaysVisible:!0}},i.FEED_PIPE_LINK_STYLE={cssClass:"lineage-gram-feed-pipe-link",lineType:"solid",color:"#3c4260",toolButton:{image:l.FEED_PIPE,width:30,height:30,alwaysVisible:!0},thickness:3,hasArrow:!0}},{"./base64Images":26,lodash:"lodash"}],31:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=this,i=e.lineageGram,n='\n        <div class="tq-lg-default-user-ui">\n            <div id="tqLgToolbar"></div>\n            <div id="tqLgMiniMap"></div>\n            <div id="tqLgInfoPanel"></div>\n            <div id="tqLgOptionsPanel"></div>\n            <div id="tqLgSearchPanel"></div>\n        </div>\n    ',r=void 0;if("string"==typeof e.baseElement?r=document.getElementById(e.baseElement):"object"===o(e.baseElement)&&(r=e.baseElement),r){r.innerHTML=n;var a=r.querySelector("#tqLgToolbar"),u=r.querySelector("#tqLgMiniMap"),c=r.querySelector("#tqLgInfoPanel"),f=r.querySelector("#tqLgOptionsPanel"),g=r.querySelector("#tqLgSearchPanel"),m=i.zoom(),v=!0,y=new l.ViewFrameButtons({lineageGram:i}),b=new s["default"].Switcher({states:[{id:"lineageDiagram",label:"Lineage diagram view",icon:"glyphicon glyphicon-modal-window"},{id:"birdEye",label:"Bird eye view",icon:"glyphicon glyphicon-eye-open"}],verticalOrientation:!0});b.on("state-changed",function(e){i.setCurrentView(e)});var x=new s["default"].Toolbar({baseElement:a,tools:[{id:"tqLgSearch",icon:"glyphicon glyphicon-search",label:"Search"},{id:"tqLgZoomIn",icon:"glyphicon glyphicon-zoom-in",label:"Zoom in",callback:function(){m=i.zoomIn(),x.rootHtml.querySelector("#tqLgZoomIn").disabled=m.cur===m.max,x.rootHtml.querySelector("#tqLgZoomOut").disabled=m.cur===m.min}},{id:"tqLgZoomOut",icon:"glyphicon glyphicon-zoom-out",label:"Zoom out",callback:function(){m=i.zoomOut(),x.rootHtml.querySelector("#tqLgZoomIn").disabled=m.cur===m.max,x.rootHtml.querySelector("#tqLgZoomOut").disabled=m.cur===m.min}},{id:"tqLgZoomToFit",icon:"glyphicon glyphicon-fullscreen",label:"Zoom to fit",callback:function(){m=i.zoomToFit()}},{id:"tqLgReset",icon:"glyphicon glyphicon-refresh",label:"Reset layout",callback:function(){i.resetLayout()}},{id:"tqLgGather",icon:"glyphicon glyphicon-pushpin",label:"Gather relatives",callback:function(){i.combine()}},{id:"expandAll",icon:"glyphicon glyphicon-resize-full",icon2:"glyphicon glyphicon-resize-small",label:"Expand all nodes",callback:function(){v?i.expandAllNodes():i.collapseAllNodes(),v=!v}},y,b,{id:"infoPanelBtn",icon:"glyphicon glyphicon-info-sign",label:"Info panel"},{id:"tqLgOptionsButton",icon:"glyphicon glyphicon-menu-hamburger"}]});t.toolbar=x,i.on("current-view-changed",function(e){var t="lineageDiagram"!==e;b.setState(e),x.rootHtml.querySelector("#expandAll").disabled=t,x.rootHtml.querySelector("#tqLgReset").disabled=t,x.rootHtml.querySelector("#tqLgZoomIn").disabled=t,x.rootHtml.querySelector("#tqLgZoomOut").disabled=t,x.rootHtml.querySelector("#tqLgZoomToFit").disabled=t}),new s["default"].SearchPanel({baseElement:g,triggerButton:x.rootHtml.querySelector("#tqLgSearch"),active:!1}),new h["default"]({baseElement:c,active:!1,triggerButton:x.rootHtml.querySelector("#infoPanelBtn"),lineageGram:i}),new p["default"]({lineageGram:i,baseElement:f,active:!1,triggerButton:x.rootHtml.querySelector("#tqLgOptionsButton"),legends:e.legends,onPressHelp:e.onPressHelp}),new d["default"]({baseElement:u,active:!1,lineageGram:i,position:{x:"calc(100% - 265px)",y:"calc(100% - 265px)"}})}}Object.defineProperty(i,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.DefaultUI=r;var a=e("visualizations-library"),s=n(a),l=e("./viewFrameButtons"),u=e("./map"),d=n(u),c=e("./infoPanel"),h=n(c),f=e("./optionsPanel"),p=n(f);i["default"]=r},{"./infoPanel":34,"./map":35,"./optionsPanel":36,"./viewFrameButtons":38,"visualizations-library":5}],32:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){f?(a.setSearchKey(void 0),u.searchPanel.classList.add("tq-dm-hidden"),g.classList.remove("tq-ui-selected")):(a.setSearchKey(m.value),u.searchPanel.classList.remove("tq-dm-hidden"),g.classList.add("tq-ui-selected")),f=!f}function i(e){var t=void 0;if("string"==typeof e?t=document.getElementById(e):"object"===("undefined"==typeof e?"undefined":o(e))&&(t=e),!t)throw new Error("Base element is not found!");return t}function n(e,t){e.innerHTML="",e.tabIndex=1;var i=document.createElement("DIV");i.className="tq-derivation-map__toolbar",i.id="tq-derivation-map-toolbar",e.appendChild(i);var n=document.createElement("DIV");n.className="tq-derivation-map_container";var r=document.createElement("DIV");r.className="tq-derivation-map_container__title",r.innerText="",n.appendChild(r),e.appendChild(n);var o=document.createElement("DIV");return o.className="tq-derivation-map_search-pane tq-dm-hidden",o.innerHTML='\n            <input\n                id="tq-dm-search-pane"\n                type="text"\n                class="tq-derivation-map_search-pane__input">\n            </input>\n        ',e.appendChild(o),{searchPanel:o,rootHtml:e,infoPanel:t,toolbar:i,diagramTitle:r}}var r=this,a=e.derivationMap,u=n(i(e.baseElement),i(e.infoPanel)),d=!0,c=void 0,h=[{id:"tqDMSearch",icon:"glyphicon glyphicon-search",label:"Search",callback:t},{id:"tqDMExportSVG",icon:"tool-bar-svg-icon",label:"Export to SVG",callback:function(){a.exportToSvg()}},{id:"tqDMExportPNG",icon:"tool-bar-png-icon",label:"Export to PNG",callback:function(){a.exportToPng()}},{id:"tqPrint",icon:"glyphicon glyphicon-print",label:"Print",callback:function(){a.print()}},{id:"tqDMZoomIn",icon:"glyphicon glyphicon-zoom-in",label:"Zoom in",callback:function(){a.zoomIn()}},{id:"tqDMZoomOut",icon:"glyphicon glyphicon-zoom-out",label:"Zoom out",callback:function(){a.zoomOut()}},{id:"tqDMZoomToFit",icon:"glyphicon glyphicon-fullscreen",label:"Zoom to fit",callback:function(){a.zoomToFit()}},{id:"infoPanelBtn",icon:"glyphicon glyphicon-info-sign",label:"Open Info panel"},{id:"expandAll",icon:"glyphicon glyphicon-resize-full",icon2:"glyphicon glyphicon-resize-small",label:"Expand all",callback:function(){d?a.expandAllElements():a.collapseAllElements(),d=!d}}];e.tools&&e.tools.forEach(function(e){e.position<h.length?h.splice(e.position,0,e):h.push(e)}),r.toolbar=new s["default"].Toolbar({baseElement:u.toolbar,tools:h}),r.infoPanel=new l.DMInfoPanel({baseElement:u.infoPanel,triggerButton:r.toolbar.rootHtml.querySelector("#infoPanelBtn")}),r.infoPanel.on("size-changed",function(){return a.resetFocus()}),r.infoPanel.on("element-click",function(e){a.setSelectedElement(e)}),a.on("diagram-state-changed",function(e){"completed"===e&&(c=a.getDiagramInfo(),c&&c.title?u.diagramTitle.innerText=c.title:u.diagramTitle.innerText="")});var f=!1,p=!1,g=r.toolbar.rootHtml.querySelector("#tqDMSearch"),m=u.searchPanel.querySelector("input");m.onkeyup=function(){p&&clearTimeout(p),p=setTimeout(function(){var e=m.value;a.setSearchKey(e)},300)}}Object.defineProperty(i,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.DMDefaultUI=r;var a=e("visualizations-library"),s=n(a),l=e("./dmInfoPanel");i["default"]=r},{"./dmInfoPanel":33,"visualizations-library":5}],33:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){if(!p){var e=void 0;if(e=h?h instanceof u.Node?i(h):h instanceof u.Link?n(h):'\n                    <div class="tq-lg-dm-property-pane tq-lg-dm-empty">\n                        <div>Unknown type of element</div>\n                    </div>\n                ':'\n                <div class="tq-lg-dm-property-pane tq-lg-dm-empty">\n                    <div>Select a diagram element</div>\n                </div>\n            ',c.body.style.width=f+"px",c.body.innerHTML=e,h instanceof u.Node)for(var t=c.body.querySelectorAll(".tq-lg-dm-child-button"),r=0;r<t.length;r++)t[r].onclick=function(){c.trigger("element-click",this.id)};else h instanceof u.Link&&(c.body.querySelector(".tq-lg-dm-source-button").onclick=function(){c.trigger("element-click",this.id)},c.body.querySelector(".tq-lg-dm-target-button").onclick=function(){c.trigger("element-click",this.id)})}}function i(e){var t=e.children.map(function(e){return'<div\n                id="'+e.id+'"\n                title="'+e.label+"("+e.endpointId+')"\n                type="text"\n                class="tq-ui-property-button tq-lg-dm-child-button">\n                '+e.label+"\n            </div>"}).join("");return'\n            <div class="tq-lg-dm-property-pane">\n                <label class="tq-label">ID</label>\n                <input\n                    value="'+e.endpointId+'"\n                    title="'+e.endpointId+'" type="text"  class="tq-ui-property" disabled>\n                </input>\n                <label class="tq-label">Diagram ID</label>\n                <input\n                    value="'+e.id+'"\n                    title="'+e.id+'"\n                    type="text"\n                    class="tq-ui-property"\n                    disabled>\n                </input>\n                <label class="tq-label">Label</label>\n                <input value="'+e.label+'" title="'+e.label+'" type="text" class="tq-ui-property" disabled></input>\n                '+(t.length>0?'<label class="tq-label">Children</label>':"")+"\n                "+t+"\n            </div>\n        "}function n(e){return'\n            <div class="tq-lg-dm-property-pane">\n                <label class="tq-label">Label</label>\n                <input value="'+e.label+'" title="'+e.label+'" type="text" class="tq-ui-property" disabled></input>\n                <label class="tq-label">Source</label>\n                <div id="'+e.source.id+'"\n                    title="'+e.source.label+"("+e.source.endpointId+')"\n                    type="text"\n                    class="tq-ui-property-button tq-lg-dm-source-button">\n                    '+e.source.label+'\n                </div>\n                <label class="tq-label">Target</label>\n                <div id="'+e.target.id+'"\n                    title="'+e.target.label+"("+e.target.endpointId+')"\n                    type="text"\n                    class="tq-ui-property-button tq-lg-dm-target-button">\n                    '+e.target.label+"\n                </div>\n            </div>\n        "}function r(){p=!1,g.style.display=null,m.classList.add(b),t(),setTimeout(function(){c.trigger("size-changed")},0)}function a(){p=!0,g.style.display="none",m.classList.remove(b),setTimeout(function(){c.trigger("size-changed")},0)}function s(e){function i(e){var i=0;e.pageX?i=e.pageX:e.clientX&&(i=e.clientX);var n=r-i;r=i,f+=n,f=Math.max(o,f),c.trigger("size-changed"),t()}function n(e){c._mouseMove&&(i(e,!0),c._mouseMove=!1),document.body.onmousemove=document.body.onmouseup=null,document.body.removeEventListener("mousemove",i),document.body.removeEventListener("mouseup",n)}var r=0,o=100;e.pageX?r=e.pageX:e.clientX&&(r=e.clientX),window.getSelection().removeAllRanges(),document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",n)}function d(e){h=e,t()}l["default"].apply(this);var c=this;e||(e={});var h=e.selectedElement,f=250,p=!0;c.rootHtml=o(e.baseElement);var g=document.createElement("DIV");g.className="tq-lg-dm-property-pane-container",c.rootHtml.appendChild(g);var m=e.triggerButton;m.onclick=function(){p?r():a()};var v=document.createElement("DIV");v.className="tq-lg-dm-slider",v.addEventListener("mousedown",function(e){s(e)}),g.appendChild(v);var y=document.createElement("DIV");y.setAttribute("title","Close info panel"),y.className="tq-lg-dm-hide-button",y.onclick=function(){a()},g.appendChild(y),c.body=document.createElement("DIV"),g.appendChild(c.body),c.id="derivationMapInfoPanel",c.redraw=t,c.setSelectedElement=d,c.show=r,c.hidde=a,t();var b="tq-ui-selected"}function o(e){var t=void 0;return"string"==typeof e?t=document.getElementById(e):"object"===("undefined"==typeof e?"undefined":a(e))&&(t=e),t}Object.defineProperty(i,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.DMInfoPanel=r;var s=e("../subscriptionAPI/subscribeable"),l=n(s),u=e("../jointViews/derivationMap/mapElements");i["default"]=r},{"../jointViews/derivationMap/mapElements":43,"../subscriptionAPI/subscribeable":66}],34:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e){function t(e,t){var i=[];return e.resource?t.forEach(function(t){t.resource===e.resource&&i.push(t)}):i.push(e),i}function i(e,i){var n=i.maps.sourceMap,r=i.maps.targetMap,o=i.maps.nodeMap,a=t(e,i.nodes).map(function(e){return e.id}),s=[],l=[];if(a.forEach(function(e){n[e]&&(s=s.concat(n[e].map(function(e){var t=o[e.source];return{id:t.id,label:t.label}}))),r[e]&&(l=l.concat(r[e].map(function(e){var t=o[e.target];return{id:t.id,label:t.label}})))}),s&&s.length>0||l&&l.length>0)return{incomings:s,outgoings:l}}c["default"].apply(this);var n=new u["default"].InfoPanel({launchExternal:e.lineageGram.launchExternal}),r=e.lineageGram;u["default"].FlyingPanel.apply(this,[{baseElement:e.baseElement,active:e.active,header:"Info panel",triggerButton:e.triggerButton,launchExternal:e.onPressExternal,emptyBody:!1,size:{width:"300px",height:"450px"},body:n,resizable:!0}]),r.on("selected-element-changed",function(e){var t=r.getGraphModel(),o=t.maps.nodeMap;if(e){var a=o[e.source],l=o[e.target],u=void 0;if(e.linkType&&e.group?(u={},e.group.forEach(function(e){return u=s.merge(u,e.data)})):u=s.cloneDeep(e.data)||{},e.linkType)if(e.linkType&&!e.group)u["Link type"]=e.linkType;else{var d={};e.group.forEach(function(e){return d[e.linkType]=e});var c=Object.keys(d);c.length>1?(u["Link type"]=e.linkType,u["Grouped types"]=c.join(", ")):u["Link type"]=c[0],u.IDs=e.group.map(function(e){return e.id}).join(", ")}e.activeResource&&(u["Active Resource"]=decodeURIComponent(e.activeResource)),e.offset&&(u.Offset=e.offset),e.viewFrame&&(u["View frame"]=e.viewFrame),n.setSelectedElement({id:e.id,label:e.label,resource:e.resource,resourceType:e.resourceType,diagramType:e.diagramType,types:e.typeId,source:a?{id:a.id,label:a.label}:void 0,target:l?{id:l.id,label:l.label}:void 0,data:u,relations:i(e,t)})}else n.setSelectedElement(void 0)}),n.on("selected-element-changed",function(e){r.setSelectedElement(e)})}Object.defineProperty(i,"__esModule",{value:!0}),i.InfoPanel=o;var a=e("lodash"),s=r(a),l=e("visualizations-library"),u=n(l),d=e("../subscriptionAPI/subscribeable"),c=n(d);i["default"]=o},{"../subscriptionAPI/subscribeable":66,lodash:"lodash","visualizations-library":5}],35:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t='\n        <div id="mapButton" class="tq-lg-map">\n            <span title="Mini map" class="tq-lg-collapse-panel_body__label glyphicon glyphicon-picture" aria-hidden="true"></span>\n        </div>\n        <div id="baseElementForMap"></div>\n    ',i=e.lineageGram,n=void 0;if("string"==typeof e.baseElement?n=document.getElementById(e.baseElement):"object"===o(e.baseElement)&&(n=e.baseElement),n){n.innerHTML=t;var r=new s["default"].FlyingPanel({baseElement:n.querySelector("#baseElementForMap"),active:e.active,header:"Map",triggerButton:n.querySelector("#mapButton"),emptyBody:!1,size:{width:"250px",height:"250px"},position:e.position,body:"",resizable:!0});i.setRootHtmlForMap(r.rootHtml.querySelector(".tq-ui-body_container")),r.on("size-changed",function(){i.refresh("graphMap")})}}Object.defineProperty(i,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.Map=r;var a=e("visualizations-library"),s=n(a);i["default"]=r},{"visualizations-library":5}],36:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){a["default"].apply(this);var t=e.legends||[],i=e.lineageGram,n=this;l["default"].FlyingPanel.apply(this,[{baseElement:e.baseElement,active:e.active,header:"Options panel",triggerButton:e.triggerButton,emptyBody:!0,size:{width:"400px",height:"500px"},removeBackground:!0,body:new l["default"].TabPanel({tabs:[{id:"tqUiGeneral",label:"General",body:'\n                        <label for="displayGroup" class="tq-label">Display</label>\n                        <div id="displayGroup" class="tq-ui-group">\n                            <div class="tq-ui-group__select-line">\n                                <select id="tqUiOrientation" size="1" name="orientation">\n                                    <option value="left-to-right">left to right</option>\n                                    <option value="right-to-left">right to left</option>\n                                    <option value="top-to-bottom">top to bottom</option>\n                                    <option value="bottom-to-top">bottom to top</option>\n                                </select>\n                                <span> - Graph orientation</span>\n                            </div>\n                            <div class="tq-ui-group__select-line">\n                                <select id="tqUiRouting" size="1" name="routing">\n                                    <option value="metro">Metro</option>\n                                    <option value="lgrouter">RailRoad</option>\n                                    <option value="normal">Normal</option>\n                                    <option value="manhattan">Manhattan</option>\n                                </select>\n                                <span> - Link routing</span>\n                            </div>\n                            <div class="tq-ui-group__select-line">\n                                <select id="tqUiLayout" size="1" name="layout">\n                                    <option value="sankey">Sankey</option>\n                                    <option value="flow-directed">Flow-directed</option>\n                                </select>\n                                <span> - Layout algorithm</span>\n                            </div>\n                            <div class="tq-ui-group__check-box-line">\n                                <span><input id="tqUiExpandCollapse" type="checkbox"></span>\n                                <span>Expand node containers to show full text labels</span>\n                            </div>\n                            <div class="tq-ui-group__check-box-line">\n                                <span><input id="tqUiClipNodes" type="checkbox"></span>\n                                <span>Nodes trimming on borders</span>\n                            </div>\n                        </div>\n                        <label for="exportGroup" class="tq-label">Export as</label>\n                        <div id="exportGroup" class="tq-ui-group tq-ui-export-group">\n                            <button id="tqUiExportSVG" title="Export diagram to SVG" class="tq-button">SVG</button>\n                            <button id="tqUiExportPNG" title="Export diagram to PNG" class="tq-button">PNG</button>\n                            <button id="tqUiPrint" title="Print" class="tq-button">\n                                <span class="glyphicon glyphicon-print"></span>\n                            </button>\n                        </div>\n                        <label for="howToUseGroup" class="tq-label">How to use</label>\n                        <div id="howToUseGroup" class="tq-ui-group tq-ui-opt-group">\n                            <button id="tqUiHelpBtn" title="Help" class="tq-button">\n                                <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>\n                            </button>\n                            <a class="tq-button" title="Documentation" href="./documentation/index.html">DOC</a>\n                        </div>\n                    '},{id:"tqUiLegends",label:"Legends",body:new l["default"].Legends({legends:t})}]})}]);var r=n.rootHtml.querySelector("#tqUiExportSVG"),o=n.rootHtml.querySelector("#tqUiExportPNG"),s=n.rootHtml.querySelector("#tqUiPrint"),u=n.rootHtml.querySelector("#tqUiExpandCollapse"),d=n.rootHtml.querySelector("#tqUiOrientation"),c=n.rootHtml.querySelector("#tqUiRouting"),h=n.rootHtml.querySelector("#tqUiLayout"),f=n.rootHtml.querySelector("#tqUiClipNodes"),p=n.rootHtml.querySelector("#tqUiHelpBtn");i.on("current-view-changed",function(e){r.disabled="lineageDiagram"!==e,u.disabled="lineageDiagram"!==e}),r.onclick=function(){i["export"]({type:"svg",view:"lineageDiagram"})},o.onclick=function(){i["export"]({type:"png"})},s.onclick=function(){i.print()},u.onchange=function(){u.checked?i.expandAllNodes():i.collapseAllNodes()},d.value=i.getOrientation(),d.onchange=function(){i.setOrientation(d.value)},c.value=i.getRouting(),c.onchange=function(){i.setRouting(c.value)},h.value=i.getLayoutAlgorithm(),h.onchange=function(){i.setLayoutAlgorithm(h.value)},p.onclick=e.onPressHelp,f.checked=i.getClipping(),f.onchange=function(){i.setClipping(f.checked)},p.onclick=e.onPressHelp}Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsPanel=r;var o=e("../subscriptionAPI/subscribeable"),a=n(o),s=e("visualizations-library"),l=n(s);
i["default"]=r},{"../subscriptionAPI/subscribeable":66,"visualizations-library":5}],37:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e,t){function i(e){function t(e,t){e=e||window.event;var i=0;a?e.pageX?i=e.pageX:e.clientX&&(i=e.clientX):e.pageY?i=e.pageY:e.clientY&&(i=e.clientY);var n=i-l;l=i,o.trigger("splitter-position-changed",{diff:r(n),lastChange:t})}function i(e){t(e,!0),document.body.onmousemove=document.body.onmouseup=null,document.body.removeEventListener("mousemove",t),document.body.removeEventListener("mouseup",i)}e=e||window.event,l=0,window.getSelection().removeAllRanges(),a?e.pageX?l=e.pageX:e.clientX&&(l=e.clientX):e.pageY?l=e.pageY:e.clientY&&(l=e.clientY),document.body.addEventListener("mousemove",t),document.body.addEventListener("mouseup",i)}function n(){var t=e.viewFrameA;e.viewFrameA=e.viewFrameB,e.viewFrameB=t}function r(e){if(0!==e){var i=o.model.viewFrameA,n=o.model.viewFrameB,r=void 0,s=void 0,l=void 0;a?(r=i.size.width,s=n.size.width,l=2*t.framePadding.x+1):(r=i.size.height,s=n.size.height,l=2*t.framePadding.y+1);var u=r+e,d=s-e,c=0,h=0;if(!(u<l&&d<l)){if(u<l&&(c=l-u),d<l&&(h=d-l),0!==c||0!==h){var f=Math.abs(c)>Math.abs(h)?e+c:e+h,p=r+f,g=s-f;if(p<l||g<l)return;return f}return e}}}u["default"].apply(this);var o=this,a="left-to-right"===t.graphOrientation||"right-to-left"===t.graphOrientation,s=!0;o.model=e,"right-to-left"!==t.graphOrientation&&"bottom-to-top"!==t.graphOrientation||n(),o.el=document.createElement("DIV"),o.el.className=a?"tq_lineage_ui__view-frame-splitter":"tq_lineage_ui__view-frame-splitter-vertical",o.el.addEventListener("mousedown",i);var l=0;o.updateNeighbour=function(e){o.model.viewFrameB!==e&&(o.model.viewFrameB=e)},o.hide=function(){s&&(o.el.style.display="none",s=!1)},o.show=function(){s||(o.el.style.display="",s=!0)}}Object.defineProperty(i,"__esModule",{value:!0}),i.Splitter=o;var a=e("rappid"),s=r(a),l=e("../subscriptionAPI/subscribeable"),u=n(l);o.prototype=Object.create(s.shapes.basic.Rect.prototype),i["default"]=o},{"../subscriptionAPI/subscribeable":66,rappid:"rappid"}],38:[function(e,t,i){"use strict";function n(e){function t(){function e(e){var t=document.createElement("BUTTON");return t.className="tq-ui-toolbar__button tq-ui-colored-button",e.isOverView?(t.classList.add("tq-ui-colored-buttons-overview"),t.onclick=function(){l[e.id]?s.setFullScreenMode(!1):s.setFullScreenMode(!0)}):(t.innerHTML="<span>"+n(e.label)+"</span>",t.style.backgroundColor=e.backgroundColor||"white",t.style.borderColor=e.borderColor||"black",t.style.color=e.borderColor||"black",t.onclick=function(){l[e.id]?s.collapseViewFrame(e.id):s.expandViewFrame(e.id)}),l[e.id]=e.expanded,t}var t=s.getViewFrames(),r=s.getOverViewFrame();l={},u={},a.rootHtml.innerHTML="",r&&(d=e(r),d.style.borderColor=null,d.style.backgroundColor=null,d.style.color=null,d.classList.add("tq-ui-colored-buttons-overview"),a.rootHtml.appendChild(d)),t.forEach(function(t){if(t.id!==r.id){var i=e(t);u[t.id]=i,a.rootHtml.appendChild(i)}}),i()}function i(){function e(e){var t=u[e.id];l[e.id]?(t.title="Collapse "+e.label,t.classList.remove("tq-ui-selected")):(t.title="Expand "+e.label,t.classList.add("tq-ui-selected"))}var t=s.getViewFrames(),i=s.getOverViewFrame();i&&(l[i.id]=i.active,d.innerHTML="<span>"+(i.active?"F":"O")+"</span>",i.active?(d.title="Switch to Frames mode",a.rootHtml.classList.add("tq-ui-colored-buttons-collapsed")):(d.title="Switch to single frame mode",a.rootHtml.classList.remove("tq-ui-colored-buttons-collapsed"))),t.forEach(function(t){t.id!==i.id&&(l[t.id]=t.expanded,e(t))})}function n(e){if(e){var t=e.match(/[a-z'\-]+/gi);return t.filter(function(e){return"and"!==e.toLowerCase()&&"&"!==e}).map(function(e){return e[0]}).join("")}}function o(){var e=document.createElement("DIV");return e.className="tq-ui-colored-buttons-list",e.innerHTML="",e}var a=this;if(!e)throw Error("The arguments parameters shouldn't be undefined!");if(!e.lineageGram)throw Error("lineageGram field is undefined!");a.rootHtml=o(),a.id=e.lineageGram.id||"coloredButtons-"+r++,a.rootHtml.id=a.id;var s=e.lineageGram,l={},u={},d=void 0;t(),s.on("view-frame-state-changed",i),s.on("history-state-changed",t)}Object.defineProperty(i,"__esModule",{value:!0}),i.ViewFrameButtons=n;var r=0;i["default"]=n},{}],39:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){function i(){n(),o(),m.forEach(function(e){e.customeSized?(e.size.width&&(y[e.id].style.width=e.size.width+"px"),e.size.height&&(y[e.id].style.height=e.size.height+"px"),y[e.id].style.flexGrow=0):y[e.id].style.flexGrow=e.spaceShare})}function n(){m=g.getViewFrames();var e=(0,d.arrayToMap)(m);x.forEach(function(t){t.model.viewFrameA=e[t.model.viewFrameA.id],t.model.viewFrameB=e[t.model.viewFrameB.id]}),v=(0,d.arrayToMap)(m)}function r(){if(h){h.innerHTML="",w=document.createElement("DIV"),w.className="tq_lineage_ui",h.appendChild(w),x=[],w.innerHTML="",y={},b={};var e=.5;"right-to-left"===t.graphOrientation?w.style.flexDirection="row-reverse":"top-to-bottom"===t.graphOrientation?w.style.flexDirection="column":"bottom-to-top"===t.graphOrientation?w.style.flexDirection="column-reverse":w.style.flexDirection="row",m.forEach(function(i,n,r){var o=document.createElement("DIV");o.id=(0,u.cacheIdForViewFrameUI)(i),f?o.className="tq_lineage_ui_view-frame_"+t.graphOrientation:o.className="tq_lineage_ui_view-frame_"+t.graphOrientation,i.customeSized?(i.size.width&&(o.style.width=i.size.width+"px"),i.size.height&&(o.style.height=i.size.height+"px"),o.style.flexGrow=0):o.style.flexGrow=i.spaceShare,w.appendChild(o);var a=document.createElement("IMG");a.className="tq_lineage_ui__button tq_lineage_ui__up-button",a.onclick=function(){var t=v[i.id],n=t.viewPortPosition;c.trigger("view-port-position-changed",{id:i.id,viewPortPosition:{x:n.x,y:n.y-t.size.height*e}})},o.appendChild(a);var s=document.createElement("IMG");s.className="tq_lineage_ui__button tq_lineage_ui__down-button",s.onclick=function(){var t=v[i.id],n=t.viewPortPosition;c.trigger("view-port-position-changed",{id:i.id,viewPortPosition:{x:n.x,y:n.y+t.size.height*e}})},o.appendChild(s);var d=document.createElement("IMG");d.className="tq_lineage_ui__button tq_lineage_ui__left-button",d.onclick=function(){var t=v[i.id],n=t.viewPortPosition;c.trigger("view-port-position-changed",{id:i.id,viewPortPosition:{x:n.x-t.size.width*e,y:n.y}})},o.appendChild(d);var h=document.createElement("IMG");h.className="tq_lineage_ui__button tq_lineage_ui__right-button",h.onclick=function(){var t=v[i.id],n=t.viewPortPosition;c.trigger("view-port-position-changed",{id:i.id,viewPortPosition:{x:n.x+t.size.width*e,y:n.y}})},o.appendChild(h);var p=document.createElement("IMG");if(p.className="tq_lineage_ui__button tq_lineage_ui__collapse-button",p.onclick=function(){c.trigger("view-frame-collapsed",{id:i.id,expanded:!1})},o.appendChild(p),b[i.id]={up:a,down:s,left:d,right:h},n!==r.length-1){var g=new l["default"]({viewFrameA:i,viewFrameB:r[n+1]},t);x.push(g),w.appendChild(g.el),g.on("splitter-position-changed",function(e){c.trigger("splitter-position-changed",[g,e])})}y[i.id]=o}),o()}}function o(){h&&(s(),m.forEach(function(e){var t=(0,u.checkPagination)(e);y[e.id].style.display=e.active?"":"none";var i=b[e.id].up,n=b[e.id].down,r=b[e.id].left,o=b[e.id].right;i.style.cursor=t.canMoveUp?"pointer":"not-allowed",n.style.cursor=t.canMoveDown?"pointer":"not-allowed",r.style.cursor=t.canMoveLeft?"pointer":"not-allowed",o.style.cursor=t.canMoveRight?"pointer":"not-allowed",i.style.opacity=t.canMoveUp?"":"0.03",n.style.opacity=t.canMoveDown?"":"0.03",r.style.opacity=t.canMoveLeft?"":"0.03",o.style.opacity=t.canMoveRight?"":"0.03"}))}function s(){function e(e){if(e.model.viewFrameA.active){var i=t(e.model.viewFrameA.id);i?(e.updateNeighbour(i),e.show()):e.hide()}else e.hide()}function t(e){if(!e)return null;var t=n.indexOf(e);return t>=0&&t<n.length-1?i[t+1]:null}var i=m.filter(function(e){return e.active}).sort(function(e,t){var i=e.position,n=t.position;return p?i.x-n.x:i.y-n.y}),n=i.map(function(e){return e.id});if(f)x.forEach(function(t){e(t)});else for(var r=x.length-1;r>=0;r--)e(x[r])}a["default"].apply(this);var c=this,h=e.rootEl,f="right-to-left"===t.graphOrientation||"bottom-to-top"===t.graphOrientation,p="left-to-right"===t.graphOrientation||"right-to-left"===t.graphOrientation,g=e.viewManager,m=g.getViewFrames()||[],v=(0,d.arrayToMap)(m),y=void 0,b=void 0,x=void 0,w=void 0;r(),c.refresh=i,c.setViewManager=function(e){g=e,m=g.getViewFrames(),r()},c.setOrientation=function(e){f="right-to-left"===e||"bottom-to-top"===e,p="left-to-right"===e||"right-to-left"===e,r()}}Object.defineProperty(i,"__esModule",{value:!0}),i.ViewFramesUI=r;var o=e("../subscriptionAPI/subscribeable"),a=n(o),s=e("./splitter"),l=n(s),u=e("../utils/lineageDiagramUtils"),d=e("../utils/utils");i["default"]=r},{"../subscriptionAPI/subscribeable":66,"../utils/lineageDiagramUtils":69,"../utils/utils":70,"./splitter":37}],40:[function(e,t,i){"use strict";function n(e,t){var i=a(e.nodes,t),n=l(i,t),s=r(e.edges,n);if(0===s.length&&2===i.length){var u=i.map(function(e){return e.id}),d=n.filter(function(e){return u.indexOf(e.id)!==-1});s.push({source:d[0],target:d[1],label:""})}var h=o(s,t),f=h.map(function(e){return new c.Link(e,t)});return{elements:n,links:f}}function r(e,t){function i(e){return e.source+"~#tqDMLink#~"+e.target}if(!e)return[];var n={};t.forEach(function(e){n[e.endpointId]?n[e.endpointId].push(e):n[e.endpointId]=[e]});var r={},o=[];return e.forEach(function(e){var t=n[e.source],a=n[e.target];if(t&&a){var s=i(e);r[s]||(r[s]=e,t.forEach(function(t){a.forEach(function(i){o.push({source:t,target:i,label:e.label||u(e.id),typeId:e.id})})}))}}),o}function o(e,t){function i(e,t){return e+"~#tqDMLink#~"+t}var n={},r={};return e.forEach(function(e){var t=e.typeId||e.label,o=i(t,e.source.id);n[o]||(n[o]=[],n[o].source=e.source,n[o].label=e.label,n[o].typeId=t),n[o].push(e);var a=i(t,e.target.id);r[a]||(r[a]=[],r[a].target=e.target,r[a].label=e.label,r[a].typeId=t),r[a].push(e)}),Object.keys(n).forEach(function(e){var i=n[e],r=i.length>1?i:[],o=new c.GraphCrossNode({crossedElements:r}),a=new c.GraphLink({source:i.source,target:o,label:i.label,typeId:i.typeId,crossedElements:r},t);r.forEach(function(e){var t=new c.GraphCrossLink({typeId:i.typeId,source:o,target:e.target,label:""});e.graphPrimitives=[o,a,t],e.groupedBy="source"},t)}),Object.keys(r).forEach(function(e){var i=r[e],n=i.length>1?i.filter(function(e){return!e.graphPrimitives}):[],o=new c.GraphCrossNode({crossedElements:n}),a=new c.GraphCrossLink({source:o,target:i.target,label:i.label,typeId:i.typeId,crossedElements:n},t);n.forEach(function(e){var n=new c.GraphLink({typeId:i.typeId,source:e.source,target:o,label:""},t);e.graphPrimitives=[o,n,a],e.groupedBy="target"})}),e}function a(e,t){function i(e){var t={};e.children=e.children.filter(function(e){return!d[e.id]&&!t[e.id]&&(t[e.id]=!0,d[e.id]=!0,i(e),d[e.id]=!1,!0)})}var n={},r={},o={},a=new h.ResourceProvider(t);e.forEach(function(e){if(e.id){var t=o[e.id],i=a.getIcon(e.type),l=r[e.id]||s(e,t,i);r[e.id]=l,delete o[e.id],e.parent?r[e.parent]?r[e.parent].children.push(l):(o[e.parent]||(o[e.parent]=[]),o[e.parent].push(l)):n[e.id]||(n[e.id]=l)}}),Object.keys(o).forEach(function(e){n[e]=s({id:e,label:u(e),children:o[e]})});var l=Object.keys(n).map(function(e){return n[e]}),d={};return l.filter(function(e){return!d[e.id]&&(d[e.id]=!0,i(e),d[e.id]=!1,!0)})}function s(e,t,i){return{id:(0,d.uniqueId)("mapElement"),endpointId:e.id,label:e.label||u(e.id),children:t||[],resourceType:e.resourceType||"undefined",resource:e.resource||"undefined",type:e.type||"undefined",collapsed:e.collapsed,icon:e.icon||i}}function l(e,t){function i(e,t){var n=t||{};if(!n[e.id]){var r=(0,d.clone)(e);r.id=(0,d.uniqueId)("copyOfMapElement"),n[e.id]=r,r.children=e.children.map(function(e){return i(e,n)})}return n[e.id]}function n(e,t){return{id:(0,d.uniqueId)("Group"),label:"Group",endpointId:"none",children:[e,t],synthetic:!0,collapsed:!0}}function r(e,t){e.children.push(t)}var o=[],a={},s={};return e.forEach(function(e){function t(o){return a[o.id]?(a[o.id].synthetic||e.id===a[o.id].id?r(a[o.id],e):(delete s[e.id],delete s[a[o.id].id],a[o.id]=n(a[o.id],e),s[a[o.id].id]=a[o.id]),i(o)):(a[o.id]=e,s[e.id]=e,o.children=o.children.map(function(e){return t(e)}),o)}t(e)}),Object.keys(s).forEach(function(e){function i(e,n){if(!a[e.id]){var s=(0,d.cloneDeep)(e);s.orderedPossibleIds=n,s.graphNode=r,a[e.id]=new c.Node(s,t),a[e.id].children=e.children.map(function(t){return i(t,n.concat([e.id]))}),o.push(a[e.id])}return a[e.id]}var n=s[e],r=new c.GraphNode(n,t),a={};i(n,[])}),o}function u(e){var t=e.split("/"),i=t[t.length-1];if(i)return i;var n=e.indexOf("#");if(n!==-1){var r=e.substring(n,e.length-1);return r}return e}Object.defineProperty(i,"__esModule",{value:!0}),i.processData=n;var d=e("lodash"),c=e("./mapElements"),h=e("../../data/resourceProvider");i["default"]=n},{"../../data/resourceProvider":30,"./mapElements":43,lodash:"lodash"}],41:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(){return{defaultElementWidth:250,defaultElementHeight:250,defaultLinkLabelLength:100,defaultLayoutStep:150,linkStyles:{"default-link-style":v.DEFAULT_DERIVATION_MAP_LINK_STYLE},icons:{"SQL script":"glyphicon glyphicon-cog","Database Table":"glyphicon glyphicon-folder-close"},tools:[],errorCallBack:void 0}}function a(e,t){function i(e){if(r(void 0),!e){var t="The relation you want to use is empty!",i=new Error(t);throw a("error",t),b(i),i}w.relation&&e.source===w.relation.source&&e.target===w.relation.target&&e.linkType===w.relation.linkType?w.resetFocus():(P.clear(),w.relation=e,a("fetching"),E.relationInfo(e).then(function(e){a("rendering"),(0,y.checkDmRawData)(e),M=e.diagramInfo;var t=(0,h["default"])(e,v);P.setElements(t.elements.concat(t.links),M),w.resetFocus(),n(),a("completed")})["catch"](function(e){var t="string"==typeof e?new Error(e):e;a("error",t.message),b(t),console.error(t.message),console.error(t.stack)}))}function n(){P.getNodes().forEach(function(e){e.on("element-click",function(){r(e)}),e.on("collapse-button-click",function(){var t=e.getModel();t.collapsed?e.expand():e.collapse()})}),P.getLinks().forEach(function(e){e.on("element-click",function(){r(e)})})}function r(e){A&&A.highlighting(!1),A=e,A&&A.highlighting(!0),S.infoPanel.setSelectedElement(e),w.trigger("selected-element-changed",s(e))}function a(e,t){w.state=e,"fetching"===e?k.setState("active",t||"Fetching data"):"rendering"===e?k.setState("active",t||"Rendering graph"):"completed"===e?k.setState("completed"):"error"===e&&k.setState("error",t||"Error has occurred!"),w.trigger("diagram-state-changed",t||e)}function s(e){return e instanceof p.Node?{id:e.id,label:e.label,resource:e.resource,parent:e.parent,resourceType:e.resourceType,diagramType:"node",endpointId:e.endpointId}:e instanceof p.Link?{id:e.id,source:e.source.endpointId,target:e.target.endpointId,diagramType:"link",typeId:e.typeId}:void 0}function u(e){e.innerHTML="",e.tabIndex=1;var t=document.createElement("DIV");t.className="tq-row-container",e.appendChild(t);var i=document.createElement("DIV");i.className="tq-derivation-map",i.id="tq-derivation-map",t.appendChild(i);var n=document.createElement("DIV");n.className="tq-derivation-map-diagram",n.id="tq-derivation-map-diagram",i.appendChild(n);var r=document.createElement("DIV");r.className="tq-lg-progress-screen",i.appendChild(r);var o=document.createElement("DIV");o.className="tq-derivation-map__toolbar",o.id="tq-derivation-map-toolbar",i.appendChild(o);var a=document.createElement("DIV");return a.className="tq-row-container__properties-pane",a.id="tq-properties-pane",t.appendChild(a),{container:e,baseDiv:i,infoPanel:a,toolbar:o,derivationMapRootHtml:n,progress:r}}var c=this;x["default"].apply(this);var f=o(),v=d.merge(f,t||{}),b=function(e){if(v.errorCallback&&v.errorCallback instanceof Function){var t="string"==typeof e?new Error(e):e;v.errorCallback.call(c,t)}},w=this,E=e.dataProvider,_=u(e.rootElement),P=new g.MapLayout({rootElement:_.derivationMapRootHtml},v),k=new l["default"].ProgressScreen({baseElement:_.container}),A=void 0,M=void 0,S=new m.DMDefaultUI({baseElement:_.toolbar,infoPanel:_.infoPanel,tools:v.tools||null,derivationMap:w});e.relation&&i(e.relation),w.relation,w.openWithRelation=i,w.resetFocus=function(){P.zoom()},w.getSelectedElement=function(){return A},w.setSelectedElement=function(e){var t=P.getNodes().find(function(t){return t.id===e});r(t)},w.setSearchKey=function(e){P.setSearchKey(e)},w.expandAllElements=function(){P.getNodes().forEach(function(e){e.expand()})},w.collapseAllElements=function(){P.getNodes().forEach(function(e){e.collapse()})},w.exportToSvg=function(){P["export"]({type:"svg"})},w.exportToPng=function(){P["export"]({type:"png"})},w.zoomIn=function(){P.zoom(.2,{max:4})},w.zoomOut=function(){P.zoom(-.2,{min:.2})},w.zoomToFit=function(){P.zoom()},w.print=function(){P.print()},w.getDiagramInfo=function(){return M},P.on("blank-click",function(){return r(void 0)})}Object.defineProperty(i,"__esModule",{value:!0}),i.getDefaultParametersSet=o,i.DerivationMap=a;var s=e("visualizations-library"),l=r(s),u=e("lodash"),d=n(u),c=e("./dataProcessing"),h=r(c),f=e("./mapElements"),p=n(f),g=e("./mapLayout"),m=e("../../htmlUI/dmDefaultUI"),v=e("../../data/resourceProvider"),y=e("../../utils/dataUtils"),b=e("../../subscriptionAPI/subscribeable"),x=r(b);i["default"]=a},{"../../data/resourceProvider":30,"../../htmlUI/dmDefaultUI":32,"../../subscriptionAPI/subscribeable":66,"../../utils/dataUtils":67,"./dataProcessing":40,"./mapElements":43,"./mapLayout":44,lodash:"lodash","visualizations-library":5}],42:[function(e,t,i){"use strict";function n(e,t){var i=t[0],n=t[t.length-1];return t.length>0&&(0,l.getDist)(i,e)>(0,l.getDist)(n,e)&&t.reverse(),t}function r(e){for(var t=0,i=0;i<e.length-1;i++){var n=e[i],r=e[i+1];t+=(0,l.getDist)(n,r)}return t}function o(e){return""+e.x+":"+e.y}function a(e){function t(e,t,i){var n=(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x);return n<0}function i(e){return e.x+":"+e.y}var n=[].concat(e);n.sort(function(e,t){return e.x!=t.x?e.x-t.x:e.y-t.y});for(var r=n.length,o=[],a=0;a<2*r;a++){for(var s=a<r?a:2*r-1-a;o.length>=2&&t(o[o.length-2],o[o.length-1],n[s]);)o.pop();o.push(n[s])}o.pop();var l={};return o.filter(function(e){var t=i(e);return!l[t]&&(l[t]=e,!0)})}Object.defineProperty(i,"__esModule",{value:!0}),i.dmrouter=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=e("../../utils/utils"),u=e("../../utils/lineageDiagramUtils"),d=10;i.dmrouter=function(){return function(e,t,i){function c(e,t){for(var c=i.model.graph.getElements().map(function(t){var i=t.getBBox(),n=i.center();return{el:t,rect:i,distA:(0,l.getDist)(n,e)}}).sort(function(e,t){return e.dist>t.dist?-1:e.dist<t.dist?1:0}),h={p1:e,p2:t},f=0;f<c.length;f++){var p=c[f],g=p.rect,m=[{p1:{x:g.x,y:g.y},p2:{x:g.x+g.width,y:g.y}},{p1:{x:g.x,y:g.y},p2:{x:g.x,y:g.y+g.height}},{p1:{x:g.x,y:g.y+g.height},p2:{x:g.x+g.width,y:g.y+g.height}},{p1:{x:g.x+g.width,y:g.y},p2:{x:g.x+g.width,y:g.y+g.height}}],v=m.map(function(e){return(0,u.getCrosPoint)(h.p1,h.p2,e.p1,e.p2)}).filter(function(e){return e}),y=0!==v.length;if(y){var b=function(){var i=[{x:g.x-d,y:g.y-d},{x:g.x+g.width+d,y:g.y-d},{x:g.x+g.width+d,y:g.y+g.height+d},{x:g.x-d,y:g.y+g.height+d}],s=i.concat([e,t]),l=a(s),u=l.map(function(e){return o(e)}),c=u.indexOf(o(e)),h=u.indexOf(o(t)),f=[];if(c!==-1&&h!==-1){for(var p=c;p!==h&&(p>=l.length&&(p=0),p!==c&&p!==h&&f.push(l[p]),!(f.length>=l.length));p++);var m=l.filter(function(e,t){return t!==c&&t!==h&&f.indexOf(e)===-1});f=n(e,f),m=n(e,m);var v=[e].concat(f).concat(t),y=[e].concat(m).concat(t),b=r(v),x=r(y),w=b<x?f:m;return{v:w}}}();if("object"===("undefined"==typeof b?"undefined":s(b)))return b.v}}return[]}return this._findConnectionPoints([]),c(this.sourcePoint,this.targetPoint)}}()},{"../../utils/lineageDiagramUtils":69,"../../utils/utils":70}],43:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e,t){function i(){return o.elementsMap[r.id]}function n(){var e=i();if(!e.invisible)return r.id;for(var t=0;t<r.orderedPossibleIds.length;t++){var n=r.orderedPossibleIds[t];if(o.elementsMap[n].invisible){var a=r.orderedPossibleIds[t-1];return a}}return r.orderedPossibleIds[r.orderedPossibleIds.length-1]}m["default"].apply(this);var r=this,o=e.graphNode||new s(e.model,t);r.id=e.id,r.endpointId=e.endpointId,r.resourceType=e.resourceType,r.parent=e.parent,r.label=e.label,r.children=e.children,r.orderedPossibleIds=e.orderedPossibleIds,r.resource=e.resource,r.highlighting=function(e){return void 0!==e&&(e?o.setHighlightedId(r.id):r.id===o.highlightedId&&o.setHighlightedId(void 0)),o.highlightedId===r.id},r.collapse=function(){o._collapseElement(r.id)},r.expand=function(){o._expandElement(r.id)},r.show=function(){},r.hide=function(){},r.isVisible=function(){return!0},r.getCells=function(){return[o]},r.getPort=function(){return{id:n(),primitive:o}},r.getModel=i,r.getPortPosition=function(e){var t=o.attr("."+c(n(),e)),i=r.getPort().primitive.position();return t?{x:t["ref-x"]+i.x,y:t["ref-y"]+i.y}:i},r.onPaperCellPointerDown=function(){},o.on("ports-state-changed",function(){r.trigger("ports-state-changed")}),o.on("elements-state-changed",function(){r.trigger("element-state-changed")}),o.on("body-click",function(e){var t=e.event,i=e.elementId;r.id===i&&r.trigger("element-click",t)}),o.on("change:position",function(){r.trigger("position-changed")}),o.on("collapse-button-click",function(e){e===r.id&&r.trigger("collapse-button-click")})}function a(e,t){function i(){var e=v.length>1;return e?v[0]:void 0}function n(){var e=i();if(e){var t=e.getCrossedElements(),n=t[0],r="source"===n.groupedBy,o=30,a=0,s=1/0,l=-(1/0);t.forEach(function(e){var t=r?e.target.getPortPosition("in"):e.source.getPortPosition("out");a+=t.y,s=Math.min(s,t.x),l=Math.max(l,t.x)});var u=r?s-o:l+o,d=a/t.length;e.position(u,d)}}function r(){return p.util.breakText(s.label,{width:t.defaultLinkLabelLength},{"font-size":w})}function o(){var e=a(),t=e.targetTopId,i=e.source,r=e.target,o=v[1]||v[0],s=v[2]||v[0],l=s.getLinkStyle();r.id===t?(s.attr(".marker-target",h(l)),s.trigger("updateMarkers")):(s.removeAttr(".marker-target"),s.trigger("updateMarkers")),o.prop({source:i}),s.prop({target:r}),n()}function a(){var e=s.source.getPort(),t=s.target.getPort(),i=e.primitive.position(),n=t.primitive.position(),r=i.x>n.x,o={id:e.primitive.id,port:c(e.id,r?"in":"out")},a={id:t.primitive.id,port:c(t.id,r?"out":"in")};return{sourceTopId:e.id,targetTopId:t.id,source:o,target:a}}m["default"].apply(this);var s=this;s.source=e.source,s.target=e.target,s.label=e.label,s.typeId=e.typeId,s.groupedBy=e.groupedBy;var l=a(),d=l.source,f=l.target,g=e.graphPrimitives&&e.graphPrimitives.length>0,v=g?e.graphPrimitives:[new u({typeId:e.typeId,source:d,target:f,label:r()},t)];o(),s.getCells=function(){return v};var y=!1;s.highlighting=function(e){return void 0!==e&&(y=e,v.forEach(function(t){e?t.highlight():t.unhighlight()})),y},s.show=function(){v.forEach(function(e){return e.show()})},s.hide=function(){v.forEach(function(e){return e.hide()})},s.isVisible=function(){return!s.get("hidden")},s.onPaperCellPointerDown=function(e){var t=v.indexOf(e)!==-1;t&&s.trigger("element-click",event)},s.alignCrossNode=n,s.getCrossNode=i,s.source.on("element-state-changed",o),s.target.on("element-state-changed",o),s.source.on("ports-state-changed",n),s.target.on("ports-state-changed",n),s.source.on("position-changed",o),s.target.on("position-changed",o)}function s(e,t){function i(e){function t(e){var r=e.id===i,o=!1;e.children.forEach(function(e){o=t(e)||o});var a=e.collapsed&&!o;return Boolean(a)!==Boolean(e.collapsed)&&n.push(e.id),e.collapsed=a,r||o}var i=s.highlightedId,n=[];return t(e),n}function n(e){function t(e,r){var o=!i||e.label.toLowerCase().indexOf(i)===-1,a=r&&o,s=!0;e.children.forEach(function(i){s=t(i,r||e.collapsed)&&s});var l=a&&s;return Boolean(l)!==Boolean(e.invisible)&&n.push(e.id),e.invisible=a&&s,e.invisible}var i=s.searchKey,n=[];return t(e,!1),n}function r(){return Object.keys(s.elementsMap).map(function(e){return s.elementsMap[e]})}function o(e){function t(e,n){i[e.id]||(i[e.id]=e,e.invisible=n,e.children.map(function(i){t(i,e.collapsed)}))}var i={};return t(e,!1),i}function a(){return r().map(function(e){var t=c(e.id,"in"),i=c(e.id,"out");return'\n                <circle class="dn-in-port '+t+'" port="'+t+'"/>\n                <circle class="dn-out-port '+i+'" port="'+i+'"/>\n            '}).join("")}var s=this;s.elementsMap=o(e),s.model=e,s.scale=1,s.activePorts={},p.shapes.basic.Generic.apply(s,[{id:e.id,markup:'<g class="rotatable">\n            <g class="scalable export-anchor">\n                <rect class="body"/>\n            </g>\n            '+a()+"\n        </g>",type:"graph-derivation-node.GraphNode",position:{x:0,y:0},z:E.NODE,size:{width:t.defaultElementWidth,height:t.defaultElementHeight},attrs:{rect:{stroke:"transparent"},circle:{r:0,fill:"red"},".dn-in-port":{ref:".body","ref-x":0,"ref-y":0},".dn-out-port":{ref:".body","ref-x":t.defaultElementWidth+20,"ref-y":0}}}]),s.set("collapsed",!1),s.sctollTop=0,s.setHighlightedId=function(e){s.highlightedId=e;var t=i(this.model);t.concat(n(this.model)),s.trigger("elements-state-changed",[t]),s.prop({z:E.NODE})},s._collapseElement=function(e){if(e){s.elementsMap[e].collapsed=!0;var t=n(s.elementsMap[e]);t.push(e),t.length>0&&s.trigger("elements-state-changed",[t])}else s.set("collapsed",!0)},s._expandElement=function(e){if(e){s.elementsMap[e].collapsed=!1;var t=n(s.elementsMap[e]);t.push(e),t.length>0&&s.trigger("elements-state-changed",[t])}else s.set("collapsed",!1)},s.onClickCollapseButton=function(e){s.trigger("collapse-button-click",e)},s.updatePorts=function(){s.trigger("ports-state-changed")},s.fireClickEvent=function(e,t){s.trigger("body-click",{event:e,elementId:t})},s.getAllChildren=r,s.activePorts={},s.refresh=function(){s.trigger("redraw-view")},s.setScale=function(e){s.scale=e},s.setSearchKey=function(e){s.searchKey=e?e.toLowerCase():void 0;var t=n(this.model);s.trigger("elements-state-changed",[t])}}function l(e){var t=this;t.model=e,t.hidden=!1,p.shapes.basic.Generic.apply(t,[{type:"derivationCrossNode",markup:'<g class="rotatable">\n            <g class="scalable export-anchor">\n                <circle class="body"/>\n            </g>\n        </g>',size:_,z:E.LINK,attrs:{circle:{r:"5px",stroke:"black","stroke-width":3}}}]),t.highlight=function(){t.hidden=!1,t.prop({z:E.SELECTED_ELEMENT}),t.set("highlighted",!0)},t.unhighlight=function(){t.prop({z:E.LINK}),t.set("highlighted",!1)},t.show=function(){t.hidden=!1,t.prop({z:E.LINK}),t.trigger("update-state")},t.hide=function(){t.hidden=!0,t.prop({z:E.BLURED_LINK}),t.trigger("update-state")},t.getCrossedElements=function(){return t.model.crossedElements},t.refresh=function(){t.trigger("redraw-view")},t.setScale=function(e){t.scale=e}}function u(e,t){function i(e,t){var i={};return i[".connection"]={stroke:e.color,"stroke-width":e.thickness,"stroke-dasharray":"solid"===e.lineType?void 0:"5,5"},i[".marker-target"]=t?h(e):void 0,i}var n=this;n.model=e,n.hidden=!1;var r=new v.ResourceProvider(t),o=r.getLinkStyle(e.typeId),a=[b];o.cssClass&&o.cssClass!==b&&a.push(o.cssClass),p.dia.Link.apply(n,[{type:a.join(" "),z:E.LINK,source:e.source,target:e.target,attrs:i(o),labels:[{position:.5,attrs:{rect:{fill:o.textBackgroundColor},text:{fill:o.textColor,text:e.label}}}],connector:{name:"rounded"},router:{name:"dmrouter"}}]),n.highlight=function(){n.hidden=!1,n.prop({z:E.SELECTED_ELEMENT}),n.set("highlighted",!0)},n.unhighlight=function(){n.prop({z:E.LINK}),n.set("highlighted",!1)},n.getLinkStyle=function(){return o},n.show=function(){n.hidden=!1,n.prop({z:E.LINK}),n.trigger("update-state")},n.hide=function(){n.hidden=!0,n.prop({z:E.BLURED_LINK}),n.trigger("update-state")}}function d(e,t){var i=this;i.model=e,u.apply(i,[e,t]),i.getCrossedElements=function(){return i.model.crossedElements}}function c(e,t){var i="in"===t;return(i?"In_":"Out_")+"Port_"+encodeURI(e)}function h(e){return{fill:e.color,stroke:e.color,d:x.d,"stroke-width":e.thickness}}Object.defineProperty(i,"__esModule",{value:!0}),i.Z_INDEXES=i.LINK_LABEL_FONT_SIZE=void 0,i.Node=o,i.Link=a,i.GraphNode=s,i.GraphCrossNode=l,i.GraphLink=u,i.GraphCrossLink=d,i.getPortId=c,i.getLinkMarkerTarget=h;var f=e("rappid"),p=r(f),g=e("../../subscriptionAPI/subscribeable"),m=n(g),v=e("../../data/resourceProvider"),y=e("./lineRouting"),b="derivation-link",x={fill:"black",stroke:"black",d:"M 10 0 L 0 5 L 10 10 z"},w=i.LINK_LABEL_FONT_SIZE=16,E=i.Z_INDEXES={NODE:30,SELECTED_ELEMENT:20,LINK:15,BLURED_NODE:10,BLURED_LINK:5};p.routers.dmrouter=y.dmrouter,s.prototype=Object.create(p.shapes.devs.Model.prototype);var _={width:1,height:1};l.prototype=Object.create(p.shapes.basic.Generic.prototype),u.prototype=Object.create(p.dia.Link.prototype),d.prototype=Object.create(u.prototype)},{"../../data/resourceProvider":30,"../../subscriptionAPI/subscribeable":66,"./lineRouting":42,rappid:"rappid"}],44:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e,t){function i(e){var i=e?e.sourceId:void 0,r=e?e.targetId:void 0,o=k.options.baseWidth/2,s=k.options.baseHeight/2,l=(0,b.convertDMElementsToLayoutModels)(A,M);(0,y.removeCycles)(l.nodes,l.links),a(l.nodes,l.links,i,r);var d=(0,b.convertJointElementsToLayoutModels)(v.getElements(),v.getLinks());(0,y.removeCycles)(d.nodes,d.links),a(d.nodes,d.links,i,r);var c=(0,E.arrayToMap)(d.nodes.map(function(e){return{id:e.id,depth:e.y}})),h=-(1/0);l.nodes.forEach(function(e){h=Math.max(e.x,h)});var f={},g={};l.nodes.forEach(function(e){f[e.x]=!0});var m=Object.keys(f).map(function(e){return Math.round(+e)});m.sort(function(e,t){return e>t?1:e<t?-1:0}).forEach(function(e,t){return g[e]=t});var x=t.defaultElementWidth+t.defaultLayoutStep,w=o-x*(m.length+1)/2,_={};l.nodes.forEach(function(e){var t=e.originalNode,i=w+x*g[Math.round(e.x)];_[i]||(_[i]=[]),_[i].push(t)});var P=50;Object.keys(_).forEach(function(e){var t=_[e],i=0;t.forEach(function(e,n){var r=n===t.length-1,o=r?0:P;i+=e.get("size").height+o}),t.sort(function(e,t){var i=c[e.id]?c[e.id].depth:0,n=c[t.id]?c[t.id].depth:0;return i>n?1:i<n?-1:0});var n=s-i/2,r=+e,o=0;t.forEach(function(e,i){var a=i===t.length-1,s=a?0:P;e.position(r,n+o),o+=e.get("size").height+s})}),k.center(o,s),setTimeout(function(){u(),v.getLinks().forEach(function(e){n(e)}),p()},300)}function n(){setTimeout(function(){v.getLinks().forEach(function(e){(0,w.adjustVertices)(v,e)})},100)}function r(e){setTimeout(function(){(0,w.adjustVertices)(v,e)},100)}function o(){A.forEach(function(e){e.on("element-state-changed",function(){r(e.getPort().primitive)})})}function s(e){if(e instanceof h.GraphLink){var t={},i=e,n=i.previous("source"),r=i.previous("target"),o=n?v.getCell(n.id):void 0,a=r?v.getCell(r.id):void 0,s=i.get("source"),l=i.get("target"),d=v.getCell(s.id),c=v.getCell(l.id);if(o&&o.activePorts){t[o.id]=o;var f=n.port;o.activePorts[f]=o.activePorts[f]||{},delete o.activePorts[f][i.id]}if(a&&a.activePorts){
t[a.id]=a;var g=r.port;a.activePorts[g]=a.activePorts[g]||{},delete a.activePorts[g][i.id]}d.activePorts&&(t[d.id]=d,d.activePorts[s.port]=d.activePorts[s.port]||{},d.activePorts[s.port][i.id]=i),c.activePorts&&(t[c.id]=c,c.activePorts[l.port]=c.activePorts[l.port]||{},c.activePorts[l.port][i.id]=i),Object.keys(t).forEach(function(e){return t[e].refresh()}),p(),u()}}function u(){var e={},t=[];M.forEach(function(i){var n=i.getCrossNode();n&&!e[n.id]&&(e[n.id]=!0,t.push(i))}),t.forEach(function(e){return e.alignCrossNode()})}function p(){function e(e,t,i){return e+"~#tqDMLink#~"+t+"~#tqDMLink#~"+i}var t={};M.forEach(function(i){var n=i.label,r=i.source.getPort().id,o=i.target.getPort().id,a=e(n,r,o),s=i.highlighting();s||!t[a]?(t[a]&&t[a].hide(),t[a]=i,i.show()):i.hide()})}g["default"].apply(this);var m=this,v=new l.dia.Graph,_=void 0,P=new l.dia.Paper({model:v,linkView:c.GraphLinkView,gridSize:1,preventContextMenu:!1,interactive:function(){return{vertexAdd:!1}},width:5e3,height:5e3}),k=new l.ui.PaperScroller({paper:P,autoResizePaper:!0}),A=[],M=[];e.rootElement.innerHTML="",e.rootElement.appendChild(k.render().el),v.on("change:source change:target",s),P.on("blank:pointerdown",function(e,t,i){_={x:e.pageX,y:e.pageY},k.startPanning(e,t,i)}),P.on("blank:pointerclick",function(e){if(_){var t={x:e.pageX,y:e.pageY},i=5,n=Math.abs(t.x-_.x)<i||Math.abs(t.x-_.x)<i;n&&m.trigger("blank-click",e),_=void 0}}),P.on("cell:pointerdown",function(e){A.forEach(function(t){t.onPaperCellPointerDown&&t.onPaperCellPointerDown(e.model)}),M.forEach(function(t){t.onPaperCellPointerDown&&t.onPaperCellPointerDown(e.model)})});var S=function(e,t,i,n){e.ctrlKey&&(m.zoom(.1*(n<0?-1:1),{max:4}),e.preventDefault())};P.on("cell:mousewheel",function(e,t,i,n,r){return S(t,i,n,r)}),P.on("blank:mousewheel",S),m.getNodes=function(){return A},m.getLinks=function(){return M},m.getGraphNodes=function(){return v.getElements()},m.getGraphLinks=function(){return v.getLinks()},m.clear=function(){A=[],M=[],v.clear()},m.zoom=function(e,t){e?k.zoom(e,t):(k.zoomToFit(),k.zoom(-.2,{max:2,min:.2}));var i=k._sx;v.getElements().forEach(function(e){e.setScale(i),e.refresh()})},m.setElements=function(e,t){var n=[],r=[];e.forEach(function(e){e instanceof h.Node?n.push(e):e instanceof h.Link&&r.push(e)}),A=A.concat(n),M=M.concat(r);var a={},u=[];e.forEach(function(e){var t=e.getCells();t.forEach(function(e){a[e.id]||(a[e.id]=!0,u.push(e))})}),u.sort(function(e,t){var i=e instanceof l.shapes.basic.Generic?1:0,n=t instanceof l.shapes.basic.Generic?1:0;return n-i}),v.addCells(u),u.forEach(function(e){return s(e)}),o(),i(t),setTimeout(function(){i(t),m.zoom()},100)},m["export"]=function(e){function t(e,t,i){var n=void 0;"svg"===i?n=new Blob([e],{type:i}):"png"===i&&(n=(0,x.png2Blob)(e)),(0,d["default"])(n,t+"."+i)}var i=e.name||"DM_lineage_diagram_snapshot_"+(0,x.date2String)(new Date);"png"===e.type?(0,f.toDataURL)(P,{backgroundColor:"white",svgOptions:{elementsToRemoveSelector:"",convertHtml:!0}}).then(function(e){t(e,i,"png")})["catch"](function(e){"string"==typeof e?alert(e):alert("This type of export is not supported in the Internet Explorer"),console.error(e)}):(0,f.exportToSVG)(P,{elementsToRemoveSelector:"",convertHtml:!0}).then(function(e){t(e,i,"svg")})["catch"](function(e){alert(e),console.error(e)})},m.print=function(){(0,f.toDataURL)(P,{backgroundColor:"white",svgOptions:{elementsToRemoveSelector:"",convertHtml:!0}}).then(function(e){var t=window.open("",void 0,"width=1280,height=720");t?(t.document.write('\n                    <html>\n                        <body>\n                            <img src="'+e+'"/>\n                        </body>\n                    </html>\n                '),t.document.querySelector("img").onload=function(){t.document.close(),t.print()}):alert("You should unblock popup windows for the current url to be able to print this diagram!")})["catch"](function(e){"string"==typeof e?alert(e):alert("This type of export is not supported in the Internet Explorer"),console.error(e)})},m.setSearchKey=function(e){v.getElements().forEach(function(t){t.setSearchKey(e)})},v.on("change:source change:target update-vertices",r),P.on("cell:pointerup",r)}function a(e,t,i,n,r){var o=(0,v["default"])().step([10,10]).groups([{nodes:e,links:t}]).nodeWidth(1).nodeHeight(1).nodes(e).saveOrder(r).links(t);i&&n&&(o.computeNodeBreadths=function(e){e.forEach(function(e){var t=e.originalNode.model.resource;e.x=t===i?0:t===n?2:1,1===e.dx})}),o.layout(2e3)}Object.defineProperty(i,"__esModule",{value:!0}),i.MapLayout=o;var s=e("rappid"),l=r(s),u=e("file-saverjs"),d=n(u),c=e("./mapViews"),h=e("./mapElements"),f=e("../toSvg"),p=e("../../subscriptionAPI/subscribeable"),g=n(p),m=e("../../layout/sankey"),v=n(m),y=e("../../layout/layout"),b=e("../../utils/layoutUtils"),x=e("../../utils/dataUtils"),w=e("../../utils/lineageDiagramUtils"),E=e("../../utils/utils");l.shapes["graph-derivation-node"]={GraphNode:h.GraphNode,GraphNodeView:c.GraphNodeView},i["default"]=o},{"../../layout/layout":57,"../../layout/sankey":58,"../../subscriptionAPI/subscribeable":66,"../../utils/dataUtils":67,"../../utils/layoutUtils":68,"../../utils/lineageDiagramUtils":69,"../../utils/utils":70,"../toSvg":54,"./mapElements":43,"./mapViews":45,"file-saverjs":2,rappid:"rappid"}],45:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(){d.dia.ElementView.apply(this,arguments)}function o(e,t){if(!t)return e;var i=e.toLowerCase(),n=i.indexOf(t);if(n===-1)return e;if(0===n){var r=e.substring(0,t.length),o=e.substring(t.length,e.length);return'<i class="tq-dm-highlighted-key">'+r+"</i>"+o}if(n+t.length===e.length){var a=e.substring(0,n),s=e.substring(n,e.length);return a+'<i class="tq-dm-highlighted-key">'+s+"</i>"}var l=e.substring(0,n),u=e.substring(n,n+t.length),d=e.substring(n+t.length,e.length);return l+'<i class="tq-dm-highlighted-key">'+u+"</i>"+d}function a(){d.dia.LinkView.apply(this,arguments)}function s(){this.model.get("highlighted")?this.highlight(null,g):this.unhighlight(null,g),this.model.get("blured")?this.highlight(null,m):this.unhighlight(null,m),this.model.hidden?this.highlight(null,v):this.unhighlight(null,v)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.get("target").id===e.id)return!0}return!1}Object.defineProperty(i,"__esModule",{value:!0}),i.CSS_CLASS_NUMBER=i.MAX_NODE_HEIGHT=void 0,i.GraphNodeView=r,i.GraphLinkView=a;var u=e("rappid"),d=n(u),c=e("./mapElements"),h=e("../../utils/utils"),f=i.MAX_NODE_HEIGHT=200,p=i.CSS_CLASS_NUMBER=3;r.prototype=Object.create(d.dia.ElementView.prototype),r.prototype._processedIds,r.prototype._scale=1,r.prototype.initialize=function(){var e=this;d.dia.ElementView.prototype.initialize.apply(this,arguments),this._processedIds={},this.parts={};var t=document.createElement("DIV");t.className="derivation-node",t.id=this.model.id,t.onmousedown=function(t){(0,h.onDragStart)(t,function(i){var n=e.model.position();e.model.position(n.x+i.x/e._scale,n.y+i.y/e._scale),t.stopPropagation()},function(t){e.model.graph&&e.model.graph.trigger("update-vertices",t)}),t.stopPropagation()},this.parts.box=t;var i=this._createScroller();t.appendChild(i),this.parts.scroller=i;var n=this._createHeader(this.model.model);t.appendChild(n),this.parts.header=n;var r=this._createBody(this.model.model);t.appendChild(r),this.parts.body=r;var o=this._createCollapseButton();n.appendChild(o),this.parts.collapseButton=o,this.model.on("change",this._updateBox,this),this.model.on("remove",this._removeBox,this),this.model.on("redraw-view",this.debouncedRender,this),this.model.on("elements-state-changed",this.debouncedRender,this),this.model.on("ports-state-changed",this._updatePorts,this),this.model.on("change:collapsed",this.debouncedRender,this),this._update()},r.prototype.debouncer,r.prototype.debouncedRender=function(){var e=this;cancelAnimationFrame(this.debouncer),this.debouncer=requestAnimationFrame(function(){e.render()})},r.prototype.render=function(){this._processedIds={},d.dia.ElementView.prototype.render.apply(this,arguments);var e=this.parts.box;return this.paper?(this._update(),this.paper.$el.prepend(e),this._updateScroller(),this):this},r.prototype._update=function(e){var t=this;this._updateBody(),e=e||this.model.getAllChildren(),e.forEach(function(e){return t._updateModel(e)}),this._updateCollapseButton(),this._updateBox(),this._updatePorts()},r.prototype._updateBox=function(){var e=this.parts.box,t=this.model.getBBox(),i=e.getBoundingClientRect().height/this._scale;e.style.width=t.width+"px",this.model.resize(t.width,i);var n=t.width/2,r=i/2;e.style.left=(t.x+n)*this.model.scale-n+"px",e.style.top=(t.y+r)*this.model.scale-r+"px",this._scale=this.model.scale,e.style.transform="scale("+this._scale+")"},r.prototype._updatePorts=function(){function e(t){return"derivation-node"!==t.className?t.offsetTop+t.clientTop+(t.offsetParent?e(t.offsetParent):0):0}var t=this.parts.box,i=this.parts.body,n={},r=this.model.get("size");this.model.getAllChildren().forEach(function(o){var a=(0,c.getPortId)(o.id,"in"),s=(0,c.getPortId)(o.id,"out"),l=t.querySelector("#"+o.id),u=l?l.querySelector(".dn-group_header"):void 0,d=void 0;if(d=u?u:l){var h=e(d),f=d.clientHeight,p=i.scrollTop,g=i.offsetTop,m=i.clientHeight+g,v=-p+h+f/2,y=Math.max(Math.min(v,m),g);n["."+a]={ref:".body","ref-y":y,"ref-x":0},n["."+s]={ref:".body","ref-y":y,"ref-x":r.width}}}),this.model.attr(n)},r.prototype._createScroller=function(){var e=this,t=document.createElement("DIV");t.className="derivation-node_body-scroller",t.onscroll=function(){e.parts.body.scrollTop=e.model.sctollTop=t.scrollTop,e.model.updatePorts()};var i=document.createElement("DIV");return i.className="derivation-node_body-scroller__size",t.appendChild(i),t},r.prototype._updateScroller=function(){var e=this.parts.scroller,t=this.parts.body,i=this.parts.collapseButton,n=t.firstChild.getBoundingClientRect(),r=n.height/this._scale,o=n.width/this._scale;e.firstChild&&(e.firstChild.style.height=r+"px",e.firstChild.style.width=o+"px");var a=r<=f,s=a||!this.model.get("collapsed");i.style.display=a?"none":null,e.style.display=s?"none":null,t.scrollTop=this.model.sctollTop,e.scrollTop=this.model.sctollTop},r.prototype._removeBox=function(){this.parts.box.parentNode.removeChild(this.parts.box),this.parts={}},r.prototype._createBody=function(e){var t=document.createElement("DIV");t.className="derivation-node_body";var i=this._createModel(e,0);return t.appendChild(i),t},r.prototype._updateBody=function(){var e=this.parts.body;this.model.get("collapsed")?e.style.maxHeight=f+"px":e.style.maxHeight=null},r.prototype._createCollapseButton=function(){var e=this,t=document.createElement("IMG");return t.className="derivation-node-collapse-button",t.onclick=function(){e.model.get("collapsed")?e.model._expandElement():e.model._collapseElement()},t},r.prototype._updateCollapseButton=function(){var e=this.parts.collapseButton;this.model.get("collapsed")?e.classList.add("collapsed"):e.classList.remove("collapsed")},r.prototype._createHeader=function(e){var t=document.createElement("DIV");t.className="derivation-node_header";var i=document.createElement("LABEL");return i.className="derivation-node_header__label",i.innerText=e.title||"",t.appendChild(i),t},r.prototype._createModel=function(e,t){if(!this._processedIds[e.id]){this._processedIds[e.id]=!0;var i=void 0;return i=e.children.length>0?this._createGroup(e,t):this._createElement(e,t),this.parts[e.id]=i,i}},r.prototype._updateModel=function(e){e.children.length>0?this._updateGroup(e):this._updateElement(e)},r.prototype._createGroup=function(e,t){var i=this,n=e.icon?'<span class="dn-header-icon"><i class="'+e.icon+'"></i></span>':"",r=document.createElement("div"),o="derivation-node_group_"+t%(p+1);r.id=e.id,r.className=o+" dn-group",r.innerHTML='\n        <div class="dn-group_header">\n            <span class="dn-arrow dn__incoming-arrow">\n                <div class="dn-arrow-triangle"></div>\n            </span>\n            <img/>\n            <div class="dn-group_header__label"  title="'+(e.endpointId+"(type: "+e.type+")")+'">\n                '+n+"\n                <label>"+e.label+'</label>\n            </div>\n            <span class="dn-arrow dn__outgoing-arrow">\n                <div class="dn-arrow-triangle"></div>\n            </span>\n        </div>\n        <ul class="derivation-node_list-of-elements"></ul>\n    ';var a=r.querySelector(".dn-group_header__label");a.onclick=function(e){i.model.fireClickEvent(e,r.id),e.stopPropagation()};var s=r.querySelector(".derivation-node_list-of-elements");e.children.forEach(function(e){var n=i._createModel(e,t+1);n&&s.appendChild(n)});var l=r.querySelector(".dn-group img");return l.onclick=function(t){t.stopPropagation(),i.model.onClickCollapseButton(e.id)},r},r.prototype._updateGroup=function(e){var t=this.parts[e.id];if(t.style.display=e.invisible?"none":null,!e.invisible){var i=!e.children||0===e.children.filter(function(e){return!e.invisible}).length;e.collapsed&&i?t.classList.add("dn-collapsed"):t.classList.remove("dn-collapsed"),e.collapsed&&i?t.classList.add("dn-collapsed"):t.classList.remove("dn-collapsed");var n=this.model.highlightedId===e.id;n?t.classList.add("tq-dm-highlighted"):t.classList.remove("tq-dm-highlighted");var r=t.querySelector(".dn-arrow.dn__incoming-arrow"),a=r.querySelector(".dn-arrow-triangle"),s=(0,c.getPortId)(e.id,"in"),u=this.model.activePorts[s]||{},d=Object.keys(u).map(function(e){return u[e]}),h=d.length>0&&e!==this.model.model,f=d&&l(this.model,d);r.style.display=h?null:"none",a.style.display=f?null:"none";var p=t.querySelector(".dn-arrow.dn__outgoing-arrow"),g=p.querySelector(".dn-arrow-triangle"),m=(0,c.getPortId)(e.id,"out"),v=this.model.activePorts[m]||{},y=Object.keys(v).map(function(e){return v[e]}),b=y&&l(this.model,y),x=y.length>0&&e!==this.model.model;p.style.display=x?null:"none",g.style.display=b?null:"none";var w=t.querySelector(".dn-group_header img");w.className=e.collapsed?"dn-collapsed":"";var E=t.querySelector(".dn-group_header__label label");E.innerHTML=o(e.label,this.model.searchKey)}},r.prototype._createElement=function(e,t){var i=this,n=document.createElement("div"),r=e.icon?'<span class="dn-header-icon"><i class="'+e.icon+'"></i></span>':"";return n.className="dn-element derivation-node_element_"+t,n.id=e.id,n.onclick=function(e){i.model.fireClickEvent(e,n.id),e.stopPropagation()},n.innerHTML='\n        <span class="dn-arrow dn__incoming-arrow">\n            <div class="dn-arrow-triangle"></div>\n        </span>\n        <div class="dn-element_center">\n            '+r+'\n            <label title="'+(e.endpointId+"(type: "+e.type+")")+'">\n                '+e.label+'\n            </label>\n        </div>\n        <span class="dn-arrow dn__outgoing-arrow">\n            <div class="dn-arrow-triangle"></div>\n        </span>\n    ',n},r.prototype._updateElement=function(e){var t=this.parts[e.id];if(t.style.display=e.invisible?"none":null,!e.invisible){var i=t.querySelector(".dn-arrow.dn__incoming-arrow"),n=i.querySelector(".dn-arrow-triangle"),r=(0,c.getPortId)(e.id,"in"),a=this.model.activePorts[r]||{},s=Object.keys(a).map(function(e){return a[e]}),u=s.length>0&&e!==this.model.model,d=s&&l(this.model,s);i.style.display=u?null:"none",n.style.display=d?null:"none";var h=t.querySelector(".dn-arrow.dn__outgoing-arrow"),f=h.querySelector(".dn-arrow-triangle"),p=(0,c.getPortId)(e.id,"out"),g=this.model.activePorts[p]||{},m=Object.keys(g).map(function(e){return g[e]}),v=m&&l(this.model,m),y=m.length>0&&e!==this.model.model;h.style.display=y?null:"none",f.style.display=v?null:"none";var b=this.model.highlightedId===e.id;b?t.classList.add("tq-dm-highlighted"):t.classList.remove("tq-dm-highlighted");var x=t.querySelector(".dn-element_center label");x.innerHTML=o(e.label,this.model.searchKey)}},a.prototype=Object.create(d.dia.LinkView.prototype),a.prototype.initialize=function(){d.dia.LinkView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:highlighted change:blured update-state",s),this.listenTo(this.model,"updateMarkers",this.updateMarkers)},a.prototype.updateMarkers=function(){this._markerCache={},this.render()},a.prototype.render=function(){d.dia.LinkView.prototype.render.apply(this,arguments)};var g={highlighter:{name:"addClass",options:{className:"tq-dm-highlighted"}}},m={highlighter:{name:"addClass",options:{className:"tq-dm-blured"}}},v={highlighter:{name:"addClass",options:{className:"tq-dm-hidden"}}}},{"../../utils/utils":70,"./mapElements":43,rappid:"rappid"}],46:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e,t){var i=this,n=new s.ResourceProvider(t),r={id:e.source.id,port:"clipRectPort"},o={id:e.target.id,port:"clipRectPort"},u=n.getColor("aspectLink");a.dia.Link.apply(i,[{id:e.id,type:"aspect-link",source:r,target:o,z:l.Z_INDEXES.ASPECT_LINK,attrs:{".connection":{stroke:u,"stroke-dasharray":"10, 10","stroke-width":"5px"},".marker-source":{fill:u,stroke:u,d:"M0,3a3,3 0 1,0 6,0a3,3 0 1,0 -6,0"},".marker-target":{fill:u,stroke:u,d:"M0,3a3,3 0 1,0 6,0a3,3 0 1,0 -6,0"}},connector:{name:"rounded"}}]),i.blure=function(){i.set("blured",!0)},i.unblure=function(){i.set("blured",!1)},i.hide=function(){i.set("hidden",!0)},i.show=function(){i.set("hidden",!1)},i.model={source:e.source.id,target:e.target.id}}Object.defineProperty(i,"__esModule",{value:!0}),i.AspectLink=r;var o=e("rappid"),a=n(o),s=e("../../data/resourceProvider"),l=e("./elements");r.prototype=Object.create(a.dia.Link.prototype)},{"../../data/resourceProvider":30,"./elements":47,rappid:"rappid"}],47:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(){this.model.get("highlighted")?this.highlight(null,y):this.unhighlight(null,y),this.model.get("blured")?this.highlight(null,x):this.unhighlight(null,x),this.model.get("hidden")?this.highlight(null,b):this.unhighlight(null,b),this.model.get("short-label")?this.highlight(null,w):this.unhighlight(null,w),this.model.get("dragged")?this.highlight(null,E):this.unhighlight(null,E)}function o(){l.dia.ElementView.apply(this,arguments)}function a(){l.dia.LinkView.apply(this,arguments)}Object.defineProperty(i,"__esModule",{value:!0}),i.Z_INDEXES=i.AspectLink=i.TerminationLink=i.TerminationNode=i.Link=i.Node=void 0,i.NodeView=o,i.LinkView=a;var s=e("rappid"),l=n(s),u=e("lodash"),d=n(u),c=e("./node"),h=e("./link"),f=e("./terminationLink"),p=e("./terminationNode"),g=e("./aspectLink");i.Node=c.Node,i.Link=h.Link,i.TerminationNode=p.TerminationNode,i.TerminationLink=f.TerminationLink,i.AspectLink=g.AspectLink;var m=l.V,v=l.g,y=(i.Z_INDEXES={ASPECT_LINK:25,TERMINATION_ELEMENT:25,SELECTED_ELEMENT:30,NODE:20,LINK:15,BLURED_NODE:10,BLURED_LINK:5,VIEW_FRAME:1},{highlighter:{name:"addClass",options:{className:"tq-lg-highlighted"}}}),b={highlighter:{name:"addClass",options:{className:"tq-lg-hidden-element"}}},x={highlighter:{name:"addClass",options:{className:"tq-lg-blured"}}},w={highlighter:{name:"addClass",options:{className:"tq-lg-short-label"}}},E={highlighter:{name:"addClass",options:{className:"tq-lg-dragged-node"}}};o.prototype=Object.create(l.dia.ElementView.prototype),o.prototype.initialize=function(){l.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,["change:dragged","change:highlighted","change:blured","change:hidden","refresh-highlighting","change:short-label"].join(" "),this.debouncedHighlighting)},o.prototype.debouncer,o.prototype.debouncedHighlighting=function(){var e=this;cancelAnimationFrame(this.debouncer),this.debouncer=requestAnimationFrame(function(){r.call(e)})},a.prototype.render=function(){l.dia.LinkView.prototype.render.apply(this,arguments)},a.prototype=Object.create(l.dia.LinkView.prototype),a.prototype.initialize=function(){l.dia.LinkView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,["change:highlighted","change:blured","change:hidden","refresh-highlighting"].join(" "),this.debouncedHighlighting)},a.prototype.getPointAtLength=function(e){return this._V.connection.node.getPointAtLength(this._V.connection.node.getTotalLength()*e)},a.prototype.debouncer,a.prototype.debouncedHighlighting=function(){var e=this;cancelAnimationFrame(this.debouncer),this.debouncer=requestAnimationFrame(function(){r.call(e)})},a.prototype.updateToolsPosition=function(){var e=this;if(!this._V.linkTools)return this;var t="",i=this.getConnectionLength();return d.isNaN(i)||(i<this.options.shortLinkLength&&(t="scale(.5)"),this._toolCache.forEach(function(n,r,o){var a=r+1,s=o.length+1,l=a/s,u=e.getPointAtLength(l);if(n.node instanceof SVGGElement)if(n.attr("transform","translate("+u.x+", "+u.y+") "+t),e.options.doubleLinkTools&&i>=e.options.longLinkLength){var d=e.getPointAtLength(l);e._tool2Cache.attr("transform","translate("+d.x+", "+d.y+") "+t),e._tool2Cache.attr("visibility","visible")}else e.options.doubleLinkTools&&e._tool2Cache.attr("visibility","hidden")})),this},a.prototype.renderTools=function(){if(!this._V.linkTools)return this;var e,t=this._V.linkTools.node,i=l.util.template(this.model.get("toolMarkup")||this.model.toolMarkup),n=m(i());return e=n instanceof Array?n:[n],e.forEach(function(e){t.appendChild(e.node)}),this._toolCache=e,this};var _=a.prototype.getConnectionPoint;a.prototype.getConnectionPoint=function(e,t,i){var n=_.apply(this,arguments),r=void 0;if(d.isEmpty(t)&&(t={x:0,y:0}),d.isEmpty(i)&&(i={x:0,y:0}),t.id)r="source"===e?this.sourceBBox:this.targetBBox;else{var o=v.point(t);r={x:o.x,y:o.y,width:0,height:0,center:function(){return o}}}var a=r.center(),s=Math.round(a.x+r.width/2),l=Math.round(a.x-r.width/2),u=Math.round(a.y+r.height/2),c=Math.round(a.y-r.height/2),f=l<n.x&&n.x<s,p=c<n.y&&n.y<u,g=f&&p;if(g){var m=s-n.x,y=n.x-l,b=u-n.y,x=n.y-c,w=Math.min(m,y,b,x);m===w?n.offset(m,0):y===w?n.offset(-y,0):x===w?n.offset(0,-x):b===w&&n.offset(0,b)}var E=void 0,P="source"===e?this.sourceBBox:this.targetBBox;if(i.id){var k="source"===e?this.targetBBox:this.sourceBBox;E=v.rect(k).intersectionWithLineFromCenterToPoint(v.rect(P).center()),E=E||v.rect(k).center()}else E=v.point(i);var A=Math.abs(E.x-n.x),M=Math.abs(E.y-n.y),S=this.model.get("router")&&this.model.get("router").name,T=S&&("lgrouter"===S||"metro"===S);return this.model instanceof h.Link&&T&&(A<=M?n.offset(E.x-n.x,0):n.offset(0,E.y-n.y)),n=v.point({x:Math.max(Math.min(Math.round(n.x),s),l),y:Math.max(Math.min(Math.round(n.y),u),c)})}},{"./aspectLink":46,"./link":48,"./node":49,"./terminationLink":50,"./terminationNode":51,lodash:"lodash",rappid:"rappid"}],48:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e,t){function i(e){var t={};return t[".connection"]={stroke:e.color,"stroke-width":e.thickness,"stroke-dasharray":"solid"===e.lineType?void 0:"5,5"},e.hasArrow&&(t[".marker-source"]={fill:e.color,stroke:e.color,d:"M0,3a3,3 0 1,0 6,0a3,3 0 1,0 -6,0","stroke-width":e.thickness},t[".marker-target"]={fill:e.color,stroke:e.color,d:"M 10 0 L 0 5 L 10 10 z","stroke-width":e.thickness}),t}function n(e){return e.map(function(e){var t=e.linkType,i=e.linkStyle.toolButton,n=i.width||30,r=i.hieght||30;return'<g class="link-tool">\n                <g class="tool-options" event="link:options" linkType="'+t+'">\n                    <image\n                        width="'+n+'"\n                        height="'+r+'"\n                        x="-'+n/2+'"\n                        y="-'+r/2+'"\n                        xlink:href="'+i.image+"\"\n                        onerror=\"this.setAttribute( 'xlink:href', '"+o.getImage("default-link-options")+"' );\"\n                    />\n                    <title>Open derivation map"+(t?" for "+t:"")+"</title>\n                </g>\n            </g>"}).join()}var r=this,o=new s.ResourceProvider(t);r.terminationLinks=[],r.highlighted=!1,r.blured=!1;var c=void 0,h=void 0;if(e.group){var f=[],p=e.group.filter(function(e){var t=f.indexOf(e.linkType)===-1;return t&&f.push(e.linkType),t}).map(function(e){return{linkType:e.linkType,linkStyle:o.getLinkStyle(e.linkType)}});c=1===p.length?p[0].linkStyle:o.getLinkStyle(e.linkType),h=n(p)}else c=o.getLinkStyle(e.linkType),h=n([{linkType:e.linkType,linkStyle:c}]);var g=[u];c.cssClass&&c.cssClass!==u&&g.push(c.cssClass),c.toolButton.alwaysVisible&&g.push(d),a.dia.Link.apply(r,[{type:g.join(" "),source:{id:e.source,port:"clipRectPort"},target:{id:e.target,port:"clipRectPort"},z:l.Z_INDEXES.LINK,attrs:i(c),connector:{name:"rounded"},router:{name:e.routing,args:{excludeTypes:["viewFrame","terminationLink","terminationNode","view-frame-splitter","view-frame-splitter-vertical","aspectLink"],maximumLoops:3e3,maxAllowedDirectionChange:3e3}},toolMarkup:h}]),r.isOnTheGraph=function(){return!!r.graph},r.select=function(){r.terminationLinks.forEach(function(e){return e.select(!0)}),r.get("blured")&&r.unblure(),r.get("hidden")&&r.show(),r.prop({z:l.Z_INDEXES.SELECTED_ELEMENT}),r.set("highlighted",!0)},r.unselect=function(){r.terminationLinks.forEach(function(e){return e.unselect(!0)}),r.prop({z:l.Z_INDEXES.LINK}),r.set("highlighted",!1)},r.blure=function(){r.get("highlighted")||(r.terminationLinks.forEach(function(e){return e.blure(!0)}),r.prop({z:l.Z_INDEXES.BLURED_LINK}),r.set("blured",!0))},r.unblure=function(){r.terminationLinks.forEach(function(e){return e.unblure(!0)}),r.prop({z:l.Z_INDEXES.LINK}),r.set("blured",!1)},r.hide=function(){r.terminationLinks.forEach(function(e){return e.hide(!0)}),r.set("hidden",!0)},r.show=function(){r.terminationLinks.forEach(function(e){return e.show(!0)}),r.set("hidden",!1)},r.refreshHighlighting=function(){r.trigger("refresh-highlighting",r)},r.model=e}Object.defineProperty(i,"__esModule",{value:!0}),i.ALWAYS_VISIBLE_TOOL_BUTTONS=i.DEFAULT_LINK_TYPE=void 0,i.Link=r;var o=e("rappid"),a=n(o),s=e("../../data/resourceProvider"),l=e("./elements"),u=i.DEFAULT_LINK_TYPE="lineage-gram-link",d=i.ALWAYS_VISIBLE_TOOL_BUTTONS="lg-visible-tool-buttons";r.prototype=Object.create(a.dia.Link.prototype)},{"../../data/resourceProvider":30,"./elements":47,rappid:"rappid"}],49:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e,t){function i(e){v.collapsedSize=e;var t=n(e);v.size={width:t.width,height:t.height,maxWidth:t.maxWidth,maxHeight:t.maxHeight};var i=t.scale,r=f*i,o=c*i,a=h*i;v.attr({".tq-lg-body":{width:t.rectWidth,height:t.rectHeight,"ref-y":r},image:{width:Math.max(0,t.rectWidth-2*p),height:Math.max(0,t.rectHeight-2*p),"ref-y":r+p},".label":{text:t.label,"ref-y":r+o+t.rectHeight+g*i-a},".label tspan":{"font-size":g*i,dy:a}}),v.resize(v.size.width,v.size.height),v.set("short-label",t.shortLabel)}function n(e){if(k&&k.inSize.width===e.width&&k.inSize.height===e.height&&k.inSize.maxWidth===e.maxWidth&&k.inSize.maxHeight===e.maxHeight&&k.expanded===v.get("expanded"))return k.outSize;var i=void 0,n=void 0;v.get("expanded")?(i=Math.min(e.maxWidth,e.width*m),n=Math.min(e.maxHeight,e.height*m)):(i=e.width,n=e.height);var a=e.width/t.elementSize.width,s=e.height/t.elementSize.height,l=Math.min(a,s),u=f*l,p=h*l,y={width:i,height:n,maxWidth:e.maxWidth,maxHeight:e.maxHeight,rectWidth:i-2*u,rectHeight:n-2*u,scale:l,shortLabel:!1};if(v.model.label){y.height-=u;var b=g*l,w=d*l*2,E=c*l*2,_=r(v.model.label,i-w,b),P=0,A=_.split("\n");if(A.length>1){var M=(x?2:3)+(v.get("expanded")?1:0);if(A.length>M&&(y.shortLabel=!0),A=A.slice(0,M),x){var S=A.join(" ")+(y.shortLabel?"...":""),T=o(S,b+"px sans-serif");y.width=T+w*A.length,y.label=S,P=b+E}else P=b+E+(A.length-1)*p,y.label=A.join("\n")+(y.shortLabel?"...":"")}else P=b+E,y.label=v.model.label;y.height+=P,y.labelHeight=P,y.expanded=v.get("expanded")}return k={inSize:e,outSize:y,expanded:y.expanded},y}function r(e,t,i){var n=a.util.breakText(e,{width:t},{"font-size":i}),r=n.split("\n");if(r.length>1){var o=r[r.length-1],s=4;if(o.length<s){var l=s-o.length,u=r.length-(l+1),d=Math.round(l/Math.min(l,r.length-1)),c="",h=0,f=r.map(function(e,t,i){if(t>=u){var n=t===i.length-1,r=c+e;return h+=d,n?r:(c=r.substring(r.length-h,r.length),r.substring(0,r.length-h))}return e});return f.join("\n")}return n}return e}function o(e,t){var i=o.canvas||(o.canvas=document.createElement("CANVAS")),n=i.getContext("2d");n.font=t;var r=n.measureText(e);return r.width}var v=this,y=t.elementSize,b=new l.ResourceProvider(t),x="top-to-bottom"===t.graphOrientation||"bottom-to-top"===t.graphOrientation;v.model=e,v.terminationNodes=[],v.aspects=[],v.viewFrameOwnerId=null,v.dragged=!1,v.blured=!1,v.highlighted=!1,v.size={width:y.width,height:y.height,maxWidth:y.width,maxHeight:y.height};var w=b.getImage(e.typeId),E=(0,s.uniqueId)("Node");a.shapes.basic.Generic.apply(v,[{type:"lineage-gram-node",id:E,position:{x:0,y:0},markup:'<g class="rotatable" clip-path="url('+("#"+E+"_clipPath")+')">\n                    <g class="scalable">\n                        <rect class="body"/>\n                    </g>\n                    <rect class="tq-lg-body"></rect>\n                    <image class="scalable" onerror="this.setAttribute( \'xlink:href\', \''+b.getImage()+'\' );"/>\n                    <text class="label"/>\n                </g>\n                <rect class="clipRect"></rect>\n                <defs>\n                    <clipPath id="'+(E+"_clipPath")+'">\n                        <rect class="clipRect"></rect>\n                    </clipPath>\n                </defs>',size:v.size,attrs:{circle:{fill:"transparent",stroke:"transparent",r:1},".clipRect":{port:"clipRectPort",width:v.size.width,height:v.size.height,fill:"transparent",opacity:0,"stroke-width":0,rx:5,ry:5},".body":{"stroke-width":0,fill:"transparent",rx:5,ry:5},".label":{fill:b.getColor("text"),"font-size":g,"alignment-baseline":"hanging",ref:".body",tooltip:v.model.label,y:0},".tq-lg-body":{"ref-x":.5,"x-alignment":"middle","y-alignment":"top",ref:".body",rx:5,ry:5,stroke:b.getColor(e.typeId)},image:{"xlink:href":w,"ref-x":.5,ref:".body","x-alignment":"middle","y-alignment":"top"},".label tspan":{dy:h}},z:u.Z_INDEXES.NODE}]);var _=!1,P=v.position;v.position=function(e,t){_=!0;var i=P.call(v,e,t);return _=!1,i},v.on("change:position",function(){_||v.setClipping(void 0)}),v.on("change:size",function(e,t){v.attr({".clipRect":{width:t.width,height:t.height}})}),v.on("change:expanded",function(){i(v.collapsedSize)}),i(v.size),v.set("expanded",!1),v.setSize=function(e){v.collapsedSize.width===e.width&&v.collapsedSize.height===e.height&&v.size.maxWidth===e.maxWidth&&v.size.maxHeight===e.maxHeight||i(e)},v.setOrientation=function(e){x="top-to-bottom"===e||"bottom-to-top"===e},v.isOnTheGraph=function(){return!!v.graph},v.calculateSize=function(e){var t=n(e);return{width:t.width,height:t.height,maxWidth:t.maxWidth,maxHeight:t.maxHeight}},v.select=function(e){v.terminationNodes.forEach(function(e){return e.select(!0)}),e||v.aspects.forEach(function(e){return e.select(!0)}),v.get("blured")&&v.unblure(),v.get("hidden")&&v.show(),v.prop({z:u.Z_INDEXES.SELECTED_ELEMENT}),v.set("highlighted",!0)},v.unselect=function(e){v.terminationNodes.forEach(function(e){return e.unselect(!0)}),e||v.aspects.forEach(function(e){return e.unselect(!0)}),v.prop({z:u.Z_INDEXES.NODE}),v.set("highlighted",!1)},v.blure=function(){v.get("highlighted")||(v.terminationNodes.forEach(function(e){return e.blure(!0)}),v.prop({z:u.Z_INDEXES.BLURED_NODE}),v.set("blured",!0))},v.unblure=function(){v.terminationNodes.forEach(function(e){return e.unblure(!0)}),v.prop({z:u.Z_INDEXES.NODE}),v.set("blured",!1)},v.hide=function(){
v.terminationNodes.forEach(function(e){return e.hide(!0)}),v.set("hidden",!0)},v.show=function(){v.terminationNodes.forEach(function(e){return e.show(!0)}),v.set("hidden",!1)},v.refreshHighlighting=function(){v.trigger("refresh-highlighting",v)},v.setClipping=function(e){e=e||{x:0,y:0};var t=e.x>0?e.x:0,i=e.y>0?e.y:0,n=v.size.width-Math.abs(e.x),r=v.size.height-Math.abs(e.y);v.attr({".clipRect":{x:t,y:i,width:n>0?n:0,height:r>0?r:0}})};var k=null}Object.defineProperty(i,"__esModule",{value:!0}),i.EXPANDED_NODE_GROWING=i.FONT_SIZE=i.IMG_PADDING=i.BODY_PADDING=i.LABEL_LINE_HEIGHT=i.LABEL_TOP_BOTTOM_PADDING=i.LABEL_LEFT_RIGHT_PADDING=void 0,i.Node=r;var o=e("rappid"),a=n(o),s=e("lodash"),l=e("../../data/resourceProvider"),u=e("./elements"),d=i.LABEL_LEFT_RIGHT_PADDING=5,c=i.LABEL_TOP_BOTTOM_PADDING=10,h=i.LABEL_LINE_HEIGHT=20,f=i.BODY_PADDING=25,p=i.IMG_PADDING=10,g=i.FONT_SIZE=16,m=i.EXPANDED_NODE_GROWING=1.5;r.prototype=Object.create(a.shapes.devs.Model.prototype)},{"../../data/resourceProvider":30,"./elements":47,lodash:"lodash",rappid:"rappid"}],50:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e,t){function i(){n.originalLink.get("highlighted")?n.set("highlighted",!0,{silent:!0}):n.set("highlighted",!1,{silent:!0}),n.originalLink.get("blured")?n.set("blured",!0,{silent:!0}):n.set("blured",!1,{silent:!0})}var n=this,r=new s.ResourceProvider(t);n.originalLink=e.link,n.highlighted=!1,n.blured=!1,n.originalLink.terminationLinks.push(n);var o={id:e.source.id,port:"clipRectPort"},u={id:e.target.id,port:"clipRectPort"},d=r.getColor("terminationLink");a.dia.Link.apply(n,[{type:"termination-link",source:o,target:u,z:l.Z_INDEXES.TERMINATION_ELEMENT,attrs:{".connection":{stroke:d,"stroke-width":t.linkThickness*(1+(n.originalLink.model.thickness||0)),"stroke-dasharray":"5,5"},".marker-source":{fill:d,stroke:d,"stroke-width":t.linkThickness*(1+(n.originalLink.model.thickness||0)),d:"M0,3a3,3 0 1,0 6,0a3,3 0 1,0 -6,0"},".marker-target":{fill:d,stroke:d,"stroke-width":t.linkThickness*(1+(n.originalLink.model.thickness||0)),d:"M 10 0 L 0 5 L 10 10 z"}},connector:{name:"rounded"}}]),n.select=function(e){e||n.originalLink.select(!0),n.get("blured")&&n.unblure(),n.get("hidden")&&n.show(),n.prop({z:l.Z_INDEXES.SELECTED_ELEMENT}),n.set("highlighted",!0)},n.unselect=function(e){e||n.originalLink.unselect(!0),n.prop({z:l.Z_INDEXES.TERMINATION_ELEMENT}),n.set("highlighted",!1)},n.blure=function(e){n.get("highlighted")||(e||n.originalLink.blure(!0),n.prop({z:l.Z_INDEXES.BLURED_LINK}),n.set("blured",!0))},n.unblure=function(e){e||n.originalLink.unblure(!0),n.prop({z:l.Z_INDEXES.TERMINATION_ELEMENT}),n.set("blured",!1)},n.hide=function(e){e||n.originalLink.hide(!0),n.set("hidden",!0)},n.show=function(e){e||n.originalLink.show(!0),n.set("hidden",!1)},n.refreshHighlighting=function(){i(),n.trigger("refresh-highlighting",n)},n.model={source:e.source.id,target:e.target.id},n.refreshHighlighting();var c=n.remove;n.remove=function(){var e=n.originalLink.terminationLinks.indexOf(n);n.originalLink.terminationLinks.splice(e,1),c.call(n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.TerminationLink=r;var o=e("rappid"),a=n(o),s=e("../../data/resourceProvider"),l=e("./elements");r.prototype=Object.create(a.dia.Link.prototype)},{"../../data/resourceProvider":30,"./elements":47,rappid:"rappid"}],51:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e,t){function i(){n.originalNode.get("highlighted")?n.set("highlighted",!0,{silent:!0}):n.set("highlighted",!1,{silent:!0}),n.originalNode.get("blured")?n.set("blured",!0,{silent:!0}):n.set("blured",!1,{silent:!0})}var n=this,r=new s.ResourceProvider(t);n.originalNode=e.node,n.highlighted=!1,n.blured=!1,n.related=[],n.size=t.terminationNodeSize,e.node.terminationNodes.push(n),a.shapes.basic.Generic.apply(n,[{markup:'<g class="rotatable">\n                    <g class="scalable">\n                        <rect class="body"/>\n                    </g>\n                    <rect class="tq-lg-body"/>\n                    <text/>\n                </g>',type:"termination-node",position:e.position,size:t.terminationNodeSize,attrs:{".body":{port:"clipRectPort",fill:"transparent","stroke-width":0,rx:10,ry:10},".tq-lg-body":{"ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle",width:t.terminationNodeSize.width-10,height:t.terminationNodeSize.height-10,ref:".body",rx:2,ry:2,stroke:r.getColor(e.node.model.typeId),fill:"white",port:"clipRectPort"},text:{text:"",fill:r.getColor(e.node.model.typeId),stroke:r.getColor(e.node.model.typeId),"ref-x":.5,"ref-y":.55,ref:".body",tooltip:n.originalNode.model.label}},z:l.Z_INDEXES.TERMINATION_ELEMENT}]);var o=!0,u=n.position;n.position=function(e,t){o=!1;var i=u.call(n,e,t);return o=!0,i},n.on("change:position",function(){o&&n.set("dragged",o)}),n.on("change:dragged",function(){var e=n.size,i=n.position();n.get("dragged")?(n.size={width:n.originalNode.size.width,height:n.originalNode.size.height},n.attr({text:{text:"+","ref-y":.51},".body":{rx:0,ry:0}}),n.resize(n.size.width,n.size.height),n.position(i.x-(n.size.width-e.width)/2,i.y-(n.size.height-e.height)/2)):(n.size={width:t.terminationNodeSize.width,height:t.terminationNodeSize.height},n.attr({text:{text:"C","ref-y":.55},".body":{rx:10,ry:10}}),n.resize(n.size.width,n.size.height),n.position(i.x+(n.size.width-e.width)/2,i.y+(n.size.height-e.height)/2))}),n.select=function(e){n.originalNode&&!e&&n.originalNode.select(!0),n.get("blured")&&n.unblure(),n.get("hidden")&&n.show(),n.prop({z:l.Z_INDEXES.SELECTED_ELEMENT}),n.set("highlighted",!0)},n.unselect=function(e){n.originalNode&&!e&&n.originalNode.unselect(!0),n.prop({z:l.Z_INDEXES.TERMINATION_ELEMENT}),n.set("highlighted",!1)},n.blure=function(e){n.get("highlighted")||(n.originalNode&&!e&&n.originalNode.blure(!0),n.prop({z:l.Z_INDEXES.BLURED_NODE}),n.set("blured",!0))},n.unblure=function(e){n.originalNode&&!e&&n.originalNode.unblure(!0),n.prop({z:l.Z_INDEXES.TERMINATION_ELEMENT}),n.set("blured",!1)},n.hide=function(e){n.originalNode&&!e&&n.originalNode.hide(!0),n.set("hidden",!0)},n.show=function(e){n.originalNode&&!e&&n.originalNode.show(!0),n.set("hidden",!1)},n.refreshHighlighting=function(){i(),n.trigger("refresh-highlighting",n)};var d=n.remove;n.remove=function(){var e=n.originalNode.terminationNodes.indexOf(n);n.originalNode.terminationNodes.splice(e,1),d.call(n)},n.refreshHighlighting()}Object.defineProperty(i,"__esModule",{value:!0}),i.TerminationNode=r;var o=e("rappid"),a=n(o),s=e("../../data/resourceProvider"),l=e("./elements");r.prototype=Object.create(a.shapes.basic.Rect.prototype)},{"../../data/resourceProvider":30,"./elements":47,rappid:"rappid"}],52:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e,t){function i(e){$.resetRouting(),$.setBounds({x:h.FRAME_OUT_MARGIN+t.frameBorderWidth,y:h.FRAME_OUT_MARGIN+t.frameBorderWidth,width:U.el.clientWidth-2*(h.FRAME_OUT_MARGIN+t.frameBorderWidth),height:U.el.clientHeight-2*(h.FRAME_OUT_MARGIN+t.frameBorderWidth)}),e=e||{};var i={viewFrames:e.viewFrames,fullScreenMode:e.fullScreenMode,selectedElement:J,path:K,mask:Q,quickUpdate:e.quickUpdate,updateBounds:e.updateBounds,paperOptions:{orientation:W,width:U.el.clientWidth,height:U.el.clientHeight,scale:Y},elementOptions:{elementSize:e.elementSize}};i.quickUpdate||clearTimeout(se),V.startBatch("remove"),i.quickUpdate&&V.removeCells(V.getLinks());var n=te.prepareRenderData(i);n=r(n),V.stopBatch("remove"),V.startBatch("add"),V.addCells(n),V.stopBatch("add"),o(n),ee.refresh()}function n(e,t){if(!le){clearTimeout(se),e=e||{};var n=c.cloneDeep(e)||{};n.quickUpdate=!0,le=!0,requestAnimationFrame(function(){le=!1}),i(n),se=setTimeout(function(){e.quickUpdate=!1,i(e),t&&t()},150)}}function r(e){var t=V.getCells(),i={};return e.forEach(function(e){i[e.id]=e}),t.forEach(function(e){i[e.id]?delete i[e.id]:e.remove()}),Object.keys(i).map(function(e){return i[e]})}function o(e){e.forEach(function(e){e.refreshHighlighting&&e.refreshHighlighting()})}function a(){var e=J instanceof g.Node;if(e){var n=J,r=X.maps.nodeMap,o=X.maps.sourceMap,a=X.maps.targetMap,s=(o[n.id]||[]).concat(a[n.id]||[]),l=s.map(function(e){return e.model.source!==n.id?r[e.model.source]:e.model.target!==n.id?r[e.model.target]:e.model.source===e.model.target?r[e.model.source]:void 0}),u=(0,w.combineOperation)({selectedNode:n,relativeLinks:s,relativeNodes:l,scale:Y},t),d=(0,P.getViewFrameIdForNode)(n),c={},h={};l.forEach(function(e){var t=(0,_.getGlobalNodePosition)(e);e.model.position=u[e.id],X.updateZonesForNode(e,t);var i=te.getViewFrameForNode(e);h[i.id]=i,e.viewFrameOwnerId=d,c[e.id]=e}),c[n.id]=n,s.forEach(function(e){c[e.id]=e}),K=c;var f=Object.keys(h).map(function(e){return h[e]});i({viewFrames:f,updateBounds:!0}),D(f)}}function l(){C(),V.clear(),te=void 0}function d(e,n){l(),X=e,$=new f.RoutingManager({links:X.links,bounds:{x:h.FRAME_OUT_MARGIN+t.frameBorderWidth,y:h.FRAME_OUT_MARGIN+t.frameBorderWidth,width:U.el.clientWidth-2*(h.FRAME_OUT_MARGIN+t.frameBorderWidth),height:U.el.clientHeight-2*(h.FRAME_OUT_MARGIN+t.frameBorderWidth)}},t),te=new h.ViewManager({dataContainer:e,viewFrames:n,fullScreenMode:Z},t),ee=I(te),te.on("change-view-port-position",function(e){i({viewFrames:[e],quickUpdate:!0})}),S(),i()}function m(e){var t=te.getViewFrameById(e);if(t){t.expanded=!0;var n=[t];i({viewFrames:n}),ie.trigger("view-frames-state-changed",[n]),D(te.getViewFrames().filter(function(e){return e.active}))}}function y(e){var t=te.getViewFrameById(e);if(t){t.expanded=!1;var n=[t];i({viewFrames:n}),ie.trigger("view-frames-state-changed",[n]),D(te.getViewFrames().filter(function(e){return e.active}))}}function A(e){Z=e,Z||(Y={x:Math.max(Math.min(Y.x,re.max),re.min),y:Math.max(Math.min(Y.y,re.max),re.min)}),i({fullScreenMode:e});var t=te.getViewFrames();if(ie.trigger("view-frames-state-changed",[t]),e){var n=te.getOverViewFrame();F(n,function(){i(),ie.trigger("view-frames-size-or-position-changed",[[n]])})}else D(t.filter(function(e){return e.active}))}function M(e){var t=te.isFullScreenMode();return e=e||Y,Y=t?{x:Math.max(Math.min(e.x,oe.max),oe.min),y:Math.max(Math.min(e.y,oe.max),oe.min)}:{x:Math.max(Math.min(e.x,re.max),re.min),y:Math.max(Math.min(e.y,re.max),re.min)}}function S(){function e(e,t){var i=e*c.width+(e-1)*f.x,n=t*c.height+(e-1)*f.y,r=void 0;return r=Math.abs(o-i)>=Math.abs(a-n)?{x:o/i,y:o/i}:{x:a/n,y:a/n}}var i=te.getViewFrames().length,n=U.el.clientWidth-2*h.FRAME_OUT_MARGIN,r=U.el.clientHeight-2*h.FRAME_OUT_MARGIN,o=n-h.DISTANCE_BETWEEN_FRAMES*(i-1),a=r-h.DISTANCE_BETWEEN_FRAMES*(i-1),s=4,l=3,u=8,d=7,c={width:t.elementSize.width,height:t.elementSize.height},f={x:t.layoutStep.x,y:t.layoutStep.y},p=e(u,d),g=e(s,l);re.min=Math.max(p.x,p.y),re.max=Math.min(g.x,g.y)}function T(e){function i(n){function r(e){var t=(0,_.getGlobalNodePosition)(e);return{x:n.x-t.x,y:n.y-t.y}}var o=t.dataZoneSize.width,a=t.dataZoneSize.height,s={x:n.x-o/2,y:n.y-a/2,width:o,height:a},u=X.getElementsForRectangle(s).nodes.filter(function(e){return l.indexOf(e)===-1});if(0===u.length)return J;l=u;var d=void 0;if(e===k.UP){if(d=u.filter(function(e){var t=r(e);return t.y>0&&Math.abs(t.y)>Math.abs(t.x)}),0===d.length)return i({x:n.x,y:n.y-a})}else if(e===k.DOWN){if(d=u.filter(function(e){var t=r(e);return t.y<0&&Math.abs(t.y)>Math.abs(t.x)}),0===d.length)return i({x:n.x,y:n.y+a})}else if(e===k.LEFT){if(d=u.filter(function(e){var t=r(e);return t.x>0&&Math.abs(t.y)<Math.abs(t.x)}),0===d.length)return i({x:n.x-o,y:n.y})}else if(e===k.RIGHT&&(d=u.filter(function(e){var t=r(e);return t.x<0&&Math.abs(t.y)<Math.abs(t.x)}),0===d.length))return i({x:n.x+o,y:n.y});return d.sort(function(e,t){var i=(0,_.getGlobalNodePosition)(e),r=(0,_.getGlobalNodePosition)(t),o=(0,_.getDist)(i,n),a=(0,_.getDist)(r,n);return o>a?1:o<a?-1:0}),d[0]}if(J){var n=void 0;if(J instanceof g.Node)n=(0,_.getGlobalNodePosition)(J);else{var r=X.maps.nodeMap[J.model.source],o=r.model.position,a=X.maps.nodeMap[J.model.target],s=a.model.position;if(e===k.UP)return r.model.y<a.model.y?r:a;if(e===k.DOWN)return r.model.y>a.model.y?r:a;if(e===k.LEFT)return o.x<s.x?r:a;if(e===k.RIGHT)return o.x>s.x?r:a}var l=[];return i(n)}}function L(){var e=void 0;U.on("link:options",function(e,t){var i=t.target.parentNode.getAttribute("linkType");ie.trigger("link-options-click",{link:e.model,linkType:i})}),ne.on({"up down left right":function(t){cancelAnimationFrame(e),e=requestAnimationFrame(function(){z(T(t.keyCode),!0),t.stopPropagation()})}});var t=0;U.on("cell:pointerup",function(e,n){function o(e,t){var n=Math.abs(r.x-t.pageX)>5||Math.abs(r.y-t.pageY),o=e.model;if(o instanceof p.ViewFrame){var a=te.getViewFrameById(o.id);n||C(),F(a,function(){i(),ie.trigger("view-frames-size-or-position-changed",[[te.getViewFrameById(o.id)]])})}else{var s=n&&(o instanceof g.Node||o instanceof g.TerminationNode),l=o instanceof g.TerminationNode,u=!(o instanceof g.AspectLink);s?N([o]):l?z(o,!0):u&&z(o)}ie.trigger("cell-single-click",e.model)}function a(e){var t=e.model;t instanceof g.Node&&(t.set("expanded",!e.model.get("expanded")),N([t])),ie.trigger("cell-double-click",e.model)}var s=e.model instanceof p.ViewFrame;s?(o(e,n),t=0):t>1?(a(e,n),t=0):setTimeout(function(){1===t&&o(e,n),t=0},200)});var r={x:0,y:0};U.on("cell:pointerdown",function(e,i){r={x:i.pageX,y:i.pageY},t++}),U.on("cell:mousewheel",function(e,t,i,r,o){var a=100,s=te.getVieFrameByScreenPoint({x:i,y:r});if(s){if(t.shiftKey)s.viewPortPosition.x+=(o<0?1:-1)*a,s.viewPortPosition=(0,_.limitPointPosition)(s.viewPortPosition,s.viewPortPositionBounds),n({viewFrames:[s]},function(){ie.trigger("view-frames-size-or-position-changed",[[s]])});else if(t.ctrlKey){var l=o>0?ae:-ae,u={x:Y.x+l,y:Y.y+l};M(u),n(void 0,function(){D(te.getViewFrames()),ie.trigger("scale-changed",u)})}else s.viewPortPosition.y+=(o<0?1:-1)*a,s.viewPortPosition=(0,_.limitPointPosition)(s.viewPortPosition,s.viewPortPositionBounds),n({viewFrames:[s]},function(){ie.trigger("view-frames-size-or-position-changed",[[s]])});t.preventDefault()}}),window.onresize=function(){S(),n(void 0,function(){ie.trigger("scale-changed")})}}function N(e){var t=[],n=te.getOverViewFrame();e.forEach(function(e){var i=(0,E.getBaseElement)(e),r=e instanceof g.TerminationNode,o=te.getVieFrameForNodeByPosition(e),a=te.getViewFrameOwner(i)||n,s=void 0;s=o||a;var l=e.position();r&&(l.x-=(i.size.width-e.size.width)/2,l.y-=(i.size.height-e.size.height)/2);var u=(0,_.localToGlobalPoint)(l,Z?n.scale:s.scale,Z?n:s),d=(0,_.getGlobalNodePosition)(i);i.model.position=u,i.viewFrameOwnerId=s.id,X.updateZonesForNode(i,d);var c=t.map(function(e){return e.id}),h=c.indexOf(a.id)===-1,f=c.indexOf(s.id)===-1;h&&a.active&&(a.updateBounds=!0,t.push(a)),f&&s.active&&(s.updateBounds=!0,t.push(s))}),Z&&(n.updateBounds=!0,t.push(n)),i({viewFrames:t}),D(t,function(){ie.trigger("nodes-position-changed",[e])})}function I(e){if(G.ui){var n=new v["default"]({rootEl:G.ui,viewManager:e},t);return n.on("splitter-position-changed",function(e,t){var n="left-to-right"===W||"right-to-left"===W,r=t.diff,o=e.model.viewFrameA,a=e.model.viewFrameB,s=void 0!==r&&null!==r;s&&(n?(o.size.width+=r,a.size.width-=r,a.position.x+=r):(o.size.height+=r,a.size.height-=r,a.position.y+=r),o.customeSized,a.customeSized),t.lastChange?(i({viewFrames:[o,a],quickUpdate:!1}),D([o,a])):s&&i({viewFrames:[o,a],quickUpdate:!0})}),n.on("view-port-position-changed",function(e){var i=te.getViewFrameById(e.id);R(i,e.viewPortPosition,t.animation,function(){var t=te.getViewFrameById(e.id);ie.trigger("view-frames-size-or-position-changed",[[t]])})}),n.on("view-frame-collapsed",function(e){e.expanded=!1,y(e.id)}),n}}function O(e){e.innerHTML="";var t=document.createElement("DIV");t.className="tq-lg-lineage-diagram",t.id="tq_lineage-graph",e.appendChild(t);var i=document.createElement("DIV");return i.className="tq-lg-lineage-ui",e.appendChild(i),{ui:i,diagram:t}}function C(e){J&&(K=null,J.unselect(),J=null,e||(i(),ie.trigger("selected-element-changed",null)))}function z(e,t){var n=(0,E.getBaseElement)(e);n!==J&&(J&&J.unselect(),J=n,J.select()),t?B(J,function(){K=(0,P.getPath)(J,X),i(),ie.trigger("selected-element-changed",e)}):setTimeout(function(){K=(0,P.getPath)(J,X),i(),ie.trigger("selected-element-changed",e)},0)}function B(e,n){var r=null;if(e instanceof g.Link?r=X.maps.nodeMap[e.model.source]:e instanceof g.Node&&(r=e),r){var o=te.getViewFrameForNode(r);o.active||(i({viewFrames:[{id:o.id,expanded:!0}],quickUpdate:!0}),o=te.getViewFrameById(o.id),ie.trigger("view-frames-state-changed",[[o]]));var a=(0,_.getGlobalNodeSize)(r,o.scale),s=(0,_.getGlobalNodePosition)(r),l=(0,_.scaledToGlobalSize)(o.size,o.scale),u={x:s.x+(a.width-l.width)/2,y:s.y+(a.height-l.height)/2};R(o,u,t.animation,function(){n();var e=te.getViewFrameById(o.id);ie.trigger("view-frames-size-or-position-changed",[[e]])})}}function R(e,t,n,r){var o=te.getViewFrameById(e.id),a=(0,_.limitPointPosition)(t,o.viewPortPositionBounds),s=o.viewPortPosition,l=s.x===a.x&&s.y===a.y;n&&!l&&e.active?q(o,a,r):(cancelAnimationFrame(ue),e.viewPortPosition=a,i({viewFrames:[e],quickUpdate:!0}),r&&r())}function D(e,t){function i(n){var r=e[n];if(!r)return void(t&&t());var o=te.getViewFrameById(r.id);return o?void F(o,function(){if(n<e.length)i(n+1);else{var r=e.map(function(e){return te.getViewFrameById(e.id)});ie.trigger("view-frames-size-or-position-changed",[r]),t&&t()}}):void(t&&t())}i(0)}function F(e,i){var n=(0,_.limitPointPosition)(e.viewPortPosition,e.viewPortPositionBounds),r=n.x!==e.viewPortPosition.x||n.y!==e.viewPortPosition.y;r?R(e,n,t.animation,i):i&&i()}function q(e,r,o){function a(s){ue=requestAnimationFrame(function(){var l=(new Date).getTime(),u=1e3/(l-m)||t.minFrameRate,d=1;t.minFrameRate>u&&(d=t.minFrameRate/u),u>t.maxFrameRate&&(d=t.maxFrameRate/u),m=l;var c=e.viewPortPosition,h=c.x===r.x&&c.y===r.y,v=s&&c.x===s.x&&c.y===s.y;if(h||v)return n({viewFrames:[e]}),cancelAnimationFrame(ue),void(o&&o());var y=(0,_.getDiff)(c.x,r.x),b=(0,_.getDiff)(c.y,r.y),x={x:c.x,y:c.y},w=(0,_.getDist)(c,r),E=1-.3*Math.cos(Math.PI*(g-w)/g),P=f,k=p;if(x.x!==r.x){var A=Math.min(y,P*E*d);x.x+=c.x<r.x?A:-A}if(x.y!==r.y){var M=Math.min(Math.abs(b),k*E*d);x.y+=c.y<r.y?M:-M}e.viewPortPosition=x,i({viewFrames:[e],quickUpdate:!0}),a(c)})}var s=e.viewPortPosition,l=(0,_.getDiff)(s.x,r.x),u=(0,_.getDiff)(s.y,r.y),d=e.scale||Y,c=t.animationStep/d.x,h=t.animationStep/d.y,f=void 0,p=void 0;l>u?(f=c,p=c*(u/l)):(f=h*(l/u),p=h);var g=(0,_.getDist)(e.viewPortPosition,r);cancelAnimationFrame(ue);var m=void 0;a()}function j(e){e=e||te.getViewFrames(),i({viewFrames:e,updateBounds:!0}),D(e)}function H(){var e={},t=te.getOverViewFrame().id;X.nodes.forEach(function(i){if(i.model.defaultPosition){var n=(0,_.getGlobalNodePosition)(i);i.model.position=i.model.defaultPosition,X.updateZonesForNode(i,n),i.viewFrameOwnerId&&(e[i.viewFrameOwnerId]=!0);var r=te.isFullScreenMode();e[r?t:i.model.viewFrame]=!0,delete i.viewFrameOwnerId}});var n=Object.keys(e).map(function(e){return{id:e,updateBounds:!0}});i({viewFrames:n}),D(n)}b["default"].apply(this);var G=O(e.graphPlace),V=new s.dia.Graph,U=new s.dia.Paper({el:G.diagram,model:V,elementView:g.NodeView,linkView:g.LinkView,gridSize:1,interactive:function(){return{vertexAdd:!1}},preventContextMenu:!1,width:"100%",height:"100%"}),Y=t.defaultScale,X=void 0,W=t.graphOrientation,Z=t.fullScreenMode,K=null,Q=t.mask,J=null,$=void 0,ee=void 0,te=void 0,ie=this,ne=new s.ui.Keyboard,re=c.clone(t.scaleBounds),oe=c.clone(t.overViewScaleBounds),ae=t.scaleStep;d(e.dataContainer,e.viewFrames),L(),ie.redraw=i,ie.delayedRedraw=n,ie.openViewFrame=m,ie.closeViewFrame=y,ie.setFullScreenMode=A,ie.openOverViewFrame=function(){return m(te.getOverViewFrame().id)},ie.closeOverViewFrame=function(){return y(te.getOverViewFrame().id)},ie.updateNodesPositions=N,ie.combine=a,ie.resetLayout=H,ie.refresh=j,ie.getSelectedElement=function(){return J},ie.getVisibleCells=function(){return V.getCells()},ie.getVisibleNodes=function(){return V.getElements()},ie.getVisibleLinks=function(){return V.getLinks()},ie.setSelectedElement=function(e,t){e?z(e,t):C()},ie.positionViewPort=function(e,t,i,n){var r=te.getViewFrameById(e.id);R(r,t,i,function(){n();var t=te.getViewFrameById(e.id);ie.trigger("view-frames-size-or-position-changed",[[t]])})},ie["export"]=function(e){function t(e,t,i){var n=void 0;"svg"===i?n=new Blob([e],{type:i}):"png"===i&&(n=(0,E.png2Blob)(e)),(0,u["default"])(n,t+"."+i)}e||(e={});var i=e.name||"LG_lineage_diagram_snapshot_"+(0,E.date2String)(new Date);"png"===e.type?(0,x.toDataURL)(U,{backgroundColor:"white",svgOptions:{elementsToRemoveSelector:"",convertImagesToDataUris:!0}}).then(function(e){t(e,i,"png")})["catch"](function(e){"string"==typeof e?alert(e):alert("This type of export is not supported in the Internet Explorer"),console.error(e)}):(0,x.exportToSVG)(U,{elementsToRemoveSelector:"",convertImagesToDataUris:!0}).then(function(e){t(e,i,"svg")})["catch"](function(e){alert(e),console.error(e)})},ie.print=function(){(0,x.exportToSVG)(U,{preserveDimensions:!1,elementsToRemoveSelector:"",convertImagesToDataUris:!0,pdfMode:!0}).then(function(e){var t=window.open("",void 0,"width=1280,height=720");t?(t.document.write(e),t.document.close(),t.print()):alert("You should unblock popup windows for the current url to be able to print this diagram!")})},ie.setData=d,ie.setRouting=function(e){$.setRouting(e)},ie.getRouting=function(){return $.getRouting()},ie.scale=function(e){return e&&(M(e),D(te.getViewFrames())),Y},ie.zoomIn=function(){M({x:Y.x+ae,y:Y.y+ae}),n(void 0,function(){D(te.getViewFrames()),ie.trigger("scale-changed",Y)})},ie.zoomOut=function(){M({x:Y.x-ae,y:Y.y-ae}),n(void 0,function(){D(te.getViewFrames()),ie.trigger("scale-changed",Y)})},ie.zoomToFit=function(){var e=te.getOverViewFrame(),i=e.nodeBounds,r=U.el.clientWidth-2*h.FRAME_OUT_MARGIN,o=U.el.clientHeight-2*h.FRAME_OUT_MARGIN,a=e.scale,s=(0,_.globalToScaledSize)({width:i.width,height:i.height},a),l=r/(s.width+2*t.framePadding.x),u=o/(s.height+2*t.framePadding.y),d=Math.min(l,u);M({x:Y.x*d,y:Y.y*d}),n(void 0,function(){D(te.getViewFrames()),ie.trigger("scale-changed",Y)})},ie.setOrientation=function(e){W=e,i(),ee.setOrientation(e)},ie.getViewFrames=function(){return te.getViewFrames()},ie.getViewFrameById=function(e){return te.getViewFrameById(e)},ie.getOverViewFrame=function(){return te.getOverViewFrame()},ie.setMask=function(e){Q=e,i()},ie.getMask=function(){return Q},ie.isFullScreenMode=function(){return te.isFullScreenMode()};var se=0,le=!1,ue=void 0}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o;var a=e("rappid"),s=r(a),l=e("file-saverjs"),u=n(l),d=e("lodash"),c=r(d),h=e("./viewManager"),f=e("./linkRoutingManager/routingManager"),p=e("./viewFrame"),g=e("./graphElements/elements"),m=e("../htmlUI/viewFramesUI"),v=n(m),y=e("../subscriptionAPI/subscribeable"),b=n(y),x=e("./toSvg"),w=e("../layout/layout"),E=e("../utils/dataUtils"),_=e("../utils/utils"),P=e("../utils/lineageDiagramUtils"),k={UP:38,DOWN:40,LEFT:37,RIGHT:39}},{"../htmlUI/viewFramesUI":39,"../layout/layout":57,"../subscriptionAPI/subscribeable":66,"../utils/dataUtils":67,"../utils/lineageDiagramUtils":69,"../utils/utils":70,"./graphElements/elements":47,"./linkRoutingManager/routingManager":53,"./toSvg":54,"./viewFrame":55,"./viewManager":56,"file-saverjs":2,lodash:"lodash",rappid:"rappid"}],53:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e,t){function i(){r(e.links),l.routers.lgrouter=A,l.routers.metro=M}function n(e){k=e}function r(e){w=e,s()}function o(e){var t=c.indexOf(e)===-1;t&&(e="metro"),e!==E&&(E=e,s())}function s(){_={},P={},w.forEach(function(e){var t={name:E,args:e.get("router").args};e.set("router",t,e.isOnTheGraph()?{}:{silent:!0})})}function h(){_={},P={}}function f(e,t,i){if(e||i){var n=Math.round(t.x),r=Math.round(t.y),o=!(e&&Math.round(e.x)!==n||i&&Math.round(i.x)!==n),a=!(e&&Math.round(e.y)!==r||i&&Math.round(i.y)!==r);return o?"vertical":a?"horizontal":"point"}return"point"}function p(e,t){var i="horizontal"===e.type,n="vertical"===e.type;return{x:e.x+(i?0:t.x),y:e.y+(n?0:t.y),type:e.type}}function g(e){return Math.round(e.x)+"@"+Math.round(e.y)+":"+e.type}function m(e,t){for(var i="horizontal"===e.type,n="vertical"===e.type,r=t,o=p(e,t),a=g(o),s=0===t.x?"trigger":t.x>0?"rise":"fall",l=0===t.y?"trigger":t.y>0?"rise":"fall",u=1,c=1,h=0,f=0;_[a];)r={x:t.x,y:t.y},"trigger"===s?(u=-u,u<0&&h++):"rise"===s?h++:h--,"trigger"===l?(c=-c,c<0&&f++):"rise"===l?f++:f--,r={x:t.x+(i?0:h*d*u),y:t.y+(n?0:f*d*c)},o=p(e,r),a=g(o);return r}function v(e){P[e.model.id]&&(P[e.model.id].forEach(function(e){delete _[e]}),delete P[e.model.id])}function y(e,t,i){var n=p(e,t),r=g(n);return _[r]=n,P[i.model.id]||(P[i.model.id]=[]),P[i.model.id].push(r),n}function b(e,t){var i=[],n=void 0;return e.forEach(function(e){if(void 0!==n){var r=n.x===e.x,o=n.y===e.y;if(r)if(n.y<e.y)for(var a=n.y+t;a<e.y;a+=t)i.push({x:e.x,y:a});else for(var s=n.y-t;s>e.y;s-=t)i.push({x:e.x,y:s});else if(o)if(n.x<e.x)for(var l=n.x+t;l<e.x;l+=t)i.push({x:l,y:e.y});else for(var u=n.x-t;u>e.x;u-=t)i.push({x:u,y:e.y})}i.push(e),n=e}),i}var x=this,w=void 0,E=e.linkRouting||t.linkRouting,_={},P={},k=e.bounds;x.setData=r,x.setRouting=o,x.resetRouting=h,x.setBounds=n,x.getRouting=function(){return E};var A=function(){return function(e,t,i){var n={step:10},r=l.routers.manhattan(e,a.extend({},n,t),i);this._findConnectionPoints(r);var o=b([this.sourcePoint].concat(r).concat([this.targetPoint]),n.step),s=[];v(i);for(var u={x:0,y:0},d=0;d<o.length;d++){var c=o[d-1],h=o[d],p=o[d+1];h.type=f(c,h,p),u=m(h,u)}return o.forEach(function(e){var t=y(e,u,i);r.indexOf(e)!==-1&&s.push(t)}),s.map(function(e){return{x:Math.min(Math.max(e.x,k.x),k.x+k.width),y:Math.min(Math.max(e.y,k.y),k.y+k.height)}})}}(),M=function(){var e={diagonalCost:null,directions:function(){var e=this.step,t=this.diagonalCost||Math.ceil(Math.sqrt(e*e<<1));return[{offsetX:e,offsetY:0,cost:e},{offsetX:e,offsetY:e,cost:t},{offsetX:0,offsetY:e,cost:e},{offsetX:-e,offsetY:e,cost:t},{offsetX:-e,offsetY:0,cost:e},{offsetX:-e,offsetY:-e,cost:t},{offsetX:0,offsetY:-e,cost:e},{offsetX:e,offsetY:-e,cost:t}]},maxAllowedDirectionChange:45,fallbackRoute:function(e,t){var i=e.theta(t),n={x:t.x,y:e.y},r={x:e.x,y:t.y};if(i%180>90){var o=n;n=r,r=o}var a=i%90<45?n:r,s=u.line(e,a),l=90*Math.ceil(i/90),d=u.point.fromPolar(s.squaredLength(),u.toRad(l+135),a),c=u.line(t,d),h=s.intersection(c);return h?[h.round(),t]:[t]}};return function(t,i,n){return A.call(this,t,a.extend({},e,i),n)}}();i()}Object.defineProperty(i,"__esModule",{value:!0}),i.ENABLE_ROUTINGS=void 0,i.RoutingManager=r;var o=e("lodash"),a=n(o),s=e("rappid"),l=n(s),u=l.g,d=7,c=i.ENABLE_ROUTINGS=["metro","normal","manhattan","orthogonal","lgrouter"]},{lodash:"lodash",rappid:"rappid"}],54:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e,t){t=t||{};var i=e.viewport.getAttribute("transform");e.viewport.removeAttribute("transform");var n=e.getContentBBox(),r=t.convertHtml?u(e):l(e);if(e.viewport.setAttribute("transform",i||""),t.pdfMode){r.removeAttribute("style"),r.setAttribute("preserveAspectRatio","xMidYMid meet"),r.removeAttribute("height"),t.preserveDimensions?r.setAttribute("width",n.width.toString()):r.setAttribute("width","100%");var d=40;r.setAttribute("viewBox",[n.x-d,n.y-d,n.x+n.width+d,n.y+n.height+d].join(" "))}else r.removeAttribute("style"),t.preserveDimensions?(r.setAttribute("width",n.width.toString()),r.setAttribute("height",n.height.toString())):(r.setAttribute("width","100%"),r.setAttribute("height","100%")),r.setAttribute("viewBox",""+n.x+" "+n.y+" "+n.width+" "+n.height);var h=!window.ActiveXObject&&"ActiveXObject"in window;if(h&&(o(r.querySelectorAll("text")),!Object.getOwnPropertyDescriptor(SVGElement.prototype,"classList")&&HTMLElement&&Object.getOwnPropertyDescriptor(HTMLElement.prototype,"classList"))){var f=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"classList");Object.defineProperty(SVGElement.prototype,"classList",f)}var p=s(r),g=document.createElementNS("http://www.w3.org/2000/svg","defs");return g.id="extracted-styles",p.forEach(function(e,t){var i=document.createElement("DIV");i.id="extracted-file-"+t,i.innerHTML="<style>"+p+"</style>",g.appendChild(i.firstChild)}),r.insertBefore(g,r.firstChild),t.elementsToRemoveSelector&&c(r.querySelectorAll(t.elementsToRemoveSelector),function(e){return e.remove()}),a(r.querySelectorAll("image")).then(function(){return(new XMLSerializer).serializeToString(r)})}function o(e){c(e,function(e){var t=e.getAttribute("text-anchor"),i=e.getAttribute("transform");if("middle"===t&&i.indexOf("translate")){e.removeAttribute("text-anchor");var n=i.match(/,([\d,.]+)\)/)[1];e.setAttribute("transform","translate("+y.LABEL_LEFT_RIGHT_PADDING+", "+n+")")}})}function a(e){var t=[];return c(e,function(e){t.push(new Promise(function(t){e||t();var i=e.getAttribute("xlink:href")||e.getAttribute("href");v.util.imageToDataUri(i,function(i,n){e.setAttribute("xlink:href",n),t()})}))}),Promise.all(t)}function s(e){function t(e,t){if(!e)return!0;for(var i=0;i<t.length;i++)if(e.indexOf(t[i])!==-1)return!0;return!1}for(var i=[],n=e.querySelectorAll("*"),r=[],o=0;o<n.length;o++)for(var a=n[o],s=a.classList,l=0;l<s.length;l++)r.push(s[l]);for(var u=0;u<document.styleSheets.length;u++){var d=void 0;try{var c=document.styleSheets[u];if(d=c.cssRules||c.rules,!d)continue}catch(h){continue}for(var f=[],p=0;p<d.length;p++){var g=d[p],m=t(g.selectorText,r),v=w.indexOf(g.selectorText)===-1&&m;g instanceof CSSStyleRule&&v&&f.push(g.cssText)}i.push(f.join("\n"))}return i}function l(e){var t=e.svg.cloneNode(!0);return t}function u(e){var t=e.svg.cloneNode(!0),i=e.model.get("cells");return c(t.querySelectorAll("g.element"),function(t){var n=t.getAttribute("model-id"),r=e.el.querySelector(".derivation-node[id='"+n+"']");if(r){var o=void 0,a=Boolean(navigator.userAgent.match(/Trident.*rv\:11\./));if(a)o=d(r,x);else{o=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");var s=i.get(n),l=s.get("size");o.setAttribute("width",l.width+b),o.setAttribute("height",l.height+b);var u=r.cloneNode(!0);u.style.transform=null;var c=r.querySelector(".derivation-node_body"),h=u.querySelector(".derivation-node_body");0!==c.scrollTop&&(h.firstChild.style.marginTop=-c.scrollTop+"px"),o.appendChild(u)}t.setAttribute("class",t.getAttribute("class"));var f=t.querySelector(".export-anchor");f.removeAttribute("transform");var p=t.querySelector(".body");f.removeChild(p),f.appendChild(o)}}),t}function d(e,t){function i(e){if(e instanceof HTMLElement){if(n(e)){var t=document.createElementNS("http://www.w3.org/2000/svg","rect"),l=r(e),u=o(e),d=window.getComputedStyle(e);t.setAttribute("fill",d.backgroundColor),t.setAttribute("stroke",d.borderColor),t.setAttribute("stroke-width",d.borderWidth),t.setAttribute("x",u),t.setAttribute("y",l),t.setAttribute("width",d.width),t.setAttribute("height",d.height),s.appendChild(t),c(e.childNodes,function(e){i(e,!0)})}}else if(e instanceof Text){var h=e.textContent.trim();if(0===h.length)return;var f=document.createElementNS("http://www.w3.org/2000/svg","text"),p=e.parentNode,g=r(p),m=o(p),v=window.getComputedStyle(p);f.setAttribute("fill",v.color),f.setAttribute("alignment-baseline","hanging"),f.setAttribute("x",m),f.setAttribute("y",g);var y=a(h,+v.width.substring(0,v.width.length-2),v.font);
if(y===h.length)f.textContent=h;else{var b=2;f.textContent=h.substring(0,y-b)+"..."}s.appendChild(f)}}function n(e){for(var i=0;i<t.length;i++){var n=e.matches?e.matches:e.msMatchesSelector;if(n.apply(e,[t[i]]))return!1}return!0}function r(e){return"derivation-node"!==e.className?e.offsetTop+e.clientTop+(e.offsetParent?r(e.offsetParent):0):0}function o(e){return"derivation-node"!==e.className?e.offsetLeft+e.clientLeft+(e.offsetParent?o(e.offsetParent):0):0}function a(e,t,i){var n=document.createElement("canvas"),r=n.getContext("2d");r.font=i;var o=r.measureText(e).width;if(o<=t)return e.length;var a=.85;return Math.floor(e.length*(t/o)*a)}var s=document.createElementNS("http://www.w3.org/2000/svg","g");return i(e),s}function c(e,t){for(var i=0;i<e.length;i++)t(e[i])}function h(e,t){return new Promise(function(i){var n=g.clone(t.svgOptions),o=e.toSVG;e.toSVG=function(t){r(e,n).then(function(e){t(e)})},e.toPNG(function(e){i(e)}),e.toSVG=o})}function f(e,t,i,n){if(!i&&!n)return{width:e,height:t};var r=e/t;return i=i||n*r,n=n||i/r,n*r<=i?{width:n*r,height:n}:{width:i,height:i/r}}Object.defineProperty(i,"__esModule",{value:!0}),i.EXCLUDED_ELEMENTS=i.PNG_CONTENT_PADDING=i.FOREIGN_OBJECT_PADDING=void 0,i.exportToSVG=r,i.toDataURL=h,i.fitRectKeepingAspectRatio=f;var p=e("lodash"),g=n(p),m=e("rappid"),v=n(m),y=e("./graphElements/elements"),b=i.FOREIGN_OBJECT_PADDING=2,x=(i.PNG_CONTENT_PADDING=1,i.EXCLUDED_ELEMENTS=[".dn-arrow","img",".derivation-node_body-scroller"]),w=["body"];i["default"]=r},{"./graphElements/elements":47,lodash:"lodash",rappid:"rappid"}],55:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e,t){function i(e){B=e.scale?e.scale:N._scaleWillApplied?N._scaleWillApplied(t.defaultScale):t.defaultScale,O=e.nodeBounds?e.nodeBounds:y(),e.viewPortPosition&&(R=e.viewPortPosition),C=e.viewPortPositionBounds?e.viewPortPositionBounds:b(),q=x()}function n(e){B=N._scaleWillApplied?N._scaleWillApplied(e):e,v(),w()}function r(){return B}function o(){I=void 0}function a(e,t){return void 0!==e&&(R.x=e),void 0!==t&&(R.y=t),{x:R.x,y:R.y}}function p(){return z.nodes.filter(function(e){return S(e)})}function g(t){N.movingByItself=!0,N.attr({rect:{width:t.width,height:t.height}}),N.resize(t.width,t.height),N.size=t,N.model.width=t.width,N.model.height=t.height,N.movingByItself=!1;var i=s.util.breakText(e.label,{width:N.size.width-2*d}),n=i.indexOf("\n")===-1?i:i.substring(0,i.indexOf("\n"))+"...";N.attr("text/text",n)}function m(e){var i=(0,l.getLocalNodePosition)(e,B,N);e.position(i.x,i.y),e.setSize(F),t.clipNodes&&T(e)}function v(){O=y(),C=b()}function y(){var e={minX:1/0,maxX:-(1/0),minY:1/0,maxY:-(1/0),width:void 0,height:void 0},t=p();return 0!==t.length?(t.forEach(function(t){var i=(0,l.getGlobalNodePosition)(t),n=(0,l.scaledToGlobalSize)(t.calculateSize(F),B);e.minX=Math.min(e.minX,i.x),e.minX===i.x&&(e.minXNode=t),e.maxX=Math.max(e.maxX,i.x+n.width),e.maxX===i.x+n.width&&(e.maxXNode=t),e.minY=Math.min(e.minY,i.y),e.minY===i.y&&(e.minYNode=t),e.maxY=Math.max(e.maxY,i.y+n.height),e.maxY===i.y+n.height&&(e.maxYNode=t)}),e.width=e.maxX-e.minX,e.height=e.maxY-e.minY):(e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e.width=0,e.height=0),e}function b(){if(!O)return null;var e=(0,l.scaledToGlobalSize)(N.size,B),t=(0,l.extendBounds)(O,j),i={minX:t.minX,maxX:t.maxX-e.width,minY:t.minY,maxY:t.maxY-e.height,width:t.maxX-e.width-t.minX,height:t.maxY-e.height-t.minY};if(i.width<0){var n=(e.width-t.width)/2;i.minX=t.minX-n,i.maxX=i.minX,i.width=0}if(i.height<0){var r=(e.height-t.height)/2;i.minY=t.minY-r,i.maxY=i.minY,i.height=0}return i}function x(){var e=(0,l.scaledToGlobalSize)(N.size,B);return{minX:R.x,maxX:R.x+e.width,minY:R.y,maxY:R.y+e.height,width:R.x+e.width-R.x,height:R.y+e.height-R.y}}function w(){R=(0,l.limitPointPosition)(R,C)}function E(e,i){var n=(0,l.getGlobalNodePosition)(e),r=e.calculateSize(F),o=(0,l.scaledToGlobalSize)(r,B),a=n,s={x:n.x+o.width,y:n.y},u={x:n.x,y:n.y+o.height},d={x:n.x+o.width,y:n.y+o.height},c=k(a),h=k(s),f=k(u),p=k(d),g=c&&h&&f&&p,m=c||h||f||p;return t.clipNodes?m:i&&m||!i&&g}function _(e,t){var i=e.position(),n=(0,l.localToGlobalPoint)(i,B,t||N),r=e.calculateSize(F),o=(0,l.scaledToGlobalSize)(r,B),a=n,s={x:n.x+o.width,y:n.y},u={x:n.x,y:n.y+o.height},d={x:n.x+o.width,y:n.y+o.height},c=A(a),h=A(s),f=A(u),p=A(d),g=c||h||f||p;return g}function P(e){var t=e.position(),i=t,n={x:t.x+e.size.width,y:t.y},r={x:t.x,y:t.y+e.size.height},o={x:t.x+e.size.width,y:t.y+e.size.height},a=M(i),s=M(n),l=M(r),u=M(o);return a||s||l||u}function k(e){return q.minX<=e.x&&e.x<=q.maxX&&q.minY<=e.y&&e.y<=q.maxY}function A(e){return O.minX<=e.x&&e.x<=O.maxX&&O.minY<=e.y&&e.y<=O.maxY}function M(e){return N.constPosition.x<=e.x&&N.constPosition.x+N.size.width>=e.x&&N.constPosition.y<=e.y&&N.constPosition.y+N.size.height>=e.y}function S(e){if(N._ownerTest)return N._ownerTest(e);var t=e.viewFrameOwnerId,i=e.viewFrameOwnerId===N.id,n=N.id===e.model.viewFrame;return t&&i||n&&!t}function T(e){function t(e){var t={x:0,y:0};return q.minX>e.x?t.x=q.minX-e.x:q.maxX<e.x&&(t.x=q.maxX-e.x),q.minY>e.y?t.y=q.minY-e.y:q.maxY<e.y&&(t.y=q.maxY-e.y),t}var i=(0,l.getGlobalNodePosition)(e),n=e.calculateSize(F),r=(0,l.scaledToGlobalSize)(n,B),o=i,a={x:i.x+r.width,y:i.y},s={x:i.x,y:i.y+r.height},u={x:i.x+r.width,y:i.y+r.height},d={x:0,y:0},c=t(o);d.x=Math.abs(c.x)>Math.abs(d.x)?c.x:d.x,d.y=Math.abs(c.y)>Math.abs(d.y)?c.y:d.y,c=t(a),d.x=Math.abs(c.x)>Math.abs(d.x)?c.x:d.x,d.y=Math.abs(c.y)>Math.abs(d.y)?c.y:d.y,c=t(s),d.x=Math.abs(c.x)>Math.abs(d.x)?c.x:d.x,d.y=Math.abs(c.y)>Math.abs(d.y)?c.y:d.y,c=t(u),d.x=Math.abs(c.x)>Math.abs(d.x)?c.x:d.x,d.y=Math.abs(c.y)>Math.abs(d.y)?c.y:d.y;var h=(0,l.globalToScaledPoint)(d,B);e.setClipping(h)}function L(e){var i=Math.min(B.x,B.y),n=(0,l.globalToScaledSize)(e,{x:i,y:i}),r=N.size.width-t.framePadding.x,o=r>=e.minWidth/3?r:N.size.width,a=N.size.height-t.framePadding.y,s=a>=e.minHeight?a:N.size.height,u={width:Math.min(Math.max(e.minWidth,Math.min(n.width,e.maxWidth)),o),height:Math.min(Math.max(e.minHeight,Math.min(n.height,e.maxHeight)),s),maxWidth:o,maxHeight:s};return u}var N=this;N.id=e.id,N.model=e,N.constPosition={x:0,y:0},N.size=f,N.movingByItself=!1,e.singleMode&&e.dataContainer.nodes.forEach(function(e){return e.viewFrameOwnerId=N.id}),N.selectedElement;var I=void 0,O=void 0,C=void 0,z=e.dataContainer,B=void 0,R={x:0,y:0},D=t.elementSize,F=D,q=void 0,j=t.framePadding,H=s.util.breakText(e.label,{width:N.size.width-2*d});s.shapes.basic.Rect.apply(N,[{id:e.id,type:"viewFrame",position:{x:0,y:0},size:N.size,attrs:{rect:{fill:e.backgroundColor,stroke:e.borderColor,"class":"body view-frame",width:N.size.width,height:N.size.height,"stroke-width":t.frameBorderWidth},text:{"x-alignment":"left","text-anchor":"left","font-weight":"bold",ref:"rect","ref-x":d,"ref-y":c+h,text:H.indexOf("\n")===-1?H:H.substring(0,H.indexOf("\n"))+"...",fill:e.borderColor}},z:u.Z_INDEXES.VIEW_FRAME}]),N.model.width&&(N.model.width=Math.abs(Math.max(N.model.width,2*t.framePadding.x+1))),N.model.height&&(N.model.height=Math.abs(Math.max(N.model.height,2*t.framePadding.y+1))),N.on("change:position",function(e,t){if(!N.movingByItself){N.movingByItself=!0,N.position(N.constPosition.x,N.constPosition.y),N.movingByItself=!1;var i={x:N.constPosition.x-t.x,y:N.constPosition.y-t.y},n=(0,l.scaledToGlobalPoint)(i,B),r={x:R.x+n.x,y:R.y+n.y};N.trigger("change-view-port-position",r)}}),i(e,t),N.set("correctPostion",null),N.refreshNodeState=m,N.getNodes=p,N.updateBounds=v,N.clear=o,N.getNodeBounds=function(){return O},N.getViewPortBounds=function(){return q},N.getViewPortPositionBounds=function(){return C},N.getVisibleCells=function(){return I||N.calculateVisibleCells(),I},N.calculateVisibleCells=function(e){e=e||{},F=L(e.elementSize||D),q=x();var t=(0,l.scaledToGlobalSize)(N.size,B),i={x:R.x,y:R.y,width:t.width,height:t.height},n=z.getElementsForRectangle(i),r={},o=n.nodes.filter(function(e){var t=S(e)&&E(e);return t&&(r[e.id]=e),t});o.forEach(function(e){m(e)}),I={nodes:o,links:n.links}},N.setPosition=function(e){N.movingByItself=!0,N.constPosition=e,N.position(N.constPosition.x,N.constPosition.y),N.movingByItself=!1},N.setSize=g,N.positionViewPort=a,N.resetSize=function(){N.model.width=void 0,N.model.height=void 0},N.hitScaledPointTest=M,N.hitTestByScaledPosition=P,N.hitTestByGlobalPosition=_,N.setScale=n,N.getScale=r,N.setElementSize=function(e){D=e,v(),w()},N.getElementSize=function(){return D},N.limitNodePosition=function(e){var t=e.calculateSize(F),i=(0,l.globalToScaledBounds)(C),n=(0,l.getScaledNodePosition)(e,B),r=(0,l.limitPointPosition)(n,i),o={x:r.x+t.width,y:r.y+t.height},a=(0,l.limitPointPosition)(o,i),s=(0,l.scaledToGlobalPoint)(a,B);e.model.position=s}}function o(e,t){function i(){var e=(0,l.getElementSize)(t.graphPlace),i=n.getNodeBounds(),r=i.width&&i.minXNode!==i.maxXNode,a=i.height&&i.minYNode!==i.maxYNode;if(r&&a){var s=e.width/i.width,u=e.height/i.height;s!==u&&(o=u/s)}}var n=this,o=1;n._ownerTest=function(){return!0},n._scaleWillApplied=function(e){return o>1?{x:e.x,y:e.x*o}:{x:e.y/o,y:e.y}},r.apply(n,[e,t]),i()}Object.defineProperty(i,"__esModule",{value:!0}),i.ViewFrame=r,i.OverViewFrame=o;var a=e("rappid"),s=n(a),l=e("../utils/utils"),u=e("./graphElements/elements"),d=8,c=6,h=11,f={width:50,height:50};r.prototype=Object.create(s.shapes.basic.Rect.prototype),i["default"]=r,o.prototype=Object.create(r.prototype)},{"../utils/utils":70,"./graphElements/elements":47,rappid:"rappid"}],56:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e,t){function i(e){if(e){var t=e.model.width||e.model.height,i=e===B?F:!F&&C[e.model.id],n=e===B?F:C[e.model.id];return{id:e.model.id,label:e.model.label,backgroundColor:e.model.backgroundColor,borderColor:e.model.borderColor,active:i,expanded:n,position:e.position(),viewPortPosition:e.positionViewPort(),viewPortPositionBounds:e.getViewPortPositionBounds(),viewPortBounds:e.getViewPortBounds(),nodeBounds:e.getNodeBounds(),size:{width:e.size.width,height:e.size.height},customeSized:t,spaceShare:e.model.spaceShare,updateBounds:!1,isOverView:e===B,scale:e.getScale()}}}function n(e,t){z=e.dataContainer;var i={},n={};B=new l.OverViewFrame({id:"overViewFrame",label:"Overview",dataContainer:z,resurrectElements:!0,borderColor:"#23b0f4",backgroundColor:"#f4f4ff",spaceShare:1},t),i[B.id]=B,R=e.viewFrames.map(function(r){n[r.id]=r.expanded;var o=s.cloneDeep(r);o.dataContainer=e.dataContainer;var a=new l.ViewFrame(o,t);return i[a.id]=a,a}),D=R.concat(B),C=n,O=i,F=e.fullScreenMode,M(D)}function r(e){var t=e.paperOptions,n=I.paperOptions||{},r=(0,f.arrayToMap)(e.viewFrames||[]),s=!n.scale||n.scale.x!==t.scale.x||n.scale.y!==t.scale.y,l=n.width!==t.width||n.height!==t.height,u=n.orientation!==t.orientation,c=(I.elementOptions||{}).elementSize,h=e.elementOptions.elementSize,p=h&&(!c||h.width!==c.width||h.height!==c.height||h.minWidth!==c.minWidth||h.minHeight!==c.minHeight||h.maxWidth!==c.maxWidth||h.maxHeight!==c.maxHeight),g=void 0!==e.fullScreenMode&&e.fullScreenMode!==F,m=o(r)&&!F||g;g&&(F=e.fullScreenMode);var b=e.updateBounds||l||u||s||m,x=l||u||m;p&&a(h),x&&y(t),s&&v(t.scale),(b||p||s)&&d(),D.forEach(function(e){var t=!1,n=r[e.id];if(n){var o=i(e),a=n.updateBounds,s=n.viewPortPosition&&(n.viewPortPosition.x!==o.viewPortPosition.x||n.viewPortPosition.y!==o.viewPortPosition.y),l=n.size&&(n.size.width!==o.size.width||n.size.height!==o.size.height),u=n.position&&(n.position.x!==o.position.x||n.position.y!==o.position.y);l&&!x&&(e.setSize(n.size,n.customeSized),t=!0),u&&!x&&e.setPosition(n.position),(a||l&&!x)&&(e.updateBounds(),t=!0),s&&!x&&(e.positionViewPort(n.viewPortPosition.x,n.viewPortPosition.y),t=!0)}var d=C[e.id]||e===B&&F,c=d&&(t||b||p);c&&e.calculateVisibleCells()}),I=e}function o(e){var t=!1;return R.forEach(function(i){var n=e[i.id];if(n&&void 0!==n.expanded){var r=n.expanded!==C[i.id];C[i.id]=n.expanded,t=t||r}}),t}function a(e){D.forEach(function(t){t.setElementSize(e)})}function d(){D.forEach(function(e){e.updateBounds(),e.positionViewPort()})}function v(e){e&&D.forEach(function(t){var i=t.getScale(),n=t.positionViewPort();t.setScale(e);var r=t.getScale(),o=t.get("size"),a=(0,f.scaledToGlobalSize)(o,i),s=(0,f.scaledToGlobalSize)(o,r),l={x:n.x+a.width/2,y:n.y+a.height/2};t.positionViewPort(l.x-s.width/2,l.y-s.height/2)})}function y(e){var t=k(),i=t.length,n="left-to-right"===e.orientation||"right-to-left"===e.orientation;if(!(0===e.width||0===e.height||i<=0)){var r=0;t.forEach(function(e){r+=e.model.spaceShare});var o=e.width-2*m,a=e.height-2*m,s=o-g*(i-1),l=a-g*(i-1),u=s/r,d=l/r,c=1,h=0,p=0;t.forEach(function(e){n?e.model.width?h+=e.model.width:p+=u*(e.model.spaceShare||1):e.model.height?h+=e.model.height:p+=d*(e.model.spaceShare||1)}),c=n?(s-p)/h:(l-p)/h;var v={x:m,y:m};if("top-to-bottom"===e.orientation)t.forEach(function(e){e.model.width&&(e.model.width=void 0),e.model.height&&(e.model.height*=c);var t={width:1,height:1},i={width:Math.max(o,t.width),height:Math.max(e.model.height?e.model.height:d*(e.model.spaceShare||1),t.height)};e.setPosition(v),e.setSize(i),v={x:m,y:v.y+i.height+g}});else if("bottom-to-top"===e.orientation)for(var y=t.length-1;y>=0;y--){var b=t[y];b.model.width&&(b.model.width=void 0),b.model.height&&(b.model.height*=c);var x={width:o,height:b.model.height?b.model.height:d*(b.model.spaceShare||1)};b.setPosition(v),b.setSize(x),v={x:m,y:v.y+x.height+g}}else if("right-to-left"===e.orientation)for(var w=t.length-1;w>=0;w--){var E=t[w];E.model.width&&(E.model.width*=c),E.model.height&&(E.model.height=void 0);var _={width:E.model.width?E.model.width:u*(E.model.spaceShare||1),height:a};E.setPosition(v),E.setSize(_),v={x:v.x+_.width+g,y:m}}else t.forEach(function(e){e.model.width&&(e.model.width*=c),e.model.height&&(e.model.height=void 0);var t={width:e.model.width?e.model.width:u*(e.model.spaceShare||1),height:a};e.setPosition(v),e.setSize(t),v={x:v.x+t.width+g,y:m}});t.forEach(function(t){t.updateBounds();var i=t.getViewPortPositionBounds(),n=t.getVisibleCells();if(!n||0===n.nodes.length){var r=t.getNodes();if(r.length>0){var o=r[Math.round(Math.random()*(r.length-1))],a=(0,f.getScaledNodePosition)(o,e.scale),s={x:a.x-(t.size.width-o.size.width)/2,y:a.y-(t.size.height-o.size.height)/2},l=(0,f.limitPointPosition)(s,i);t.positionViewPort(l.x,l.y)}}var u=(0,f.limitPointPosition)(t.positionViewPort(),i);t.positionViewPort(u.x,u.y)})}}function b(e,i){var n=[],r=[],o=[],a={};e.forEach(function(e){return e.nodes.forEach(function(e){a[e.id]=e,n.push(e)})}),e.forEach(function(e){return e.links.forEach(function(e){a[e.model.source]&&a[e.model.target]?i.quickUpdate||r.push(e):(a[e.model.source]||a[e.model.target])&&o.push(e)})});var s={},l=[],d=[];if(i.selectedElement){var c=x(i.selectedElement);c.forEach(function(e){var n=w(e,a,o),r=A(e);r&&(C[r.id]||F)&&(n.nodes.forEach(function(e){var n=e.id+"_at_"+r.id,o=L[n];o?o.set("dragged",!1):o=new u.TerminationNode({node:e},t),s[n]=o;var a=E(o,r,i);o.position(a.x,a.y),l.push(o)}),i.quickUpdate||n.links.forEach(function(e){var i=e.id+"_at_"+r.id,n=e.model.source+"_at_"+r.id,o=e.model.target+"_at_"+r.id,l=L[i]||new u.TerminationLink({link:e,source:s[n]||a[e.model.source],target:s[o]||a[e.model.target]},t);s[i]=l,d.push(l)}))});var h=i.selectedElement,f=h instanceof u.Link&&(!(a[h.model.source]||a[h.model.target])||i.quickUpdate);if(f){var p=z.maps.nodeMap,g=A(p[h.model.source]),m=A(p[h.model.target]);if(g&&m){var v=g.id,y=m.id,b=h.model.source+"_at_"+v,P=h.model.target+"_at_"+y,k=s[b]||a[h.model.source],M=s[P]||a[h.model.target],S=k.id+"~#~"+M.id,T=L[S]||new u.TerminationLink({link:h,source:k,target:M},t);s[S]=T,d.push(T)}}}L=s;var N=n.concat(l),I=i.quickUpdate?[]:_(N),O=r.concat(d).concat(I);return N.concat(O)}function x(e){var t=z.maps.nodeMap,i=e instanceof u.Node;return i?[e]:[t[e.model.source],t[e.model.target]]}function w(e,t,i){var n=[],r=[],o={},a=z.maps.nodeMap,s=t[e.id];return s?i.forEach(function(i){if(!o[i.id]){o[i.id]=!0;var s=i.model.source===e.id||i.model.target===e.id,l=A(i.model.source===e.id?a[i.model.target]:a[i.model.source]);if(s&&l){r.push(i);var u=!t[i.model.source];u&&!o[i.model.source]&&(o[i.model.source]=!0,n.push(a[i.model.source]));var d=!t[i.model.target];d&&!o[i.model.target]&&(o[i.model.target]=!0,n.push(a[i.model.target]))}}}):(n.push(e),i.forEach(function(t){if(!o[t.id]){o[t.id]=!0;var i=t.model.source===e.id||t.model.target===e.id;i&&r.push(t)}})),{nodes:n,links:r}}function E(e,t,i){function n(){var e={x:a.x+o.width/2,y:a.y+o.height/2},n=A(r),u=n.getScale(),d=(0,f.getLocalNodePosition)(r,u,n),h={x:d.x+s.width/2,y:d.y+s.height/2},p=t.hitScaledPointTest(h);if(p){var g=h.x-a.x,m=h.y-a.y,v=a.x+o.width-h.x,y=a.y+o.height-h.y,b=1/0;[g,m,v,y].forEach(function(e){b=Math.min(b,e)}),b===g?h.x-=b:b===v?h.x+=b:b===m?h.y-=b:h.y+=b}if(n.id!==t.id){var x=D.map(function(e){return e.id}),w=x.indexOf(t.id),E=x.indexOf(n.id),_=i.paperOptions.orientation,P="left-to-right"===_||"right-to-left"===_;w<E?P?h.x=c.x:h.y=c.y:P?h.x=l.x:h.y=l.y}return{sourcePoint:e,terminationPoint:h}}var r=e.originalNode,o=t.size,a=t.position(),s=r.size,l=a,u={x:a.x+o.width,y:a.y},d={x:a.x,y:a.y+o.height},c={x:a.x+o.width,y:a.y+o.height},p=n(),g=p.sourcePoint,m=p.terminationPoint,v=(0,h.getCrosPoint)(g,m,l,d);return v||(v=(0,h.getCrosPoint)(g,m,l,u)),v||(v=(0,h.getCrosPoint)(g,m,u,c)),v||(v=(0,h.getCrosPoint)(g,m,d,c)),v?{x:v.x-T.width/2,y:v.y-T.height/2}:{x:Math.min(Math.max(m.x+s.width/2,a.x),a.x+o.width),y:Math.min(Math.max(m.y+s.height/2,a.y),a.y+o.height)}}function _(e){function i(e,i){var n=e.id+"~#~"+i.id;return new u.AspectLink({id:n,source:e,target:i},t)}function n(e,t){var i=e.id+"~#~"+t.id,n=t.id+"~#~"+e.id,o=r[i]||r[n],a=N[i]||N[n];return o||a}var r={},o=(0,f.arrayToMap)(e);e.forEach(function(e){var t=(0,p.getBaseElement)(e).aspects;t.forEach(function(t){var a=t.terminationNodes.filter(function(e){return o[e.id]}),s=a.length>0,l=o[t.id]||s,u=A(t),d=C[u.id]||F;if(l&&d){var c=o[t.id]?[t]:a;c.forEach(function(t){var o=n(e,t),a=o||i(e,t);r[a.id]=a})}})}),N=r;var a=Object.keys(r).map(function(e){return N[e]});return a}function P(e,t){var i=t.path,n=t.mask;e.forEach(function(e){var r=(0,p.getBaseElement)(e);n&&r!==t.selectedElement&&(n[r.id]?r.hide():r.show()),r===t.selectedElement?r.select():i&&!i[r.id]?r.blure():r.unblure()})}function k(){return F?[B]:R.filter(function(e){return C[e.id]})}function A(e){if(F)return B;var t=(0,h.getViewFrameIdForNode)(e);return O[t]}function M(){D.forEach(function(e){e.on("change-view-port-position",function(t){if(!e.movingByItself){var n=i(e);n.viewPortPosition=t,S.trigger("change-view-port-position",n)}})})}c["default"].apply(this);var S=this,T=t.terminationNodeSize,L={},N={},I={},O={},C={},z=void 0,B=void 0,R=void 0,D=void 0,F=void 0;n(e,t),S.prepareRenderData=function(e){r(e);var t=k(),i=t.map(function(e){return e.getVisibleCells()}),n=b(i,e);return P(n,e),t.concat(n)},S.getViewFrameForNode=function(e){return i(A(e))},S.getViewFrameOwner=function(e){var t=(0,h.getViewFrameIdForNode)(e);return i(O[t])},S.getVieFrameForNodeByPosition=function(e){if(!F)for(var t=k(),n=0;n<t.length;n++){var r=t[n];if(r.hitTestByScaledPosition(e))return i(r)}},S.getVieFrameByScreenPoint=function(e){for(var t=k(),n=0;n<t.length;n++){var r=t[n];if(r.hitScaledPointTest(e))return i(r)}},S.resetFrameLayout=function(){R.forEach(function(e){e.resetSize()})},S.getViewFrameById=function(e){return i(O[e])},S.getOverViewFrame=function(){return i(B)},S.isFullScreenMode=function(){return F},S.getViewFrames=function(){return D.map(function(e){return i(e)})}}Object.defineProperty(i,"__esModule",{value:!0}),i.FRAME_OUT_MARGIN=i.DISTANCE_BETWEEN_FRAMES=void 0,i.ViewManager=o;var a=e("lodash"),s=r(a),l=e("./viewFrame"),u=e("./graphElements/elements"),d=e("../subscriptionAPI/subscribeable"),c=n(d),h=e("../utils/lineageDiagramUtils"),f=e("../utils/utils"),p=e("../utils/dataUtils"),g=i.DISTANCE_BETWEEN_FRAMES=20,m=i.FRAME_OUT_MARGIN=20;i["default"]=o},{"../subscriptionAPI/subscribeable":66,"../utils/dataUtils":67,"../utils/lineageDiagramUtils":69,"../utils/utils":70,"./graphElements/elements":47,"./viewFrame":55,lodash:"lodash"}],57:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e,t){var i=e.scale,n=(0,y.getGlobalNodePosition)(e.selectedNode),r=[e.selectedNode].concat(e.relativeNodes),o=(0,b.convertLGElementsToLayoutModels)(r,e.relativeLinks,{scale:i}),a=o.nodes,s=o.links,l=a[0],u={nodes:a,links:s,step:t.layoutStep,element:t.elementSize,iterations:t.layoutIterations};c(u);var d={};return a.forEach(function(e){e!==l&&(e.x=n.x+(e.x-l.x),e.y=n.y+(e.y-l.y)),d[e.originalNode.id]={x:e.x,y:e.y}}),d}function a(e,t,i,n){function r(){var t=1/0,i=1/0;a.forEach(function(e){t=Math.min(t,e.x),i=Math.min(i,e.y)});var r=a.length>0?-(1/0):0,o=2*Math.max(n.elementSize.width,n.elementSize.height)*n.scaleBounds.max;a.forEach(function(e){e.originalNode.position.x=e.x-t+o,e.originalNode.position.y=e.y-i+o,r=Math.max(r,e.originalNode.position.x)}),"right-to-left"!==n.graphOrientation&&"bottom-to-top"!==n.graphOrientation||e.forEach(function(e){e.position.x=r-e.position.x}),h||e.forEach(function(e){var t=e.position.x;e.position.x=e.position.y,e.position.y=t}),e.forEach(function(e){e.defaultPosition=g.clone(e.position)})}if(n){var o=(0,b.convertNativeToLayoutModels)(e,t,n),a=o.nodes,c=o.links,h="right-to-left"===n.graphOrientation||"left-to-right"===n.graphOrientation;s(a,c);var f=l(a,c,i,n),p={groups:f,nodes:a,links:c,isHorizontal:h,step:n.layoutStep,element:n.elementSize,iterations:n.layoutIterations};"flow-directed"===n.layoutAlgorithm?d(p):u(p),r()}}function s(e,t){e.forEach(function(e){function i(e){n[e.id]=!0,e.targetLinks.forEach(function(e){n[e.target.id]?r.push(e):i(e.target)}),n[e.id]=!1}var n={},r=[];i(e),r.forEach(function(e){t.splice(t.indexOf(e),1),e.target.sourceLinks.splice(e.target.sourceLinks.indexOf(e),1),e.source.targetLinks.splice(e.source.targetLinks.indexOf(e),1)})})}function l(e,t,i,n){var r=(0,y.arrayToMap)(e),o={},a=(0,y.getElementSize)(n.graphPlace),s="left-to-right"===n.graphOrientation||"right-to-left"===n.graphOrientation,l=i.reduce(function(e,t){return e+t.spaceShare},0);return i.forEach(function(i){o[i.id]||(o[i.id]={id:i.id,prefferedSize:{width:s?a.width/l*i.spaceShare:a.height/l*i.spaceShare,height:s?a.height:a.width},nodes:[],links:[]});var n=[];e.forEach(function(e){e.viewFrame===i.id?o[i.id].nodes.push(e):n.push(e)}),e=n;var u=[];t.forEach(function(e){r[e.source.id].viewFrame===i.id&&r[e.target.id].viewFrame===i.id?o[i.id].links.push(e):r[e.source.id].viewFrame!==i.id&&r[e.target.id].viewFrame!==i.id&&u.push(e)}),t=u}),o.unknown={id:"unknown",nodes:e,links:t},Object.keys(o).map(function(e){return o[e]})}function u(e){var t=e.isHorizontal?[e.step.x||100,e.step.y||15]:[e.step.y||15,e.step.x||100];e.step=e.step||{},(0,v["default"])().step(t).nodeWidth(e.element.width).nodeHeight(e.element.height).nodes(e.nodes).links(e.links).groups(e.groups).layout(e.iterations)}function d(e){u(e);var t=(new f.Layout).nodes(e.nodes).links(e.links).convergenceThreshold(1e-9).jaccardLinkLengths(2*e.step.x||400).flowLayout("x",2*e.step.x||400).avoidOverlaps(!0).handleDisconnected(!0);t.start(100,0,50,void 0,!1)}function c(e){var t=(new f.Layout).nodes(e.nodes).links(e.links).convergenceThreshold(1e-9).jaccardLinkLengths(1.5*e.step.x||350).avoidOverlaps(!0).handleDisconnected(!0);t.start(100,0,50,void 0,!1)}Object.defineProperty(i,"__esModule",{value:!0}),i.combineOperation=o,i.doLayout=a,i.removeCycles=s;var h=e("webcola"),f=r(h),p=e("lodash"),g=r(p),m=e("./sankey"),v=n(m),y=e("../utils/utils"),b=e("../utils/layoutUtils")},{"../utils/layoutUtils":68,"../utils/utils":70,"./sankey":58,lodash:"lodash",webcola:6}],58:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}var r=e("../utils/layoutUtils"),o=n(r),a=e("../utils/utils"),s=function(){function e(){g.forEach(function(e){e.sourceLinks=[],e.targetLinks=[]}),y.forEach(function(e){var t=e.source,i=e.target;"number"==typeof t&&(t=e.source=g[e.source]),"number"==typeof i&&(i=e.target=g[e.target]),t.sourceLinks.push(e),i.targetLinks.push(e)})}function t(){g.forEach(function(e){e.value=Math.max(o.sum(e.sourceLinks,u),o.sum(e.targetLinks,u))||1})}function i(){function e(e){return(e.breadth-1)*(p[0]+c)}m.forEach(function(e){function t(e){return e.filter(function(e){return i[e.source.id]})}var i=(0,a.arrayToMap)(e.nodes),n=e.nodes,r=void 0;n.sort(function(e,i){var n=t(i.sourceLinks).length-t(e.sourceLinks).length;return 0===n?t(i.targetLinks).length-t(e.targetLinks).length:n});for(var o=0,s=o;n.length>0;)r=[],n.forEach(function(e){e.x=o,e.dx=c,t(e.targetLinks).forEach(function(e){r.indexOf(e.source)<0&&r.push(e.source)})}),n=r,++o;e.breadth=o-s,e.nodes.forEach(function(e){e.x=s+(o-1)-e.x})});var t=0;m.forEach(function(i){var n=e(i);i.prefferedSize&&i.breadth>1&&(n=Math.max(n,i.prefferedSize.width));var r=i.breadth>1?n/(i.breadth-1):0;i.nodes.forEach(function(e){e.x=t+e.x*r}),t+=n+p[0]+c})}function n(e){var t=0;e.forEach(function(e){t=Math.max(t,e.length)}),f[1]=t*h+(t-1)*p[1]}function r(e){function t(){var e=o.min(m,function(e){return(f[1]-(e.length-1)*h)/o.sum(e,u)});m.forEach(function(t){t.forEach(function(t,i){t.y=i,t.dy=t.value*e})}),y.forEach(function(t){t.dy=t.value*e})}function i(e){function t(e){return l(e.source)*e.value}m.forEach(function(i){i.forEach(function(i){if(i.targetLinks.length){var n=o.sum(i.targetLinks,t)/o.sum(i.targetLinks,u);i.y+=(n-l(i))*e}})})}function r(e){function t(e){return l(e.target)*e.value}m.slice().reverse().forEach(function(i){i.forEach(function(i){if(i.sourceLinks.length){var n=o.sum(i.sourceLinks,t)/o.sum(i.sourceLinks,u);i.y+=(n-l(i))*e}})})}function a(){m.forEach(function(e){var t={};e.forEach(function(e){for(var i=p[1]+h,n=e.y-e.y%i;t[n];)n+=i;e.y=n,t[n]=!0})})}function s(){m.forEach(function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=t;n<e.length;n++){var r=e[n];if(i.order<r.order&&i.y>r.y){var o=i.y;i.y=r.y,r.y=o}}})}function d(){m.forEach(function(e){var t,i,n,r=0,o=e.length;for(e.sort(c),n=0;n<o;++n)t=e[n],i=r-t.y,i>0&&(t.y+=i),r=t.y+t.dy+h;if(i=r-h-f[1],i>0)for(r=t.y-=i,n=o-2;n>=0;--n)t=e[n],i=t.y+t.dy+h-r,i>0&&(t.y-=i),r=t.y})}function c(e,t){return e.y-t.y}var m=o.nest().key(function(e){return e.x}).sortKeys(function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}).entries(g).map(function(e){return e.values});n(m),t(),d();for(var b=1;e>0;--e)r(b*=.99),d(),i(b),d(),v&&s();a()}function s(){function e(e,t){return e.source.y-t.source.y}function t(e,t){return e.target.y-t.target.y}g.forEach(function(i){i.sourceLinks.sort(t),i.targetLinks.sort(e)}),g.forEach(function(e){var t=0,i=0;e.sourceLinks.forEach(function(e){e.sy=t,t+=e.dy}),e.targetLinks.forEach(function(e){e.ty=i,i+=e.dy})})}function l(e){return e.y+e.dy/2}function u(e){return e.value}var d={},c=24,h=8,f=[1,1],p=[100,30],g=[],m=[],v=!1,y=[];return d.nodeWidth=function(e){return arguments.length?(c=+e,d):c},d.nodeHeight=function(e){return arguments.length?(h=+e,d):h},d.nodes=function(e){return arguments.length?(g=e,d):g},d.saveOrder=function(e){return arguments.length?(v=e,d):v},d.groups=function(e){return arguments.length?(m=e,d):m},d.links=function(e){return arguments.length?(y=e,d):y},d.step=function(e){return arguments.length?(p=e,d):p},d.computeNodeBreadths=void 0,d.layout=function(n){return e(),t(),d.computeNodeBreadths?d.computeNodeBreadths(g,y,m):i(),r(n),s(),d},d.relayout=function(){return s(),d},d.link=function(){function e(e){var i=e.source.x+e.source.dx,n=e.target.x,r=o.interpolateNumber(i,n),a=r(t),s=r(1-t),l=e.source.y+e.sy+e.dy/2,u=e.target.y+e.ty+e.dy/2;return"M"+i+","+l+"C"+a+","+l+" "+s+","+u+" "+n+","+u}var t=.5;return e.curvature=function(i){return arguments.length?(t=+i,e):t},e},d};t.exports=s},{"../utils/layoutUtils":68,"../utils/utils":70}],59:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(){return{graphPlace:void 0,mapRootHtml:void 0,dataProvider:void 0,focusNode:void 0,elementSize:{width:120,height:120,minWidth:45,maxWidth:550,minHeight:45,maxHeight:550},overViewElementSize:{width:120,height:120,minWidth:5,maxWidth:550,minHeight:5,maxHeight:550},layoutStep:{x:200,y:100},layoutIterations:32,offsetBetweenGroups:150,colors:{"edg:DatabaseColumn":"#23b0f4","edg:SoftwareProgram":"green","http://edg.topbraid.solutions/model/SoftwareProgram":"green","http://edg.topbraid.solutions/model/Report":"#23b0f4","http://edg.topbraid.solutions/model/ReportColumn":"#ff7410",terminationText:"white",text:"black",unknown:"black","default":"black",selected:"red",blured:"rgba(100, 100, 100, 0.3)",terminationLink:"#9094a8",aspectLink:"rgba(0, 255, 0, 0.5)"},animation:!0,maxFrameRate:50,minFrameRate:10,animationStep:60,fullScreenMode:!0,viewFrames:[],images:{"edg:DatabaseColumn":"src/resources/images/table.png","edg:Table":"src/resources/images/table.png","edg:SoftwareProgram":"src/resources/images/app.png","http://edg.topbraid.solutions/model/SoftwareProgram":"src/resources/images/app.png","edg:LineageModel":"src/resources/images/form.png","edg:Schedule":"src/resources/images/column.png",unknown:"src/resources/images/unknown.png"},resourcePath:"",launchExternal:null,usePOSTExecutor:!1,framePadding:{x:55,y:55},clipNodes:!1,frameBorderWidth:3,showCollapsedFrames:!1,defaultScale:{x:1,y:1},scaleBounds:{min:.7,max:1.5},overViewScaleBounds:{min:.01,max:2},scaleStep:.1,terminationNodeSize:{width:30,height:30},dataZoneSize:{width:800,height:600},zonesInGroup:4,linkRouting:"metro",linkStyles:{"default-link-style":I.DEFAULT_LINK_STYLE,feedpipe:I.FEED_PIPE_LINK_STYLE,"tq-lg-group":I.DEFAULT_GROUP_LINK_STYLE},diagramType:void 0,graphOrientation:"left-to-right",layoutAlgorithm:"sankey",derivationMap:(0,x.getDefaultParametersSet)(),mask:void 0,errorCallBack:void 0}}function a(e){function t(e){function t(e,t){var i={};t.nodes.forEach(function(e){i[e.model.viewFrame]=!0});var n=e.filter(function(e){return i[e.id]});return n.length>0?n:[]}var o=e.focusNodeId,a=e.viewFrame,s=e.diagramType,l=e.hasOwnProperty("offset")?e.offset:null;if(B("fetching"),!$){var u="Data provider is not specified!",c=new Error(u);throw B("error",u),K(c),c}if(!$.fetchData){var h="Data provider has incorrect interface! (There is no 'fetchData' method)",f=new Error(h);throw B("error",h),K(f),f}var g=e.viewFrames&&e.viewFrames.length>0?Promise.resolve({frames:e.viewFrames}):$.getViewFrames(o),m=e.lineageGramViewClass?Promise.resolve(e.lineageGramViewClass):$.getViewClassForResource(o);return Promise.all([g,m]).then(function(e){var u=e[0].frames,c=e[1].dataProvider;return $.fetchData({targetNodeId:o,viewFrame:a,lineageGramViewClass:c,diagramType:s,offset:l}).then(function(e){B("rendering"),(0,O.checkLgRawData)(e);var o=d(e,u),a=t(u,o),s=a.map(function(e){return(0,O.defenitionToPublicModel)(e,ne.isFullScreenMode())});p(o,s),le=e.diagramType,ie=o,ee.pushState(r());var l=e.focusNode||(e.nodes[0]?e.nodes[0].id:l),c=i(l);Y=c,n(c),B("completed"),G.trigger("focus-node-changed",I(c)),G.trigger("history-state-changed",ee.getHistory())})})["catch"](function(e){var t="string"==typeof e?new Error(e):e;B("error",t.message),K(t),console.error(t.message),console.error(t.stack)})}function i(e,t){if(t)for(var i=ie.maps.nodeMap,n=ie.links,r=0;r<n.length;r++){var o=i[n[r].model.source],a=i[n[r].model.target];
if(o.resource===e&&a.resource===t||o.resource===t&&a.resource===e||o.id===e&&a.id===t||o.id===t&&a.id===e)return n[r]}else for(var s=ie.nodes.concat(ie.links),l=0;l<s.length;l++)if(s[l].model.resource===e||s[l].model.id===e)return s[l]}function n(e){if(void 0===e)throw Error("Incorrect value of selected element");ae&&ae.setSelectedElement(e),"lineageDiagram"===X&&ne.setSelectedElement(e,!0),"birdEye"===X&&re.setSelectedElement(e)}function r(){var e=ne.getOverViewFrame();return{nodes:ie.nodes,links:ie.links,focusElement:Y,viewFrames:ne.getViewFrames().filter(function(t){return t.id!==e.id}),selectedElement:U}}function a(e){try{B("rendering"),setTimeout(function(){var t=new M["default"]({nodes:e.nodes,links:e.links},Z);p(t,e.viewFrames),ie=t;var i=void 0===e.selectedElement?e.focusElement:e.selectedElement;Y=e.focusElement,U=i,n(i),B("completed"),G.trigger("focus-node-changed",I(e.focusElement)),G.trigger("history-state-changed",ee.getHistory())},0)}catch(t){B("error"),"string"==typeof t?console.error(t):(console.error(t.message),console.error(t.stack))}}function l(){ne.zoomToFit(),ae&&ae.redraw({viewFrames:ne.getViewFrames(),scale:ne.scale()})}function d(e,t){e||(e={nodes:[],links:[]}),e.nodes||(e.nodes=[]),e.links||(e.links=[]);var i=(0,C.processData)(e);f.doLayout(i.nodes,i.links,t,Z);var n=(0,O.createJointNodes)(i.nodes,Z),r=(0,O.createJointLinks)(i.links,n,Z);return(0,C.createAspectRelations)(n),new M["default"]({nodes:n,links:r},Z)}function h(){var e=new M["default"]({nodes:[],links:[]},Z),t=[];m(e,t),P(e),E($),x()}function p(e,t){y(e,t),L(e,ne.getViewFrames()),A(e),l()}function m(e,t){ne=new b["default"]({graphPlace:J.lineageDiagram,dataContainer:e,viewFrames:t,fullScreenMode:Z.fullScreenMode},Z),ne.on("selected-element-changed",function(e){"completed"===V&&"lineageDiagram"===X&&"completed"===V&&(ae&&ae.setSelectedElement(e),U=(0,O.getBaseElement)(e),G.trigger("selected-element-changed",I(U)))}),ne.on("scale-changed",function(e){"completed"===V&&(ae&&ae.redraw({viewFrames:ne.getViewFrames(),scale:e}),G.trigger("scale-value-changed",{min:Z.scaleBounds.min,max:Z.scaleBounds.max,cur:ne.scale()}))}),ne.on("view-frames-state-changed",function(e){"completed"===V&&(ae&&ae.redraw({viewFrames:e}),G.trigger("view-frame-state-changed",e))}),ne.on("view-frames-size-or-position-changed",function(e){"completed"===V&&ae&&ae.redraw({viewFrames:e})}),ne.on("nodes-position-changed",function(){"completed"===V&&(ae&&ae.redraw(),re.redraw())}),ne.on("cell-double-click",function(e){if("completed"===V&&"lineageDiagram"===X&&(e instanceof g.Link||e instanceof g.TerminationLink)){ne.setSelectedElement(e);var t=e.originalLink||e;z(t)}}),ne.on("link-options-click",function(e){if("completed"===V){var t=e.link,i=e.linkType;"lineageDiagram"===X&&z(t,i)}})}function y(e,t){ne.setData(e,t),ne.scale(Z.defaultScale)}function x(){new c.ui.Tooltip({rootTarget:document.body,target:".termination-node",direction:"auto",padding:15,content:function(e){return e.getElementsByTagName("text")[0].attributes.tooltip.value}}),new c.ui.Tooltip({rootTarget:document.body,target:".tq-lg-short-label",direction:"auto",padding:15,content:function(e){return e.getElementsByTagName("text")[0].attributes.tooltip.value}})}function E(e){se=new u["default"].FlyingPanel({baseElement:J.derivationMap,active:!1,header:"Derivation Map",emptyBody:!1,size:{width:"calc(100% - 200px)",height:"calc(100% - 200px)"},position:{x:"100px",y:"100px"},body:"",resizable:!0}),se.on("size-changed",function(){return oe.resetFocus()}),oe=new w["default"]({rootElement:se.rootHtml.querySelector(".tq-ui-body_container"),dataProvider:e},Z.derivationMap),G.trigger("derivation-map-state-changed"),G.trigger("derivation-map-state-init",oe)}function P(e){re=new k["default"]({el:J.sigmaGraph,scale:ne.scale(),dataContainer:e},Z),re.on("selected-element-changed",function(e){"completed"===V&&"birdEye"===X&&(ae&&ae.setSelectedElement(e),U=(0,O.getBaseElement)(e),G.trigger("selected-element-changed",I(U)))}),re.on("cell-double-click",function(e){if("completed"===V&&"birdEye"===X&&(e instanceof g.Link||e instanceof g.TerminationLink)){re.setSelectedElement(e);var t=e.originalLink||e;z(t)}})}function A(e){re.setData(e)}function S(e,t){return J.mapHTMLElement&&(ae=new _["default"]({el:J.mapHTMLElement,scale:ne.scale(),viewFrames:t,dataContainer:e},Z),ae.on("selected-element-changed",function(e){if("completed"===V){if("lineageDiagram"===X){var t=ne.getVisibleNodes().indexOf(e)===-1;ne.setSelectedElement(e,t)}"birdEye"===X&&re.setSelectedElement(e),U=(0,O.getBaseElement)(e),G.trigger("selected-element-changed",I(U))}}),ae.on("view-frames-position-changed",function(e){function t(n){ne.positionViewPort(n,n.viewPortPosition,Z.animation,function(){n[i]&&t(e[i++])})}if("completed"===V&&0!==e.length){var i=0;t(e[i++])}})),ae}function L(e,t){ae?ae.setData(e,t):S(e,t)}function I(e){if(e){var t=v.cloneDeep(e.model);return t.blured=Boolean(e.get("blured")),t.highlighted=Boolean(e.get("highlighted")),e instanceof g.Node?t.diagramType="node":e instanceof g.Link&&(t.source=t.sourceType,t.target=t.targetType,delete t.sourceType,delete t.targetType,t.diagramType="link"),t}}function z(e,t){if(e instanceof g.Link){var i=ie.maps.nodeMap;oe.openWithRelation({source:i[e.model.source].model,target:i[e.model.target].model,linkType:t}),se.show()}}function B(e,t){V=e,"fetching"===e?te.setState("active",t||"Fetching data"):"rendering"===e?te.setState("active",t||"Rendering graph"):"completed"===e?te.setState("completed"):"error"===e&&te.setState("error",t||"Error has occurred!"),G.trigger("diagram-state-changed",e)}function R(e){e.innerHTML="",e.tabIndex=1;var t=document.createElement("DIV");t.className="tq_lineage",t.id="tq_lineage",e.appendChild(t);var i=document.createElement("DIV");i.className="tq_lineage__graph",i.id="tq_lineage-graph",t.appendChild(i);var n=document.createElement("DIV");n.className="tq_lineage__sigma_graph",n.id="tq_lineage-sigma-graph",t.appendChild(n);var r=document.createElement("DIV");return t.appendChild(r),{container:e,baseDiv:t,lineageDiagram:i,sigmaGraph:n,derivationMap:r,mapHTMLElement:D(Z.mapRootHtml)}}function D(e){var t=void 0;if("string"==typeof e)t=document.getElementById(e);else{if("object"!==("undefined"==typeof e?"undefined":s(e)))return{};t=e}var i=void 0;return t&&(t.innerHTML="",i=document.createElement("DIV"),i.className="tq-lg__map",t.appendChild(i)),i}function F(){J.sigmaGraph.style.opacity=1,J.sigmaGraph.style.pointerEvents="auto",J.lineageDiagram.style.opacity=0,J.lineageDiagram.style.pointerEvents="none","completed"===V&&("none"!==X?(re.setSelectedElement(ne.getSelectedElement()),re.refresh()):(ne.resize(),re.sigmaGraph.refresh())),X="birdEye",G.trigger("current-view-changed",X)}function q(){if(J.sigmaGraph.style.opacity=0,J.sigmaGraph.style.pointerEvents="none",J.lineageDiagram.style.opacity=1,J.lineageDiagram.style.pointerEvents="auto","completed"===V)if("none"!==X)if(re.selectedElement){var e=ne.getVisibleNodes(),t=re.selectedElement instanceof g.Node,i=e.indexOf(re.selectedElement)===-1,n=re.selectedElement instanceof g.Link,r=e.indexOf(ie.maps.nodeMap[re.selectedElement.model.source])===-1,o=t&&i||n&&r;ne.setSelectedElement(re.selectedElement,o)}else ne.redraw();else ne.resize(),ne.redraw();X="lineageDiagram",G.trigger("current-view-changed",X)}function j(){J.sigmaGraph.style.opacity=0,J.sigmaGraph.style.pointerEvents="none",J.lineageDiagram.style.opacity=0,J.lineageDiagram.style.pointerEvents="none",X="none",G.trigger("current-view-changed",X)}var H=this;N["default"].apply(this);var G=this,V="initial",U=null,Y=void 0,X="lineageDiagram",W=o();e&&e.viewFrames&&e.viewFrames.length>0&&(W.viewFrames=void 0);var Z=v.merge(W,e),K=function(e){if(Z.errorCallback&&Z.errorCallback instanceof Function){var t="string"==typeof e?new Error(e):e;Z.errorCallback.call(H,t)}};if(!e.graphPlace)throw new Error("The graph place isn't specified");var Q=void 0;if("string"==typeof e.graphPlace)Q=document.getElementById(e.graphPlace);else{if("object"!==s(e.graphPlace))throw new Error("The graph place isn't specified or specided incorrectly");Q=e.graphPlace}var J=R(Q),$=Z.dataProvider,ee=new T["default"](Z),te=new u["default"].ProgressScreen({baseElement:J.container}),ie=void 0,ne=void 0,re=void 0,oe=void 0,ae=void 0,se=void 0,le=Z.diagramType;G.launchExternal=Z.launchExternal,h(),t({focusNodeId:Z.focusNode,viewFrames:Z.viewFrames,lineageGramViewClass:Z.lineageGramViewClass,diagramType:le}),G.resetLayout=function(){"completed"===V&&ne.resetLayout()},G.zoomIn=function(){return"completed"===V&&(ne.zoomIn(),ae&&ae.redraw({viewFrames:ne.getViewFrames()})),{min:Z.scaleBounds.min,max:Z.scaleBounds.max,cur:"completed"===V?ne.scale():Z.defaultScale}},G.zoomToFit=function(){return"completed"===V&&l(),{min:Z.scaleBounds.min,max:Z.scaleBounds.max,cur:"completed"===V?ne.scale():Z.defaultScale}},G.getCurrentView=function(){return X},G.getState=function(){return V},G.zoomOut=function(){return"completed"===V&&(ne.zoomOut(),ae&&ae.redraw({viewFrames:ne.getViewFrames()})),{min:Z.scaleBounds.min,max:Z.scaleBounds.max,cur:"completed"===V?ne.scale():Z.defaultScale}},G.zoom=function(e){return"completed"===V&&(e&&ne.scale(e),ne.redraw()),{min:Z.scaleBounds.min,max:Z.scaleBounds.max,cur:"completed"===V?ne.scale():Z.defaultScale}},G["export"]=function(e){"completed"===V&&(e||(e={}),e.view=e.view||X,"lineageDiagram"===e.view?ne["export"]({name:e.name,type:e.type}):"birdEye"===e.view&&re["export"]())},G.print=function(){"lineageDiagram"===X?ne.print():"birdEye"===X&&re.print()},G.expandAllNodes=function(){var e=ie.nodes;e.forEach(function(e){e.set("expanded",!0)}),"lineageDiagram"===X&&ne.refresh()},G.collapseAllNodes=function(){var e=ie.nodes;e.forEach(function(e){e.set("expanded",!1)}),"lineageDiagram"===X&&ne.refresh()},G.setRootHtmlForMap=function(e){var t=D(e);Z.mapRootHtml=e,J.mapHTMLElement=t,"completed"===V&&L(ie,ne.getViewFrames())},G.setLayoutAlgorithm=function(e){if("sankey"===e||"flow-directed"===e){Z.layoutAlgorithm=e;var t=ie.nodes.map(function(e){var t=e.model;return delete t.defaultPosition,t.viewFrameOwnerId=null,t}),i=ie.links.map(function(e){return{id:e.model.id,source:e.model.sourceType,target:e.model.targetType}}),n=ne.getViewFrames();f.doLayout(t,i,n,Z),ie.refresh(),ne.refresh(),re.refresh(),ae&&ae.redraw({viewFrames:ne.getViewFrames()})}},G.getLayoutAlgorithm=function(){return Z.layoutAlgorithm},G.setOrientation=function(e){if("completed"===V&&e&&("left-to-right"===e||"right-to-left"===e||"top-to-bottom"===e||"bottom-to-top"===e)){Z.graphOrientation=e;var t=ie.nodes.map(function(t){var i=t.model;return i.default_x=void 0,i.default_y=void 0,i.viewFrameOwnerId=null,t.setOrientation(e),i}),i=ie.links.map(function(e){return{id:e.model.id,source:e.model.sourceType,target:e.model.targetType}}),n=ne.getViewFrames();f.doLayout(t,i,n,Z),ie.refresh(),ne.setOrientation(e),re.refresh(),ae&&ae.refresh({viewFrames:ne.getViewFrames()})}},G.getOrientation=function(){return Z.graphOrientation},G.refresh=function(e){"completed"===V&&("lineageDiagram"===X?e&&"lineageDiagram"!==e||ne.redraw():e&&"birdEye"!==e||re.refresh(),!ae||e&&"graphMap"!==e||ae.refresh({viewFrames:ne.getViewFrames()}))},G.getViewFrames=function(){return"completed"!==V?[]:ne.getViewFrames()},G.getViewFrameById=function(e){if("completed"===V)return ne.getViewFrameById(e)},G.getOverViewFrame=function(){if("completed"===V)return ne.getOverViewFrame()},G.collapseViewFrame=function(e){"completed"===V&&ne.closeViewFrame(e)},G.expandViewFrame=function(e){"completed"===V&&ne.openViewFrame(e)},G.setFullScreenMode=function(e){"completed"===V&&ne.setFullScreenMode(e)},G.isFullScreenMode=function(){return"completed"!==V?Z.fullScreenMode:ne.isFullScreenMode()},G.combine=function(){ne.combine()},G.setSelectedElement=function(e,t){if(void 0!==e)if(null!==e){var r=i(e,t);n(r)}else n(null)},G.setFocusNode=function(e){var n=i(e);if(!(n instanceof g.Node))return void console.error("Incorrect value of element");ee.updateState(r()),B("fetching");var o=n.model.resource;n.model.hasOwnProperty("activeResource")&&(o=n.model.activeResource),t({focusNodeId:o,viewFrame:n.model.viewFrame,offset:n.model.hasOwnProperty("offset")?n.model.offset:null,diagramType:le})},G.undoState=function(){ee.updateState(r());var e=ee.undoState();e&&a(e)},G.redoState=function(){ee.updateState(r());var e=ee.redoState();e&&a(e)},G.getSelectedElement=function(){return I(U)},G.getFocusElement=function(){return I(Y)},G.getDerivationMap=function(){return"completed"===V?oe:void 0},G.getNodes=function(){return"completed"!==V?[]:ie.nodes.map(function(e){return I(e)})},G.getLinks=function(){return"completed"!==V?[]:ie.links.map(function(e){return I(e)})},G.getGraphModel=function(){if("completed"!==V)return{};var e={nodes:ie.nodes.map(function(e){return I(e)}),links:ie.links.map(function(e){return I(e)}),maps:{nodeMap:{},linkMap:{},sourceMap:{},targetMap:{}}};return e.nodes.forEach(function(t){e.maps.nodeMap[t.id]=t}),e.links.forEach(function(t){e.maps.linkMap[t.id]=t,e.maps.sourceMap[t.target]||(e.maps.sourceMap[t.target]=[]),e.maps.targetMap[t.source]||(e.maps.targetMap[t.source]=[]),e.maps.sourceMap[t.target].push(t),e.maps.targetMap[t.source].push(t)}),e},G.setCurrentView=function(e){"lineageDiagram"===e?q():"birdEye"===e?F():"none"===e&&j()},G.setCurrentView(X),G.setRouting=function(e){"completed"===V&&ne.setRouting(e)},G.getRouting=function(){return"completed"===V?ne.getRouting():e.linkRouting},G.setClipping=function(e){Z.clipNodes=e,"completed"===V&&ne.redraw()},G.getClipping=function(){return Z.clipNodes},G.setMask=function(e){var t=ie.maps.idMap,i={};Object.keys(e).forEach(function(n){var r=t[n];i[r]=e[n]}),ne.setMask(i)},G.getMask=function(){var e=ne.getMask(),t=ie.maps.nodeMap,i=ie.maps.linkMap,n={};return e&&Object.keys(e).forEach(function(r){if(e[r]){var o=I(t[r]||i[r]);o&&(n[o.id]=o)}}),n}}Object.defineProperty(i,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.getDefaultParametersSet=o,i.LineageGram=a;var l=e("visualizations-library"),u=r(l),d=e("rappid"),c=n(d),h=e("./layout/layout"),f=n(h),p=e("./jointViews/graphElements/elements"),g=n(p),m=e("lodash"),v=n(m),y=e("./jointViews/lineageDiagram"),b=r(y),x=e("./jointViews/derivationMap/derivationMap"),w=r(x),E=e("./sigmaViews/graphMap"),_=r(E),P=e("./sigmaViews/birdEye"),k=r(P),A=e("./data/dataContainer"),M=r(A),S=e("./stateStorage"),T=r(S),L=e("./subscriptionAPI/subscribeable"),N=r(L),I=e("./data/resourceProvider"),O=e("./utils/dataUtils"),C=e("./data/dataProcessing");i["default"]=a},{"./data/dataContainer":27,"./data/dataProcessing":28,"./data/resourceProvider":30,"./jointViews/derivationMap/derivationMap":41,"./jointViews/graphElements/elements":47,"./jointViews/lineageDiagram":52,"./layout/layout":57,"./sigmaViews/birdEye":61,"./sigmaViews/graphMap":62,"./stateStorage":65,"./subscriptionAPI/subscribeable":66,"./utils/dataUtils":67,lodash:"lodash",rappid:"rappid","visualizations-library":5}],60:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}var o=e("./lineageGram"),a=r(o),s=e("./data/defaultDataProvider"),l=n(s),u=e("./htmlUI/infoPanel"),d=n(u),c=e("./htmlUI/optionsPanel"),h=n(c),f=e("./htmlUI/map"),p=n(f),g=e("./htmlUI/defaultUI"),m=n(g),v=e("./jointViews/derivationMap/derivationMap");e("es6-promise").Promise,e("whatwg-fetch"),t.exports={LineageGram:a.LineageGram,getDefaultParametersSet:a.getDefaultParametersSet,DefaultDataProvider:l["default"],DerivationMap:v.DerivationMap,uiUtils:{DefaultUI:m["default"],Map:p["default"],InfoPanel:d["default"],OptionsPanel:h["default"]}}},{"./data/defaultDataProvider":29,"./htmlUI/defaultUI":31,"./htmlUI/infoPanel":34,"./htmlUI/map":35,"./htmlUI/optionsPanel":36,"./jointViews/derivationMap/derivationMap":41,"./lineageGram":59,"es6-promise":1,"whatwg-fetch":25}],61:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var i=this,n=t.colors,r=null;s["default"].apply(i,[e,t]);var o=i.setSelectedElement;i.setSelectedElement=function(e){var t=void 0;if(e instanceof u.Node||e instanceof u.TerminationNode)t=e.originalNode||e;else if(e instanceof u.Link){var n=e.originalLink||e;t=n}else t=null;i.selectedElement!==t&&(r=t?(0,d.getPath)(t,i._dataContainer):null),o.call(i,t)},i._refreshNodes=function(){var e=i._dataContainer.maps.nodeMap;i.sigmaGraph.graph.nodes().forEach(function(t){if(e[t.id]){var o=e[t.id],a=o.model;t.x=a.position.x,t.y=a.position.y,t.color=i.selectedElement&&(o.id===i.selectedElement.id||i.selectedElement.aspects&&i.selectedElement.aspects.filter(function(e){return e.id===o.id}).length>0)?n.selected:!r||r[o.id]?n[a.typeId]:n.blured}})},i._refreshViewFrames=function(){},i._refreshLinks=function(){i.sigmaGraph.graph.edges().forEach(function(e){e.size=i.selectedElement&&e.id===i.selectedElement.id?5:1,e.color=!r||r[e.id]?i.selectedElement&&e.id===i.selectedElement.id?n.selected:i._aspectLinks[e.id]?n.aspectLink:n.link:n.blured})},i._initialize()}Object.defineProperty(i,"__esModule",{value:!0}),i.BirdEye=o;var a=e("./sigmaBase"),s=r(a),l=e("../jointViews/graphElements/elements"),u=n(l),d=e("../utils/lineageDiagramUtils");o.prototype=Object.create(s["default"].prototype),i["default"]=o},{"../jointViews/graphElements/elements":47,"../utils/lineageDiagramUtils":69,"./sigmaBase":63}],62:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){function i(e){function t(){for(var t=n(i.container),a=e.data.captor.clientX-t.left,s=e.data.captor.clientY-t.top,l=Math.cos(r.sigmaGraph.camera.angle),u=Math.sin(r.sigmaGraph.camera.angle),d=r.sigmaGraph.graph.nodes(),c=[],h=0;h<2;h++){var f=d[h],p={x:f.x*l+f.y*u,y:f.y*l-f.x*u,renX:f[o+"x"],renY:f[o+"y"]};c.push(p)}if(c[0].x===c[1].x&&c[0].y===c[1].y){var g=0===c[0].renX?1:c[0].renX,m=0===c[0].renY?1:c[0].renY;a=c[0].x/g*(a-c[0].renX)+c[0].x,s=c[0].y/m*(s-c[0].renY)+c[0].y}else g=(c[1].renX-c[0].renX)/(c[1].x-c[0].x),m=(c[1].renY-c[0].renY)/(c[1].y-c[0].y),c[1].x===c[0].x&&(g=m),c[1].y===c[0].y&&(m=g),a=(a-c[0].renX)/g+c[0].x,s=(s-c[0].renY)/m+c[0].y;return{x:a*l-s*u,y:s*l+a*u}}var i=r.sigmaGraph.renderers[0],o=i.options.prefix;return t()}function n(e){var t=window.getComputedStyle(e),i=function(e){return parseInt(t.getPropertyValue(e).replace("px",""))||0};return{left:e.getBoundingClientRect().left+i("padding-left"),top:e.getBoundingClientRect().top+i("padding-top")}}var r=this,o={};e.viewFrames.forEach(function(e){return o[e.id]=e}),s["default"].apply(r,[e,t]),r._getData=function(){return{nodes:r._dataContainer.nodes,links:[]}};var a=r.setSelectedElement;r.setSelectedElement=function(e){var t=void 0;if(e instanceof u.Node||e instanceof u.TerminationNode)t=e.originalNode||e;else if(e instanceof u.Link){var i=e.originalLink||e;t=i}else t=null;var n=r.sigmaGraph.graph;r.selectedElement instanceof u.Link&&n.dropEdge(r.selectedElement.id),t instanceof u.Link&&n.addEdge(r._createLink(t)),a.call(r,t)};var l=r.redraw;r.redraw=function(e){l(e),e=e||{},e.viewFrames&&e.viewFrames.forEach(function(e){return o[e.id]=e})};var d=r.setData;r.setData=function(e,t){d(e,t),o={},t.forEach(function(e){return o[e.id]=e})};var c=r._refreshViewFrames;r._refreshViewFrames=function(e){c(e),e.forEach(function(e){return o[e.id]=e})},r._subscribeOnEvents=function(){r.sigmaGraph.bind("clickStage",function(e){for(var t=i(e),n=Object.keys(o).map(function(e){return o[e]}),a=0;a<n.length;a++){var s=n[a];if(s.active){var l={minX:s.viewPortPositionBounds.minX,minY:s.viewPortPositionBounds.minY,maxX:s.viewPortPositionBounds.maxX+s.viewPortBounds.width,maxY:s.viewPortPositionBounds.maxY+s.viewPortBounds.height},u=l.minX<=t.x&&t.x<=l.maxX&&l.minY<=t.y&&t.y<=l.maxY;if(u){var d={id:s.id,viewPortPosition:{x:t.x-s.size.width/2,y:t.y-s.size.height/2}};r.trigger("view-frames-position-changed",[[d]])}}}}),r.sigmaGraph.bind("clickNode",function(e){var t=e.data.node?r._dataContainer.maps.nodeMap[e.data.node.id]:null;r.setSelectedElement(t),r.trigger("selected-element-changed",t)}),r.sigmaGraph.bind("clickEdge",function(e){var t=e.data.edge?r._dataContainer.maps.linkMap[e.data.edge.id]:null;r.setSelectedElement(t),r.trigger("selected-element-changed",t)})},r._initialize()}Object.defineProperty(i,"__esModule",{value:!0}),i.GraphMap=o;var a=e("./sigmaBase"),s=r(a),l=e("../jointViews/graphElements/elements"),u=n(l);o.prototype=Object.create(s["default"].prototype),i["default"]=o},{"../jointViews/graphElements/elements":47,"./sigmaBase":63}],63:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){function i(e,t,i,r){b=i,h.selectedElement=r,t=t||[],h._dataContainer=e;var u=h._getData(),d={nodes:[],edges:[]};u.nodes.forEach(function(e){var t=h._createNode(e);d.nodes.push(t)}),u.links.forEach(function(e){var t=h._createLink(e);d.edges.push(t)});var c=a(u.nodes);c.forEach(function(e){d.edges.push(e)}),y=o(),h.sigmaGraph=new s["default"]({graph:d,container:b,settings:{minNodeSize:0,maxNodeSize:y,nodesPowRatio:1,enableEdgeHovering:!0,edgeHoverColor:"edge",defaultEdgeHoverColor:"#000",edgeHoverSizeRatio:4,edgeHoverExtremities:!0,autoResize:!1,clone:!1,doubleClickZoomingRatio:1}}),h._subscribeOnEvents(),y=o(),h.sigmaGraph.settings("maxNodeSize",y),t.forEach(function(e){e.active?n(e):x[e.id]=l(e)}),h.sigmaGraph.refresh()}function n(e){var t=x[e.id]=x[e.id]||l(e);e&&!t.active&&(h.sigmaGraph.graph.addNode(t.p1),h.sigmaGraph.graph.addNode(t.p2),h.sigmaGraph.graph.addNode(t.p3),h.sigmaGraph.graph.addNode(t.p4),h.sigmaGraph.graph.addEdge(t.top),h.sigmaGraph.graph.addEdge(t.bottom),h.sigmaGraph.graph.addEdge(t.left),h.sigmaGraph.graph.addEdge(t.right),t.active=!0)}function r(e){e&&x[e.id].active&&(h.sigmaGraph.graph.dropEdge(e.id+"__top"),h.sigmaGraph.graph.dropEdge(e.id+"__bottom"),h.sigmaGraph.graph.dropEdge(e.id+"__left"),h.sigmaGraph.graph.dropEdge(e.id+"__right"),h.sigmaGraph.graph.dropNode(e.id+"__TL"),h.sigmaGraph.graph.dropNode(e.id+"__BL"),h.sigmaGraph.graph.dropNode(e.id+"__TR"),h.sigmaGraph.graph.dropNode(e.id+"__BR"),x[e.id].active=!1)}function o(){var e=void 0;if(h._dataContainer.nodes.length<=0)return 0;if(h.sigmaGraph){var i=h.sigmaGraph.renderers[0]||{width:b.clientWidth,height:b.clientHeight};e=t.elementSize.width>t.elementSize.height?i.width/(t.elementSize.width+t.layoutStep.x):i.height/(t.elementSize.height+t.layoutStep.y)}else e=5;return h._getNodeSize?h._getNodeSize(e):e}function a(e){function t(e,t){var n=e.id+"~#tqLgAspectLink#~"+t.id,r=t.id+"~#tqLgAspectLink#~"+e.id;if(!h._aspectLinks[n]&&!h._aspectLinks[r]){var o={id:n,source:e.id,target:t.id,color:p.aspectLink};h._aspectLinks[n]=o,i.push(o)}}h._aspectLinks={};var i=[];return e.forEach(function(e){var i=e.aspects;i.forEach(function(i){t(e,i)})}),i}function l(e){var t=u(e),i=e.borderColor,n={id:e.id+"__TL",label:e.id,x:t.p1.x,y:t.p1.y,size:.3,color:i},r={id:e.id+"__BL",label:e.id,x:t.p3.x,y:t.p3.y,size:.3,color:i},o={id:e.id+"__TR",label:e.id,x:t.p2.x,y:t.p2.y,size:.3,color:i},a={id:e.id+"__BR",label:e.id,x:t.p4.x,y:t.p4.y,size:.3,color:i},s={id:e.id+"__top",source:e.id+"__TL",target:e.id+"__TR",size:10,color:i},l={id:e.id+"__bottom",source:e.id+"__BL",target:e.id+"__BR",size:10,color:i},d={id:e.id+"__left",source:e.id+"__TL",target:e.id+"__BL",size:10,color:i},c={id:e.id+"__right",source:e.id+"__TR",target:e.id+"__BR",size:10,color:i};return{p1:n,p2:r,p3:o,p4:a,top:s,bottom:l,left:d,right:c,active:!1}}function u(e){var t={x:e.viewPortBounds.minX,y:e.viewPortBounds.minY},i={x:t.x+e.viewPortBounds.width,y:t.y},n={x:t.x,y:t.y+e.viewPortBounds.height},r={x:t.x+e.viewPortBounds.width,y:t.y+e.viewPortBounds.height};return{p1:t,p2:i,p3:n,p4:r}}function d(e,t,i){E++,E>=2?(E=0,i(e)):1===E&&setTimeout(function(){1===E&&t(e),E=0},250)}c["default"].apply(this);var h=this,p=t.colors,y=0,b=void 0,x={};h._aspectLinks={},h.selectedElement,h._dataContainer,h._initialize=function(){i(e.dataContainer,e.viewFrames,e.el,e.selectedElement,e.scale)},h["export"]=function(e){var t=e||"LG_bird_eye_snapshot_"+(0,m.date2String)(new Date),i=h.sigmaGraph.renderers[0].snapshot({format:"png",download:!1,background:"transparent",labels:!0,filename:t});(0,g["default"])((0,m.png2Blob)(i),t+".png")},h.print=function(e){var t=e||"LG_bird_eye_snapshot_"+(0,m.date2String)(new Date),i=h.sigmaGraph.renderers[0].snapshot({format:"png",download:!1,background:"transparent",labels:!0,filename:t}),n=window.open("",void 0,"width=1280,height=720");n?(n.document.write('\n                <html>\n                    <body>\n                        <img src="'+i+'"/>\n                    </body>\n                </html>\n            '),n.document.querySelector("img").onload=function(){n.document.close(),n.print()}):alert("You should unblock popup windows for the current url to be able to print this diagram!")},h.setSelectedElement=function(e){var t=void 0;if(e instanceof f.Node||e instanceof f.TerminationNode)t=e.originalNode||e;else if(e instanceof f.Link){var i=e.originalLink||e;t=i}else t=null;var n=h.selectedElement!==t;h.selectedElement=t,n&&h.redraw()},h.setData=function(e,t){h.selectedElement=null,h._dataContainer=e,t=t||[];var i=h._getData();h.sigmaGraph.graph.clear(),y=o(),h.sigmaGraph.settings("maxNodeSize",y),i.nodes.forEach(function(e){var t=h._createNode(e);h.sigmaGraph.graph.addNode(t)}),t.forEach(function(e){var t=l(e);x[e.id]=t,e.active?n(e):x[e.id]=l(e)});var r=a(i.nodes);r.forEach(function(e){h.sigmaGraph.graph.addEdge(e)}),i.links.forEach(function(e){var t=h._createLink(e);h.sigmaGraph.graph.addEdge(t)}),h.sigmaGraph.refresh(),h.redraw()};var w=void 0;h.redraw=function(e){e=e||{},y=o(),h.sigmaGraph.settings("maxNodeSize",y),cancelAnimationFrame(w),w=requestAnimationFrame(function(){h._refreshNodes(),h._refreshLinks(),e.viewFrames&&h._refreshViewFrames(e.viewFrames),h.sigmaGraph.refresh()})},h.refresh=function(){h.redraw()},h._refreshLinks=function(){var e=h.sigmaGraph.graph.edges();e.forEach(function(e){e.id.indexOf("__top")===-1&&e.id.indexOf("__bottom")===-1&&e.id.indexOf("__left")===-1&&e.id.indexOf("__right")===-1&&(e.size=h.selectedElement&&e.id===h.selectedElement.id?5:1,e.color=h.selectedElement&&e.id===h.selectedElement.id?p.selected:h._aspectLinks[e.id]?p.aspectLink:p.link)})},h._refreshNodes=function(){var e=h._dataContainer.maps.nodeMap,t=h.sigmaGraph.graph.nodes();t.forEach(function(t){if(e[t.id]){var i=e[t.id],n=(0,v.getGlobalNodePosition)(i);t.x=n.x,t.y=n.y,t.color=h.selectedElement&&(h.selectedElement.id===t.id||h.selectedElement.aspects&&h.selectedElement.aspects.filter(function(e){return e.id===t.id}).length>0)?p.selected:p[i.model.typeId]}})},h._refreshViewFrames=function(e){e.forEach(function(e){if(e.active){var t=x[e.id],i=u(e);t.p1.x=i.p1.x,t.p1.y=i.p1.y,t.p2.x=i.p2.x,t.p2.y=i.p2.y,t.p3.x=i.p3.x,t.p3.y=i.p3.y,t.p4.x=i.p4.x,t.p4.y=i.p4.y,n(e)}else r(e)})},h._getData=function(){return{nodes:h._dataContainer.nodes,links:h._dataContainer.links}},h._createNode=function(e){var t=(0,v.getGlobalNodePosition)(e),i=e.model;return{id:e.id,label:i.label,x:t.x,y:t.y,size:1,color:e===h.selectedElement||h.selectedElement&&h.selectedElement.aspects&&h.selectedElement.aspects.filter(function(t){return t.id===e.id}).length>0?p.selected:p[i.typeId]}},h._createLink=function(e){return{id:e.id,source:e.model.source,target:e.model.target,size:e===h.selectedElement?5:1,color:e===h.selectedElement?p.selected:"black"}},h._subscribeOnEvents=function(){h.sigmaGraph.bind("clickNode clickStage",function(e){return d(e,function(e){var t=e.data.node?h._dataContainer.maps.nodeMap[e.data.node.id]:null;(t||!e.data.captor.isDragging&&!t)&&(h.setSelectedElement(t),h.trigger("selected-element-changed",t))},function(e){var t=e.data.edge?h._dataContainer.maps.linkMap[e.data.edge.id]:null;h.trigger("cell-double-click",t)})}),h.sigmaGraph.bind("clickEdge",function(e){return d(e,function(e){var t=e.data.edge?h._dataContainer.maps.linkMap[e.data.edge.id]:null;h.setSelectedElement(t),h.trigger("selected-element-changed",t)},function(e){var t=e.data.edge?h._dataContainer.maps.linkMap[e.data.edge.id]:null;h.trigger("cell-double-click",t)})})},s["default"].utils.isPointOnSegment=function(e,t,i,n,r,o,a){var l=Math.abs((t-n)*(r-i)-(e-i)*(o-n)),u=s["default"].utils.getDistance(i,n,r,o),d=l/u;return d<a&&Math.min(i,r)-a<=e&&e<=Math.max(i,r)+a&&Math.min(n,o)-a<=t&&t<=Math.max(n,o)+a};var E=0}Object.defineProperty(i,"__esModule",{value:!0}),i.SigmaBase=o;var a=e("sigma"),s=r(a),l=e("./sigmaPlagins/sigma.renderers.snapshot/sigma.renderers.snapshot"),u=n(l),d=e("../subscriptionAPI/subscribeable"),c=r(d),h=e("../jointViews/graphElements/elements"),f=n(h),p=e("file-saverjs"),g=r(p),m=e("../utils/dataUtils"),v=e("../utils/utils");u.usePlugin(s["default"]),i["default"]=o},{"../jointViews/graphElements/elements":47,"../subscriptionAPI/subscribeable":66,"../utils/dataUtils":67,"../utils/utils":70,"./sigmaPlagins/sigma.renderers.snapshot/sigma.renderers.snapshot":64,"file-saverjs":2,sigma:4}],64:[function(e,t,i){"use strict";function n(e){function t(e,t,i){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",i||"graph."+t);var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r),n=void 0}function i(i){if(i=i||{},i.format&&!(i.format in r))throw Error('sigma.renderers.snaphot: unsupported format "'+i.format+'".');var o=this,a=this instanceof e.renderers.webgl,s=[],l=document.createElement("canvas"),u=l.getContext("2d"),d=!1;n.forEach(function(e){if(o.contexts[e]&&(i.labels!==!1||"labels"!==e)){var t=o.domElements[e]||o.domElements.scene,n=o.contexts[e];~s.indexOf(n)||(d||(l.width=a&&n instanceof WebGLRenderingContext?t.width/2:t.width,l.height=a&&n instanceof WebGLRenderingContext?t.height/2:t.height,d=!0,i.background&&(u.rect(0,0,l.width,l.height),u.fillStyle=i.background,u.fill())),n instanceof WebGLRenderingContext?u.drawImage(t,0,0,t.width/2,t.height/2):u.drawImage(t,0,0),s.push(n))}});var c=l.toDataURL(r[i.format||"png"]);return i.download&&t(c,i.format||"png",i.filename),u=void 0,l=void 0,s=void 0,c}if("undefined"==typeof e)throw"sigma.renderers.snapshot: sigma not in scope.";var n=["scene","edges","nodes","labels"],r={png:"image/png",jpg:"image/jpeg",gif:"image/gif",tiff:"image/tiff"};e.renderers.canvas.prototype.snapshot=i,e.renderers.webgl.prototype.snapshot=i}Object.defineProperty(i,"__esModule",{value:!0}),i.usePlugin=n,i["default"]=n},{}],65:[function(e,t,i){"use strict";function n(e){function t(){return a[l]}function i(){a.length>s&&a.shift()}var n=this;e||(e={});var a=[],s=e.deckLength||o,l=-1;n.pushState=function(e){a.length-1>l&&a.splice(l+1,a.length),a.push(e),i(),l=a.length-1},n.updateState=function(e){a[l]=e},n.getHistory=function(){return{states:(0,r.cloneDeep)(a),currentIndex:l}},n.undoState=function(){return l>0?(l--,t()):null},n.redoState=function(){return l+1<a.length?(l++,t()):null}}Object.defineProperty(i,"__esModule",{value:!0}),i.StateStorage=n;var r=e("lodash"),o=4;i["default"]=n},{lodash:"lodash"}],66:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(){var e=this;e._subscribtions={},
e.on=function(t,i){if(e._subscribtions[t]||(e._subscribtions[t]=[]),!(i&&i instanceof Function))throw new Error("Illegal type of callback!");e._subscribtions[t].push(i)},e.unsubscribe=function(t){a.values(e._subscribtions).forEach(function(e){var i=e.indexOf(t);i!==-1&&e.splice(i,1)})},e.trigger=function(t,i){var n=this;i instanceof Array||(i=[i]),e._subscribtions&&e._subscribtions[t]&&e._subscribtions[t].forEach(function(e){e.apply(n,i)})}}Object.defineProperty(i,"__esModule",{value:!0}),i.Subscribable=r;var o=e("lodash"),a=n(o);i["default"]=r},{lodash:"lodash"}],67:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e?e.originalLink||e.originalNode||e:null}function o(e){if(!e.links&&!e.nodes)throw new Error("There is no data to show!");if(!e.nodes)throw new Error("There is no nodes information in the data, so we have nothing to show!");if(!(e.nodes instanceof Array))throw new Error("'nodes' should be an Array, but it is object!");if(0===e.nodes.length)throw new Error("There is no data to show!");if(e.links&&!(e.links instanceof Array))throw new Error("'links' should be an Array, but it is object!");return!0}function a(e){if(!e.edges&&!e.nodes)throw new Error("There is no data to show!");if(!e.nodes)throw new Error("There is no nodes information in the data, so we have nothing to show!");if(!(e.nodes instanceof Array))throw new Error("'nodes' should be an Array, but it is object!");if(0===e.nodes.length)throw new Error("There is no data to show!");if(e.links&&!(e.edges instanceof Array))throw new Error("'links' should be an Array, but it is object!");return!0}function s(e,t){var i=!t&&!e.collapsed;return{id:e.id,label:e.label,backgroundColor:e.backgroundColor,borderColor:e.borderColor,active:i,expanded:!e.collapsed,position:void 0,viewPortPosition:void 0,viewPortPositionBounds:void 0,viewPortBounds:void 0,nodeBounds:void 0,size:void 0,customeSized:!1,spaceShare:e.spaceShare,updateBounds:!1,isOverView:!1}}function l(e,t){var i=[];return e.forEach(function(e){i.push(new g.Node(e,t))}),i}function u(e,t,i){var n=[],r={};return t.forEach(function(e){r[e.model.id]=e.id}),e.forEach(function(e){var t=f.cloneDeep(e);t.sourceType=e.source,t.targetType=e.target,t.source=r[e.source],t.target=r[e.target],t.routing=i.linkRouting;var o=new g.Link(t,i);n.push(o)}),n}function d(e){function t(e){return e<10?"0"+e:""+e}return t(e.getFullYear())+"_"+t(1+e.getMonth())+"_"+t(e.getDate())+"_"+t(e.getHours())+"_"+t(e.getMinutes())+"_"+t(e.getSeconds())}function c(e){for(var t=atob(e.split(",")[1]),i=new ArrayBuffer(t.length),n=new Uint8Array(i),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);var o=new Blob([i],{type:"image/png"});return o}Object.defineProperty(i,"__esModule",{value:!0}),i.getBaseElement=r,i.checkLgRawData=o,i.checkDmRawData=a,i.defenitionToPublicModel=s,i.createJointNodes=l,i.createJointLinks=u,i.date2String=d,i.png2Blob=c;var h=e("lodash"),f=n(h),p=e("../jointViews/graphElements/elements"),g=n(p)},{"../jointViews/graphElements/elements":47,lodash:"lodash"}],68:[function(e,t,i){"use strict";function n(e,t,i){function n(e){return e.map(function(e){return o(e)})}function r(e,t){var i=(0,f.arrayToMap)(t),n=e.map(function(e){return a(e,i)}).filter(function(e){return e.source&&e.target&&e.source!==e.target});return n.forEach(function(e){e.source.targetLinks.push(e),e.target.sourceLinks.push(e)}),n}function o(e){return{id:e.id,x:e.position.x||Math.random(),y:e.position.y||Math.random(),originalNode:e,width:s.width,height:s.height,targetLinks:[],sourceLinks:[],viewFrame:e.viewFrame}}function a(e,t){var i=t[e.source],n=t[e.target];return{originalLink:e,source:i,target:n,value:1}}var s=i.elementSize,l=n(e,i.elementSize),u=r(t,l);return{nodes:l,links:u}}function r(e,t,i){function n(e,t){var i=(0,f.arrayToMap)(t),n=e.map(function(e){return o(e,i)}).filter(function(e){return e.source&&e.target&&e.source!==e.target});return n.forEach(function(e){e.source.targetLinks.push(e),e.target.sourceLinks.push(e)}),n}function r(e){var t=(0,f.getGlobalNodePosition)(e),i=(0,f.scaledToGlobalSize)(e.size,a);return{id:e.id,x:t.x,y:t.y,originalNode:e,width:i.width,heigth:i.heigth,targetLinks:[],sourceLinks:[]}}function o(e,t){var i=t[e.model.source],n=t[e.model.target];return{originalLink:e,source:i,target:n,value:1}}var a=i.scale,s=e.map(function(e){return r(e)}),l=n(t,s);return{nodes:s,links:l}}function o(e,t){function i(e,t){var i=e.map(function(e){return r(e,t)}).filter(function(e){return e.source&&e.target&&e.source!==e.target});return i.forEach(function(e){e.source.targetLinks.push(e),e.target.sourceLinks.push(e)}),i}function n(e){var t=e.getPortPosition(),i=e.getPort().primitive;return{id:i.id,x:0,y:0,originalNode:i,targetLinks:[],sourceLinks:[],order:t.y}}function r(e,t){var i=e.source.getPort().primitive,n=e.target.getPort().primitive,r=t[i.id],a=t[n.id];return{cacheId:o(i,n),originalLink:e,source:r,target:a,value:1}}function o(e,t){return e.id+"~#tqDMLink#~"+t.id}var a=(0,f.arrayToMap)(e.map(function(e){return n(e)})),s=i(t,a);return{nodes:(0,f.mapToArray)(a),links:s}}function a(e,t){function i(e,t){var i=e.map(function(e){return r(e,t)}).filter(function(e){return e.source&&e.target&&e.source!==e.target});return i.forEach(function(e){e.source.targetLinks.push(e),e.target.sourceLinks.push(e)}),i}function n(e){return{id:e.id,originalNode:e,x:0,y:0,targetLinks:[],sourceLinks:[]}}function r(e,t){var i=t[e.get("source").id],n=t[e.get("target").id];return{originalLink:e,source:i,target:n,value:1}}var o=(0,f.arrayToMap)(e.map(function(e){return n(e)})),a=i(t,o);return{nodes:(0,f.mapToArray)(o),links:a}}function s(e,t){var i=0,n=e.length,r=void 0,o=-1;if(null==t)for(;++o<n;)r=+e[o],r&&(i+=r);else for(;++o<n;)r=+t(e[o],o,e),r&&(i+=r);return i}function l(){}function u(e,t){var i=new l;if(e instanceof l)e.each(function(e,t){i.set(t,e)});else if(Array.isArray(e)){var n=-1,r=e.length,o=void 0;if(null==t)for(;++n<r;)i.set(n,e[n]);else for(;++n<r;)i.set(t(o=e[n],n,e),o)}else if(e)for(var a in e)i.set(a,e[a]);return i}function d(){function e(t,i,n,r){if(i>=a.length)return null!=d?d(t):null!=l?t.sort(l):t;for(var o=-1,s=t.length,c=a[i++],h=void 0,f=void 0,p=u(),g=void 0,m=n();++o<s;)g=p.get(h=c(f=t[o])+""),g?g.push(f):p.set(h,[f]);return p.each(function(t,o){r(m,o,e(t,i,n,r))}),m}function t(e,i){if(++i>a.length)return e;var n=void 0,r=s[i-1];return null!=d&&i>=a.length?n=e.entries():(n=[],e.each(function(e,r){n.push({key:r,values:t(e,i)})})),null!=r?n.sort(function(e,t){return r(e.key,t.key)}):n}function i(){return{}}function n(e,t,i){e[t]=i}function r(){return u()}function o(e,t,i){e.set(t,i)}var a=[],s=[],l=void 0,d=void 0,c=void 0;return c={object:function(t){return e(t,0,i,n)},map:function(t){return e(t,0,r,o)},entries:function(i){return t(e(i,0,r,o),0)},key:function(e){return a.push(e),c},sortKeys:function(e){return s[a.length-1]=e,c},sortValues:function(e){return l=e,c},rollup:function(e){return d=e,c}}}function c(e,t){return e=+e,t-=e,function(i){return e+t*i}}function h(e,t){var i=-1,n=e.length,r=void 0,o=void 0;if(null==t){for(;++i<n;)if(null!=(o=e[i])&&o>=o){r=o;break}for(;++i<n;)null!=(o=e[i])&&r>o&&(r=o)}else{for(;++i<n;)if(null!=(o=t(e[i],i,e))&&o>=o){r=o;break}for(;++i<n;)null!=(o=t(e[i],i,e))&&r>o&&(r=o)}return r}Object.defineProperty(i,"__esModule",{value:!0}),i.convertNativeToLayoutModels=n,i.convertLGElementsToLayoutModels=r,i.convertDMElementsToLayoutModels=o,i.convertJointElementsToLayoutModels=a,i.sum=s,i.map$1=u,i.nest=d,i.reinterpolate=c,i.min=h;var f=e("./utils"),p="$";l.prototype=u.prototype={constructor:l,has:function(e){return p+e in this},get:function(e){return this[p+e]},set:function(e,t){return this[p+e]=t,this},remove:function(e){var t=p+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===p&&delete this[e]},keys:function g(){var g=[];for(var e in this)e[0]===p&&g.push(e.slice(1));return g},values:function m(){var m=[];for(var e in this)e[0]===p&&m.push(this[e]);return m},entries:function v(){var v=[];for(var e in this)e[0]===p&&v.push({key:e.slice(1),value:this[e]});return v},size:function y(){var y=0;for(var e in this)e[0]===p&&++y;return y},empty:function(){for(var e in this)if(e[0]===p)return!1;return!0},each:function(e){for(var t in this)t[0]===p&&e(this[t],t.slice(1),this)}}},{"./utils":70}],69:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return"tq-lg-view-frame-ui-"+e.id}function o(e){return e.viewFrameOwnerId||e.model.viewFrame}function a(e){var t=e.viewPortPositionBounds,i=e.viewPortPosition;return{canMoveUp:t&&i.y>t.minY,canMoveDown:t&&i.y<t.maxY,canMoveLeft:t&&i.x>t.minX,canMoveRight:t&&i.x<t.maxX}}function s(e,t,i,n){var r=e.x,o=e.y,a=t.x,s=t.y,l=i.x,u=i.y,d=n.x,c=n.y,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,x={};if(r==a&&l==d)return null;if(r===a)f=(u-c)/(l-d),g=u-f*l,m=r,v=f*m+g;else if(l===d)h=(o-s)/(r-a),p=o-h*r,m=l,v=h*m+p;else{if(h=(o-s)/(r-a),p=o-h*r,f=(u-c)/(l-d),g=u-f*l,h==f)return null;m=(g-p)/(h-f),v=h*m+p}s<o&&(b=o,o=s,s=b),c<u&&(b=u,u=c,c=b),a<r&&(y=r,r=a,a=y),d<l&&(y=l,l=d,d=y),x.x=m,x.y=v;var w=1;return r-w<=x.x&&x.x<=a+w&&l-w<=x.x&&x.x<=d+w&&o-w<=x.y&&x.y<=s+w&&u-w<=x.y&&x.y<=c+w?x:null}function l(e,t){if(!t)return void e.getLinks().forEach(function(t){l(e,t)});if(t=t.model&&t.model.get?t.model:t,t instanceof c.dia.Element)return void e.getConnectedLinks(t).forEach(function(t){l(e,t)});if(!t.hidden){t.set("vertices",[]);var i=t.get("source").id||t.previous("source").id,n=t.get("target").id||t.previous("target").id,r=t.get("source").port||t.previous("source").port,o=t.get("target").port||t.previous("target").port;if(i&&n){var a=e.getLinks().filter(function(e){if(e.hidden)return!1;var t=e.get("source").id,a=e.get("target").id,s=e.get("source").port,l=e.get("target").port,u=t===i&&a===n&&s===r&&l===o,d=t===n&&a===i&&s===o&&l===r;return u||d});switch(a.length){case 0:case 1:break;default:var s=e.getCell(i),u=s.position(),d=s.attr("."+t.get("source").port);if(!d)return;var h={x:d["ref-x"]+u.x,y:d["ref-y"]+u.y,theta:c.g.point.prototype.theta},f=e.getCell(n),g=f.position(),m=f.attr("."+t.get("target").port);if(!m)return;var v={x:m["ref-x"]+g.x,y:m["ref-y"]+g.y},y=c.g.line(h,v).midpoint(),b=h.theta(v),x=a.indexOf(t),w=p*Math.ceil((x+(a.length%2===0?1:0))/2),E=x%2?1:-1,_=c.g.toRad(b+90*E),P=c.g.point.fromPolar(w,_,y);t.set("vertices",[{x:P.x,y:P.y}])}}}}function u(e,t){function i(e,t){a[e.id]=e,e.aspects.forEach(function(e){return a[e.id]=e});var u=t?r[e.id]:n[e.id];u&&u.forEach(function(e){(!l[e.id]&&t||!s[e.id]&&!t)&&(t?l[e.id]=e:s[e.id]=e,i(o[t?e.model.target:e.model.source],t))})}var n=t.maps.sourceMap,r=t.maps.targetMap,o=t.maps.nodeMap,a={},s={},l={};return o[e.id]?(i(e,!0),i(e,!1)):(s[e.id]=e,l[e.id]=e,i(o[e.model.target],!0),i(o[e.model.source],!1)),f.merge(l,s,a)}Object.defineProperty(i,"__esModule",{value:!0}),i.GAP=void 0,i.cacheIdForViewFrameUI=r,i.getViewFrameIdForNode=o,i.checkPagination=a,i.getCrosPoint=s,i.adjustVertices=l,i.getPath=u;var d=e("rappid"),c=n(d),h=e("lodash"),f=n(h),p=i.GAP=10},{lodash:"lodash",rappid:"rappid"}],70:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e,t){if(!t)return e;var i=Math.max(Math.min(e.x,t.maxX),t.minX),n=Math.max(Math.min(e.y,t.maxY),t.minY);return{x:i,y:n}}function o(e){if(e.position instanceof Function)return e.position();if(e.position)return e.position;throw new Error("Incorrect parameter!")}function a(e){if(e.positionViewPort)return e.positionViewPort();if(e.viewPortPosition)return e.viewPortPosition;throw new Error("Incorrect parameter!")}function s(e){return N.clone(e.model.position)}function l(e,t){if(!t)throw new Error("Scale is undefined!");var i=s(e);return h(i,t)}function u(e,t,i){if(!t)throw new Error("Scale is undefined!");var n=s(e);return p(n,t,i)}function d(e,t){var i=c(e);return b(i,t)}function c(e){return e.get("size")}function h(e,t){if(!t)throw new Error("Scale is undefined!");return{x:e.x*t.x,y:e.y*t.y}}function f(e,t){if(!t)throw new Error("Scale is undefined!");return{x:e.x/t.x,y:e.y/t.y}}function p(e,t,i){if(!t)throw new Error("Scale is undefined!");var n=h(e,t);return v(n,t,i)}function g(e,t,i){if(!t)throw new Error("Scale is undefined!");var n=m(e,t,i);return f(n,t,i)}function m(e,t,i){if(!t)throw new Error("Scale is undefined!");var n=o(i),r=a(i),s=h(r,t);return{x:e.x-n.x+s.x,y:e.y-n.y+s.y}}function v(e,t,i){if(!t)throw new Error("Scale is undefined!");var n=o(i),r=a(i),s=h(r,t);return{x:e.x+n.x-s.x,y:e.y+n.y-s.y}}function y(e,t){if(!t)throw new Error("Scale is undefined!");return{width:e.width*t.x,height:e.height*t.y}}function b(e,t){if(!t)throw new Error("Scale is undefined!");return{width:e.width/t.x,height:e.height/t.y}}function x(e,t){var i=h({x:e.minX,y:e.minY},t),n=h({x:e.maxX,y:e.maxY},t);return{minX:i.x,maxX:n.x,minY:i.y,maxY:n.y,width:n.x-i.x,height:n.y-i.y}}function w(e,t){var i=f({x:e.minX,y:e.minY},t),n=f({x:e.maxX,y:e.maxY},t);return{minX:i.x,maxX:n.x,minY:i.y,maxY:n.y,width:n.x-i.x,height:n.y-i.y}}function E(e,t){return{minX:e.minX+t.x,maxX:e.maxX-t.x,minY:e.minY+t.y,maxY:e.maxY-t.y,width:e.maxX-e.minX-2*t.x,height:e.maxY-e.minY-2*t.y}}function _(e,t){return{minX:e.minX-t.x,maxX:e.maxX+t.x,minY:e.minY-t.y,maxY:e.maxY+t.y,width:e.maxX+2*t.x-e.minX,height:e.maxY+2*t.y-e.minY}}function P(e){var t=document.getElementById(e);return{width:t.clientWidth,height:t.clientHeight}}function k(e,t){t=t||"id";var i={};return e.forEach(function(e){i[e[t]]=e}),i}function A(e){return Object.keys(e).map(function(t){return e[t]})}function M(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function S(e,t){var i=Math.min(e,t);return i<0&&(e+=-i,t+=-i),Math.abs(t-e)}function T(e,t,i){function n(e){var i=e instanceof MouseEvent?e:e.touches[0],n=0;i.pageX?n=i.pageX:i.clientX&&(n=i.clientX);var r=n-o;o=n;var s=0;i.pageY?s=i.pageY:i.clientY&&(s=i.clientY);var l=s-a;a=s,t({x:r,y:l})}function r(){document.body.onmousemove=document.body.onmouseup=null,document.body.removeEventListener("mousemove",n),document.body.removeEventListener("mouseup",r),document.body.removeEventListener("touchmove",n),document.body.removeEventListener("touchend",r),i&&i()}var o=0,a=0,s=e instanceof MouseEvent?e:e.touches[0];s.pageX?o=s.pageX:s.clientX&&(o=s.clientX),s.pageY?a=s.pageY:s.clientY&&(a=s.clientY),window.getSelection().removeAllRanges(),document.body.addEventListener("mousemove",n),document.body.addEventListener("mouseup",r),document.body.addEventListener("touchmove",n),document.body.addEventListener("touchend",r)}Object.defineProperty(i,"__esModule",{value:!0}),i.limitPointPosition=r,i.getScaledViewFramePosition=o,i.getGlobalViewPortPosition=a,i.getGlobalNodePosition=s,i.getScaledNodePosition=l,i.getLocalNodePosition=u,i.getGlobalNodeSize=d,i.getScaledNodeSize=c,i.globalToScaledPoint=h,i.scaledToGlobalPoint=f,i.globalToLocalPoint=p,i.localToGlobalPoint=g,i.localToScaledPoint=m,i.scaledToLocalPoint=v,i.globalToScaledSize=y,i.scaledToGlobalSize=b,i.globalToScaledBounds=x,i.scaledToGlobalBounds=w,i.shrinkBounds=E,i.extendBounds=_,i.getElementSize=P,i.arrayToMap=k,i.mapToArray=A,i.getDist=M,i.getDiff=S,i.onDragStart=T;var L=e("lodash"),N=n(L)},{lodash:"lodash"}]},{},[60])(60)});