!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.NeighborGram=e()}}(function(){var e;return function(){function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}return e}()({1:[function(t,n,o){(function(i,r){!function(t,i){"object"==typeof o&&void 0!==n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.ES6Promise=i()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function o(e){V=e}function a(e){W=e}function s(){return function(){G(c)}}function l(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<j;e+=2){(0,J[e])(J[e+1]),J[e]=void 0,J[e+1]=void 0}j=0}function u(e,t){var n=arguments,o=this,i=new this.constructor(f);void 0===i[ee]&&O(i);var r=o._state;return r?function(){var e=n[r-1];W(function(){return C(r,i,e,o._result)})}():T(o,i,e,t),i}function d(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(f);return _(n,e),n}function f(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function h(e){try{return e.then}catch(e){return ie.error=e,ie}}function y(e,t,n,o){try{e.call(t,n,o)}catch(e){return e}}function m(e,t,n){W(function(e){var o=!1,i=y(n,t,function(n){o||(o=!0,t!==n?_(e,n):w(e,n))},function(t){o||(o=!0,x(e,t))},"Settle: "+(e._label||" unknown promise"));!o&&i&&(o=!0,x(e,i))},e)}function b(e,t){t._state===ne?w(e,t._result):t._state===oe?x(e,t._result):T(t,void 0,function(t){return _(e,t)},function(t){return x(e,t)})}function v(e,t,o){t.constructor===e.constructor&&o===u&&t.constructor.resolve===d?b(e,t):o===ie?x(e,ie.error):void 0===o?w(e,t):n(o)?m(e,t,o):w(e,t)}function _(t,n){t===n?x(t,p()):e(n)?v(t,n,h(n)):w(t,n)}function E(e){e._onerror&&e._onerror(e._result),S(e)}function w(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&W(S,e))}function x(e,t){e._state===te&&(e._state=oe,e._result=t,W(E,e))}function T(e,t,n,o){var i=e._subscribers,r=i.length;e._onerror=null,i[r]=t,i[r+ne]=n,i[r+oe]=o,0===r&&e._state&&W(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o=void 0,i=void 0,r=e._result,a=0;a<t.length;a+=3)o=t[a],i=t[a+n],o?C(n,o,i,r):i(r);e._subscribers.length=0}}function P(){this.error=null}function L(e,t){try{return e(t)}catch(e){return re.error=e,re}}function C(e,t,o,i){var r=n(o),a=void 0,s=void 0,l=void 0,c=void 0;if(r){if(a=L(o,i),a===re?(c=!0,s=a.error,a=null):l=!0,t===a)return void x(t,g())}else a=i,l=!0;t._state!==te||(r&&l?_(t,a):c?x(t,s):e===ne?w(t,a):e===oe&&x(t,a))}function I(e,t){try{t(function(t){_(e,t)},function(t){x(e,t)})}catch(t){x(e,t)}}function N(){return ae++}function O(e){e[ee]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function H(e,t){this._instanceConstructor=e,this.promise=new e(f),this.promise[ee]||O(this.promise),F(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):x(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function M(e){return new H(this,e).promise}function A(e){var t=this;return new t(F(e)?function(n,o){for(var i=e.length,r=0;r<i;r++)t.resolve(e[r]).then(n,o)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function k(e){var t=this,n=new t(f);return x(n,e),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(e){this[ee]=N(),this._result=this._state=void 0,this._subscribers=[],f!==e&&("function"!=typeof e&&B(),this instanceof R?I(this,e):D())}function z(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=R}var U=void 0;U=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var F=U,j=0,G=void 0,V=void 0,W=function(e,t){J[j]=e,J[j+1]=t,2===(j+=2)&&(V?V(c):Q())},$="undefined"!=typeof window?window:void 0,Z=$||{},K=Z.MutationObserver||Z.WebKitMutationObserver,X="undefined"==typeof self&&void 0!==i&&"[object process]"==={}.toString.call(i),Y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,J=new Array(1e3),Q=void 0;Q=X?function(){return function(){return i.nextTick(c)}}():K?function(){var e=0,t=new K(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():Y?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===$&&"function"==typeof t?function(){try{var e=t,n=e("vertx");return G=n.runOnLoop||n.runOnContext,s()}catch(e){return l()}}():l();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,oe=2,ie=new P,re=new P,ae=0;return H.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===te&&n<e;n++)this._eachEntry(t[n],n)},H.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,o=n.resolve;if(o===d){var i=h(e);if(i===u&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===R){var r=new n(f);v(r,e,i),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(o(e),t)},H.prototype._settledAt=function(e,t,n){var o=this.promise;o._state===te&&(this._remaining--,e===oe?x(o,n):this._result[t]=n),0===this._remaining&&w(o,this._result)},H.prototype._willSettleAt=function(e,t){var n=this;T(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(oe,t,e)})},R.all=M,R.race=A,R.resolve=d,R.reject=k,R._setScheduler=o,R._setAsap=a,R._asap=W,R.prototype={constructor:R,then:u,catch:function(e){return this.then(null,e)}},z(),R.polyfill=z,R.Promise=R,R})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(t,n,o){!function(e,t){"object"==typeof o&&"string"!=typeof o.nodeName?n.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("FileSaver requires a window with a document");return t(e)}:t(e)}(window||this,function(t,n){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var o=t.document,i=function(){return t.URL||t.webkitURL||t},r=o.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in r,s=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},l=/constructor/i.test(t.HTMLElement)||t.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},d=function(e){var t=function(){"string"==typeof e?i().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},f=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var i=e["on"+t[o]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){u(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},g=function(e,n,o){o||(e=p(e));var u,g=this,h=e.type,y="application/octet-stream"===h,m=function(){f(g,"writestart progress write writeend".split(" "))};if(g.readyState=g.INIT,a)return u=i().createObjectURL(e),void setTimeout(function(){r.href=u,r.download=n,s(r),m(),d(u),g.readyState=g.DONE});!function(){if((c||y&&l)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=c?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,g.readyState=g.DONE,m()},n.readAsDataURL(e),void(g.readyState=g.INIT)}if(u||(u=i().createObjectURL(e)),y)t.location.href=u;else{t.open(u,"_blank")||(t.location.href=u)}g.readyState=g.DONE,m(),d(u)}()},h=g.prototype,y=function(e,t,n){return new g(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&(y=function(e,t,n){return t=t||e.name||"download",n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}),h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,"function"==typeof e&&e.amd&&e("file-saverjs",[],function(){return y}),void 0===n&&(t.saveAs=y),y}})},{}],3:[function(e,t,n){function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(d===setTimeout)return setTimeout(e,0);if((d===o||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){y&&g&&(y=!1,g.length?h=g.concat(h):m=-1,h.length&&l())}function l(){if(!y){var e=r(s);y=!0;for(var t=h.length;t;){for(g=h,h=[];++m<t;)g&&g[m].run();m=-1,t=h.length}g=null,y=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var d,f,p=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:o}catch(e){d=o}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var g,h=[],y=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new c(e,t)),1!==h.length||y||r(l)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],4:[function(t,n,o){(function(i){!function(t){if("object"==typeof o&&void 0!==n)n.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var r;r="undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this,r.TQGramUI=t()}}(function(){return function(){function e(n,o,i){function r(s,l){if(!o[s]){if(!n[s]){var c="function"==typeof t&&t;if(!l&&c)return c(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=o[s]={exports:{}};n[s][0].call(d.exports,function(e){var t=n[s][1][e];return r(t||e)},d,d.exports,e,n,o,i)}return o[s].exports}for(var a="function"==typeof t&&t,s=0;s<i.length;s++)r(i[s]);return r}return e}()({1:[function(e,t,n){"use strict";function o(e){function t(){o.rootHtml.innerHTML="",o.rootHtml.style.borderTop=0!==o.buttons.length?"1px solid #cccccc":null,o.rootHtml.style.borderBottom=0!==o.buttons.length?"1px solid #cccccc":null,o.buttons.forEach(function(e){var t=document.createElement("BUTTON");t.title=e.label,t.className="tq-ui-toolbar__button tq-ui-colored-button",t.innerHTML='<span style="color: '+e.borderColor+'">'+n(e.label)+"</span>",t.style.backgroundColor=e.backgroundColor||"white",t.style.borderColor=e.borderColor||"black",t.onclick=function(t){e.callback(e,t)},o.rootHtml.appendChild(t)})}function n(e){if(e){return e.match(/[a-z'\-]+/gi).filter(function(e){return"and"!==e.toLowerCase()&&"&"!==e}).map(function(e){return e[0]}).join("")}}var o=this;e||(e={}),o.rootHtml=function(){var e=document.createElement("DIV");return e.className="tq-ui-colored-buttons-list",e.innerHTML="",e}(),o.id=e.id||"coloredButtons-"+i++,o.rootHtml.id=o.id,o.buttons=e.buttons||[],t(),o.removeAll=function(){o.buttons=[],t()},o.addButton=function(e){-1===o.buttons.map(function(e){return e.id}).indexOf(e.id)&&(o.buttons.push(e),t())},o.removeButton=function(e){o.buttons.splice(o.buttons.indexOf(e),1),t()}}Object.defineProperty(n,"__esModule",{value:!0}),n.ColoredButtonsList=o;var i=0;n.default=o},{}],2:[function(e,t,n){"use strict";function o(e){function t(){r?(o._triggerButton&&(o._triggerButton.className=o._triggerButton.className.replace(/ tq-ui-selected/gi,"")),o.rootHtml.className=o.rootHtml.className+" tq-ui-collapsed"):(o._triggerButton&&(o._triggerButton.className=o._triggerButton.className+" tq-ui-selected"),o.rootHtml.className=o.rootHtml.className.replace(/ tq-ui-collapsed/gi,""))}function n(e,t){function n(e){o._mouseMove=!0;var n=0;e.pageX?n=e.pageX:e.clientX&&(n=e.clientX);var i=n-a;a=n,t||(o.rootHtml.style.left=o.rootHtml.offsetLeft+i+"px");var l=0;e.pageY?l=e.pageY:e.clientY&&(l=e.clientY);var c=l-s;s=l,t||(o.rootHtml.style.top=o.rootHtml.offsetTop+c+"px"),t?(r(i,c,t),o.trigger("size-changed",{width:o.rootHtml.offsetWidth,height:o.rootHtml.offsetHeight}),-1===t.indexOf("n")&&-1===t.indexOf("w")||o.trigger("position-changed",{x:o.rootHtml.offsetLeft,y:o.rootHtml.offsetTop})):o.trigger("position-changed",{x:o.rootHtml.offsetLeft,y:o.rootHtml.offsetTop})}function i(e){o._mouseMove&&(n(e,!0),o._mouseMove=!1),document.body.onmousemove=document.body.onmouseup=null,document.body.removeEventListener("mousemove",n),document.body.removeEventListener("mouseup",i)}function r(e,t,n){switch(n){case"n":o.rootHtml.style.height=o.rootHtml.offsetHeight-t+"px",o.rootHtml.style.top=o.rootHtml.offsetTop+t+"px";break;case"e":o.rootHtml.style.width=o.rootHtml.offsetWidth+e+"px";break;case"s":o.rootHtml.style.height=o.rootHtml.offsetHeight+t+"px";break;case"w":o.rootHtml.style.width=o.rootHtml.offsetWidth-e+"px",o.rootHtml.style.left=o.rootHtml.offsetLeft+e+"px";break;case"ne":o.rootHtml.style.width=o.rootHtml.offsetWidth+e+"px",o.rootHtml.style.height=o.rootHtml.offsetHeight-t+"px",o.rootHtml.style.top=o.rootHtml.offsetTop+t+"px";break;case"nw":o.rootHtml.style.height=o.rootHtml.offsetHeight-t+"px",o.rootHtml.style.top=o.rootHtml.offsetTop+t+"px",o.rootHtml.style.width=o.rootHtml.offsetWidth-e+"px",o.rootHtml.style.left=o.rootHtml.offsetLeft+e+"px";break;case"se":o.rootHtml.style.width=o.rootHtml.offsetWidth+e+"px",o.rootHtml.style.height=o.rootHtml.offsetHeight+t+"px";break;case"sw":o.rootHtml.style.height=o.rootHtml.offsetHeight+t+"px",o.rootHtml.style.width=o.rootHtml.offsetWidth-e+"px",o.rootHtml.style.left=o.rootHtml.offsetLeft+e+"px"}}var a=0,s=0;e.pageX?a=e.pageX:e.clientX&&(a=e.clientX),e.pageY?s=e.pageY:e.clientY&&(s=e.clientY),window.getSelection().removeAllRanges(),document.body.addEventListener("mousemove",n),document.body.addEventListener("mouseup",i)}s.default.apply(this);var o=this;e||(e={});var r=!e.active;o.markup='\n        <div class="tq-ui-flying-panel"\n            style="\n                width: '+(e.size?e.size.width:"")+";\n                height: "+(e.size?e.size.height:"")+";\n                left: "+(e.position?e.position.x:"")+";\n                top: "+(e.position?e.position.y:"")+';\n            "\n        >\n            <div class="tq-ui-flying-panel_header">\n                <div class="tq-ui-flying-panel_header__header">\n                    <label class="tq-ui-window-header-label">'+(e.header?e.header:"")+'</label>\n                    <img class="tq-ui-windows-collapse-button"/>\n                </div>\n            </div>\n            <div class="tq-ui-body">\n                <div class="tq-ui-body_container '+(e.removeBackground?"tq-ui-body_empty-container":"tq-ui-body_default-container")+'">\n                    '+(e.body&&"string"==typeof e.body?e.body:"")+"\n                </div>\n            </div>\n            "+(e.resizable?'\n                <div class="tq-ui-flying-panel__border tq-ui-top-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-right-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-bottom-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-left-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-top-left-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-top-right-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-bottom-left-border"></div>\n                <div class="tq-ui-flying-panel__border tq-ui-bottom-right-border"></div>\n            ':"")+"\n        </div>";var a=i(e.baseElement);a.innerHTML=o.markup,o.rootHtml=a.querySelector(".tq-ui-flying-panel"),o.id=e.id||"flyingPanel-"+l++,o.rootHtml.id=o.id,o.show=function(e){e&&e.stopPropagation(),r&&(r=!1,t())},o.hide=function(e){e&&e.stopPropagation(),r||(r=!0,t())},function(){if(e.body instanceof Object){o.rootHtml.querySelector(".tq-ui-body_container").appendChild(e.body.rootHtml)}(o.rootHtml.querySelector(".tq-ui-flying-panel_header").addEventListener("mousedown",n),o.rootHtml.querySelector(".tq-ui-windows-collapse-button").onclick=o.hide,e.resizable)&&(o.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-top-border").addEventListener("mousedown",function(e){n(e,"n")}),o.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-right-border").addEventListener("mousedown",function(e){n(e,"e")}),o.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-bottom-border").addEventListener("mousedown",function(e){n(e,"s")}),o.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-left-border").addEventListener("mousedown",function(e){n(e,"w")}),o.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-top-right-border").addEventListener("mousedown",function(e){n(e,"ne")}),o.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-top-left-border").addEventListener("mousedown",function(e){n(e,"nw")}),o.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-bottom-right-border").addEventListener("mousedown",function(e){n(e,"se")}),o.rootHtml.querySelector(".tq-ui-flying-panel__border.tq-ui-bottom-left-border").addEventListener("mousedown",function(e){n(e,"sw")}));o._triggerButton=i(e.triggerButton),t(),o._triggerButton&&(o._triggerButton.onclick=function(){r?o.show():o.hide()})}()}function i(e){var t=void 0;return"string"==typeof e?t=document.getElementById(e):"object"===(void 0===e?"undefined":r(e))&&(t=e),t}Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.FlyingPanel=o;var a=e("./subscriptionAPI/subscribeable"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=0;n.default=o},{"./subscriptionAPI/subscribeable":8}],3:[function(e,t,n){"use strict";function o(e){function t(e){function t(e){var t=e.label,n=e.label+" ("+e.id+")",i=document.createElement("LI");return i.className="tq-ui-property-button",i.title=n,i.innerText=t,i.onclick=function(){o.trigger("selected-element-changed",e.id)},i}var n=o.rootHtml.querySelector("#relatedElements");n.innerHTML="";var i=e.incomings||[];if(i.length){var r=document.createElement("LABEL");r.className="tq-label",r.innerText="Incoming nodes:",n.appendChild(r);var a=document.createElement("UL");a.className="tq-ui-info-panel_related-elements_list",n.appendChild(a),i.forEach(function(e){a.appendChild(t(e))})}var s=e.outgoings||[];if(s.length){var l=document.createElement("LABEL");l.className="tq-label",l.innerText="Outgoing nodes:",n.appendChild(l);var c=document.createElement("UL");c.className="tq-ui-info-panel_related-elements_list",n.appendChild(c),s.forEach(function(e){c.appendChild(t(e))})}}function n(e){var t="";return Object.keys(e).forEach(function(n){t+='<label for="'+n+'" class="tq-label">'+n+'</label>\n                        <input id="'+n+'" type="text" class="tq-ui-property" value="'+e[n]+'" disabled></input>'}),t}r.default.apply(this),e||(e={});var o=this,i=e.placeholder||"Select a diagram element",s='<div class="tq-ui-info-panel_empty-stuff">'+i+"</div>";o.rootHtml=function(){var e=document.createElement("DIV");return e.className="tq-ui-info-panel",e.innerHTML=o.markup,e}(),o.rootHtml.innerHTML=s,o.id=e.id||"infoPanel-"+a++,o.rootHtml.id=o.id,o.setSelectedElement=function(i){if(i){if(o.rootHtml.innerHTML=(e.launchExternal&&"node"===i.diagramType?'<div class="tq-ui-group">\n                      <button id="tqLaunchExternalBtn" class="tq-button" title="View more in new tab.">\n                        More &nbsp;\n                      <span class="glyphicon glyphicon-new-window"></span></button>\n                     </div>':"")+(i.id?'\n                    <label class="tq-label">ID</label>\n                    <input value="'+i.id+'" type="text" class="tq-ui-property" disabled></input>\n                ':"")+(i.label?'\n                    <label class="tq-label">Label</label>\n                    <input value="'+i.label+'" type="text" class="tq-ui-property" disabled></input>\n                ':"")+(i.types?'\n                    <label class="tq-label">Types</label>\n                    <input value="'+i.types+'" type="text" class="tq-ui-property" disabled></input>\n                ':"")+(i.source?'\n                    <label for="linkFrom" class="tq-label">Source</label>\n                    <div id="linkFrom" type="text" class="tq-ui-property-button"></div>\n                ':"")+(i.target?'\n                    <label for="linkTo" class="tq-label">Target</label>\n                    <div id="linkTo" type="text" class="tq-ui-property-button"></div>\n                ':"")+(i.thickness?'\n                    <label for="thickness" class="tq-label">Thickness</label>\n                    <input value="'+i.thickness+'" type="text" class="tq-ui-property" disabled></input>\n                ':"")+(i.data?n(i.data):"")+(i.relations?'\n                    <label for="relatedElements" class="tq-label">Related elements</label>\n                    <div   id="relatedElements" class="tq-ui-info-panel_related-elements"></div>\n                ':""),e.launchExternal&&"node"===i.diagramType){document.getElementById("tqLaunchExternalBtn").onclick=function(){e.launchExternal(i)}}if(i.relations&&t(i.relations),i.source){var r=document.getElementById("linkFrom");r.innerText=i.source.label,r.title=i.source.label+"(ID: "+i.source.id+")",r.onclick=function(){o.trigger("selected-element-changed",i.source.id)}}if(i.target){var a=document.getElementById("linkTo");a.innerText=i.target.label,a.title=i.target.label+"(ID: "+i.target.id+")",a.onclick=function(){o.trigger("selected-element-changed",i.target.id)}}}else o.rootHtml.innerHTML=s},e.selectedElement&&o.setSelectedElement(e.selectedElement)}Object.defineProperty(n,"__esModule",{value:!0}),n.InfoPanel=o;var i=e("./subscriptionAPI/subscribeable"),r=function(e){return e&&e.__esModule?e:{default:e}}(i),a=0;n.default=o},{"./subscriptionAPI/subscribeable":8}],4:[function(e,t,n){"use strict";function o(e){var t=this;e||(e={});var n=e.legends||[];t.markup='\n        <div class="tq-ui-legend-panel_body_legends">\n        '+n.map(function(e){return'\n                <div class="tq-ui-legend-panel_body_legends_legend" title="'+e.description+'">\n                    <div class="tq-ui-legend-panel_body_legends_legend_img"><img src="'+e.image+'"></div>\n                    <label class="tq-label">'+e.label+"</label>\n                </div>\n            "}).join("")+"\n        </div>\n    ",t.rootHtml=function(){var e=document.createElement("DIV");return e.innerHTML=t.markup,e.querySelector(".tq-ui-legend-panel_body_legends")}(),t.id=e.id||"legends-"+i++,t.rootHtml.id=t.id}Object.defineProperty(n,"__esModule",{value:!0}),n.Legends=o;var i=0;n.default=o},{}],5:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=e("./coloredButtonsList"),r=o(i),a=e("./flyingPanel"),s=o(a),l=e("./infoPanel"),c=o(l),u=e("./legends"),d=o(u),f=e("./progressScreen"),p=o(f),g=e("./searchPanel"),h=o(g),y=e("./switcher"),m=o(y),b=e("./tabPanel"),v=o(b),_=e("./toolbar"),E=o(_);t.exports={ColoredButtonsList:r.default,FlyingPanel:s.default,InfoPanel:c.default,Legends:d.default,ProgressScreen:p.default,SearchPanel:h.default,Switcher:m.default,TabPanel:v.default,Toolbar:E.default}},{"./coloredButtonsList":1,"./flyingPanel":2,"./infoPanel":3,"./legends":4,"./progressScreen":6,"./searchPanel":7,"./switcher":9,"./tabPanel":10,"./toolbar":11}],6:[function(e,t,n){"use strict";function o(e){a.default.apply(this);var t=this;e||(e={}),t.markup="",t.state="completed",t.rootHtml=function(){var e=document.createElement("DIV");return e.className="tq-ui-progress-screen",e.innerHTML=t.markup,e}(),t.id=e.id||"tabPanel-"+s++,t.rootHtml.id=t.id,function(e){var t=void 0;return"string"==typeof e?t=document.getElementById(e):"object"===(void 0===e?"undefined":i(e))&&(t=e),t}(e.baseElement).appendChild(t.rootHtml),t.setState=function(e,n){e&&(t.state=e,"active"===e?(t.rootHtml.innerHTML="<h1>"+(n||l)+'</h1><div class="tq-ui-progress-screen__progress"></div>',t.rootHtml.style.display=null):"completed"===e?(t.rootHtml.innerHTML="",t.rootHtml.style.display="none"):"error"===e&&(t.rootHtml.innerHTML="<h1>"+(n||c)+"</h1>",t.rootHtml.style.display=null),t.trigger("diagram-state-changed",e))},t.setState(e.state,e.text)}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.ProgressScreen=o;var r=e("./subscriptionAPI/subscribeable"),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=0,l="Loading",c="Error has occurred!";n.default=o},{"./subscriptionAPI/subscribeable":8}],7:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){a.default.apply(this),e||(e={});var t=e.searchButtonId||"tqLgSearchButton",n=e.searchId||"search";l.default.apply(this,[{id:e.id,baseElement:e.baseElement,active:e.active,header:e.header||"Search panel",triggerButton:e.triggerButton,body:"\n            <span id= "+t+' class="tq-ui-search-icon glyphicon glyphicon-search" aria-hidden="true"></span>\n            <input id="'+n+'" placeHolder="Search..." class="tq-ui-search-input"></input>\n        ',removeBackground:!0,size:{width:"260px",height:"70px"}}])}Object.defineProperty(n,"__esModule",{value:!0}),n.SearchPanel=i;var r=e("./subscriptionAPI/subscribeable"),a=o(r),s=e("./flyingPanel"),l=o(s);n.default=i},{"./flyingPanel":2,"./subscriptionAPI/subscribeable":8}],8:[function(e,t,n){"use strict";function o(){var e=this;e._subscribtions={},e.on=function(t,n){e._subscribtions[t]||(e._subscribtions[t]=[]),e._subscribtions[t].push(n)},e.unsubscribe=function(t){Object.keys(e._subscribtions).map(function(t){return e._subscribtions[t]}).forEach(function(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)})},e.trigger=function(t,n){var o=this;n instanceof Array||(n=[n]),e._subscribtions&&e._subscribtions[t]&&e._subscribtions[t].forEach(function(e){e.apply(o,n)})}}Object.defineProperty(n,"__esModule",{value:!0}),n.Subscribable=o,n.default=o},{}],9:[function(e,t,n){"use strict";function o(e){r.default.apply(this),e||(e={});var t=this,n=e.states||[];t.markup=n.map(function(t,n){return'<button id="'+t.id+'" '+(0!==n?"":"disabled")+' title="'+(t.label||t.id)+'">\n            '+(e.verticalOrientation&&t.icon?'<span class="'+t.icon+'" aria-hidden="true"></span>':t.label||t.id)+"\n        </button>"}).join(""),t.rootHtml=function(){var n=document.createElement("DIV");return n.className="tq-ui-switch-buttons"+(e.verticalOrientation?"-vertical":""),n.innerHTML=t.markup,n}(),t.id=e.id||"switcher-"+a++,t.rootHtml.id=t.id;var o=null;n.forEach(function(e,n){var i=t.rootHtml.querySelector("#"+e.id);0===n&&(o=i),i.onclick=function(){i.disabled=!0,o.disabled=!1,o=i,t.trigger("state-changed",e.id)}}),t.setState=function(e){var n=t.rootHtml.querySelector("#"+e);n&&e!==o.id&&(n.disabled=!0,o.disabled=!1,o=n)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Switcher=o;var i=e("./subscriptionAPI/subscribeable"),r=function(e){return e&&e.__esModule?e:{default:e}}(i),a=0;n.default=o},{"./subscriptionAPI/subscribeable":8}],10:[function(e,t,n){"use strict";function o(e){var t=this;e||(e={});var n=e.tabs||[];t.markup='\n        <div class="tq-ui-tab-switcher tq-ui-switch-buttons">'+n.map(function(e,t){return'\n            <button id="'+e.id+'" '+(0!==t?"":"disabled")+">\n                "+(e.label||e.id)+"\n            </button>  \n        "}).join("")+"</div>"+n.map(function(e,t){return'\n            <div id="'+e.id+'Panel" class="tq-ui-tab-panel_page" style="display: '+(0===t?"":"none")+'">\n                <div class="tq-ui-tab-panel_page_body">\n                    '+("string"==typeof e.body?e.body:"")+"\n                </div>\n            </div>\n        "}).join(""),t.rootHtml=function(){var e=document.createElement("DIV");return e.className="tq-ui-tab-panel",e.innerHTML=t.markup,e}(),t.id=e.id||"tabPanel-"+i++,t.rootHtml.id=t.id,n.map(function(e){if(e.body instanceof Object&&e.body.rootHtml){t.rootHtml.querySelector("#"+e.id+"Panel .tq-ui-tab-panel_page_body").appendChild(e.body.rootHtml)}});var o=null;n.forEach(function(e,n){var i=t.rootHtml.querySelector("#"+e.id),r=t.rootHtml.querySelector("#"+e.id+"Panel");0===n&&(o={tabBtn:i,tabPanel:r}),i.onclick=function(){i.disabled=!0,r.style.display="",o.tabBtn.disabled=!1,o.tabPanel.style.display="none",o={tabBtn:i,tabPanel:r}}})}Object.defineProperty(n,"__esModule",{value:!0}),n.TabPanel=o;var i=0;n.default=o},{}],11:[function(e,t,n){"use strict";function o(e){function t(e){var t=void 0;if("string"==typeof e){var n=document.createElement("DIV");n.innerHTML=e,t=n.firstChild}else if(e.id&&e.icon){var o=document.createElement("DIV");if(o.innerHTML='<button id="'+e.id+'" title="'+(e.label||e.id)+'" class="tq-ui-toolbar__button">\n                <span class="'+e.icon+'" aria-hidden="true"></span>\n            </button>',t=o.firstChild,e.icon2){var i=!0;t.onclick=function(n){t.innerHTML='<span class="'+(i?e.icon2:e.icon)+'" aria-hidden="true"></span>',e.callback(n),i=!i}}else t.onclick=e.callback}else e.rootHtml&&(t=e.rootHtml);return t}var n=this;if(e||(e={}),n.markup='\n        <div id="toolbarRootElement" class="tq-ui-toolbar">\n        </div>\n    ',n.rootHtml=function(){var t=void 0;return"string"==typeof e.baseElement?t=document.getElementById(e.baseElement):"object"===i(e.baseElement)&&(t=e.baseElement),t?(t.innerHTML=n.markup,t):null}(),n.id=e.id||"toolbar-"+r++,n.rootHtml.id=n.id,!n.rootHtml)throw new Error("The root element is not specified!");n.container=n.rootHtml.querySelector("#toolbarRootElement"),n.pushTool=function(e){var i=t(e);i&&("string"!=typeof i?o.push(e):o.push({id:"customhtml"+r++,markup:e,rootHtml:i}),n.container.appendChild(i))},n.insertTool=function(e,i){var r=Math.min(Math.max(i,0),o.length-1),a=n.container.querySelector("#"+o[r].id);if(a){var s=t(e);s&&(o.splice(r,0,e),n.container.insertBefore(s,a))}else n.pushTool(e)
},n.removeTool=function(e){var t="string"==typeof e?e:e.id;o.splice(o.indexOf(e),1);var i=n.container.querySelector("#"+t);n.container.removeChild(i)};var o=[];e.tools.forEach(function(e){n.pushTool(e)})}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.Toolbar=o;var r=0;n.default=o},{}]},{},[5])(5)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function r(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),o=0;o<t.length;o++)n[o]=String.fromCharCode(t[o]);return n.join("")}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(m.arrayBuffer&&m.blob&&v(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?r(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var n=t.body;if("string"==typeof e)this.url=e;else{if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function g(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),o=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(i))}}),t}function h(e){var t=new i;return e.split("\r\n").forEach(function(e){var n=e.split(":"),o=n.shift().trim();if(o){var i=n.join(":").trim();t.append(o,i)}}),t}function y(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(m.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,o){e=t(e),o=n(o);var i=this.map[e];i||(i=[],this.map[e]=i),i.push(o)},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},i.prototype.getAll=function(e){return this.map[t(e)]||[]},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,o){this.map[t(e)]=[n(o)]},i.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(o){e.call(t,o,n,this)},this)},this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},m.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},d.call(p.prototype),d.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];y.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=p,e.Response=y,e.fetch=function(e,t){return new Promise(function(n,o){var i=new p(e,t),r=new XMLHttpRequest;r.onload=function(){var e={status:r.status,statusText:r.statusText,headers:h(r.getAllResponseHeaders()||"")};e.url="responseURL"in r?r.responseURL:e.headers.get("X-Request-URL");var t="response"in r?r.response:r.responseText;n(new y(t,e))},r.onerror=function(){o(new TypeError("Network request failed"))},r.ontimeout=function(){o(new TypeError("Network request failed"))},r.open(i.method,i.url,!0),"include"===i.credentials&&(r.withCredentials=!0),"responseType"in r&&m.blob&&(r.responseType="blob"),i.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),r.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],6:[function(e,t,n){"use strict";function o(e){function t(e){return e.replace(/[^\w\d]/gi,"-")}function n(){var e="color-class-"+s++;return s>o&&(s=1),e}var o=e&&void 0!=e.COLOR_CLASS_COUNT?e.COLOR_CLASS_COUNT:i.COLOR_CLASS_COUNT,r=e&&e.COLOR_CLASS_MAP?e.COLOR_CLASS_MAP:i.COLOR_CLASS_MAP,a=this,s=1;a.getColorClassForElement=function(e){return e=t(e),r[e]||(r[e]=n()),r[e]},function(){s=Math.round(1+Math.random()*(o-1))}()}var i={COLOR_CLASS_COUNT:10,COLOR_CLASS_MAP:{subClassOf:"color-class-sub-class-of",type:"color-class-type"}};t.exports=o},{}],7:[function(e,t,n){"use strict";function o(e,t,n){function o(e,t,n){e||(e=i),t||(t=r),n||(n=a),l.viewClass=n,l.base=t,l.serverURL=e}function s(e){var t=e.nodes,n=[],o=function(e){for(var t=0;t<n.length;t++)if(n[t].id===e)return n[t];return null};return t.forEach(function(e){o(e.id)||(e.canExpand=!0,n.push(e))}),e.nodes=n,e}var l=this;l.getGraphData=function(e,t,o){n||(n=a);var i=l.serverURL+"?_base="+l.base+"&_viewClass="+l.viewClass+"&focusNode="+encodeURIComponent(e);fetch(i,{method:"GET",credentials:"same-origin",mode:"cors",cache:"default"}).then(function(e){if(e.ok)return e.json();var t=new Error(e.statusText);throw t.response=e,t}).catch(function(e){o(e.message)}).then(function(e){t(s(e))})},o.call(l,e,t,n)}e("es6-promise").Promise;e("whatwg-fetch");var i="http://view.edg.topbraid.net/edg/tbl/swp",r="http://rdfex.org/withImports?uri=urn:x-evn-pub:fibo",a="swa:NeighborGramPropertiesDataService";t.exports=o},{"es6-promise":1,"whatwg-fetch":5}],8:[function(e,t,n){"use strict";function o(e,t){function n(e){if(e)return e.isRootNode()||e.get("customPosition")?e:n(e.getParent())}function o(){y?(d.attr({rect:{class:"body "+h+" bad-node-position"}}),d.set("z",200)):(d.attr({rect:{class:"body "+h}}),d.set("z",100))}function r(){if(d.dataModel.label){var e=d.dataModel.label,t=a.util.breakText(e,{width:d.getSize().width}),n=t.split("\n");if(d.get("fullLabel")){d.attr({".label":{text:t}});var o=n.length-1,i=d.getSize(),r=d.attributes.attrs[".label"]["font-size"];d.resize(i.width,i.height+o*r),i=d.getSize(),g&&g.getRootNode().id===d.id?d.attr({rect:{rx:1,ry:5,class:"body  focus-node"}}):d.attr({rect:{rx:20,ry:i.width/i.height*20*2}})}else d.attr({".label":{text:1===n.length?e:e.substring(0,t.indexOf("\n"))+"..."}}),d.resize(f,p),g&&g.getRootNode().id===d.id?d.attr({rect:{rx:1,ry:5,class:"body  focus-node"}}):d.attr({rect:{rx:20,ry:160}})}}function u(){var e=function(e,t){t?(e.set("source",{id:e.get("source").id,port:"left"}),e.set("target",{id:e.get("target").id,port:"right"})):(e.set("target",{id:e.get("target").id,port:"left"}),e.set("source",{id:e.get("source").id,port:"right"}))};d.parentEdge&&e(d.parentEdge,d.getPrevNode().position().x>d.position().x),d.edges&&d.edges.forEach(function(t){e(t,t.getOtherEnd(d).position().x<=d.position().x)})}var d=this,f=t&&void 0!=t.ELEMENT_WIDTH?t.ELEMENT_WIDTH:c.ELEMENT_WIDTH,p=t&&void 0!=t.ELEMENT_HEIGHT?t.ELEMENT_HEIGHT:c.ELEMENT_HEIGHT;a.shapes.devs.Model.apply(d,[{id:s("node_"),size:{width:f,height:p},inPorts:["left"],outPorts:["right"],attrs:{".inPorts circle":{r:0,magnet:"passive"},".outPorts circle":{r:0,magnet:"passive"},rect:{rx:20,ry:160,"stroke-width":2},".label":{"font-size":11,text:e.label?e.label:"Unnamed",fill:"#333"},class:"body default-color-class"}}]);var g=null,h=null,y=!1,m={};d.pagination=null,d.dataModel=e,d.parentEdge=null,d.edges=[],d.typeId=e.typeId,d.set("fullLabel",e.fullNodeLabels||c.FULL_NODE_LABELS),d.set("expanded",!1),d.set("customPosition",!1),d.set("hasPosition",!1),d.set("hidden",!0),d.configurationSet={filterType:"ALL",filterKey:"",visibilityMap:{},visibilityMapReverse:{}},d.on("change:position",function(){u()}),d.on("change:fullLabel",r),d.reinit=function(){g&&(u(),g.getRootNode().id===d.id&&(d.attr({rect:{rx:1,ry:5}}),d.setColorClass("focus-node")))},d.setLayout=function(e){g=e},d.isRootNode=function(){return g&&g.getRootNode().id===d.id},d.isReverseDirection=function(){return this.parentEdge.isReverseDirection},d.nodePlacement=function(){return!(!this.parentEdge||!this.parentEdge.getOrientation())},d.getSize=function(){return d.get("size")},d.getParent=function(){if(!d.parentEdge)return null;var e=d.getPrevNode();return e?e instanceof i?e.getParent():e:null},d.getPrevNode=function(){return d.parentEdge?d.parentEdge.getOtherEnd(d):null},d.hasChildren=function(){return d.edges&&d.edges.length>0},d.getChildren=function(e){var t=[];return d.edges.forEach(function(n){var o=n.source.id===d.id?n.target:n.source;o instanceof i&&e?o.getChildren().forEach(function(e){t.push(e)}):t.push(o)}),t},d.getVisibleChildren=function(e){var t=[];return d.edges.forEach(function(n){var o=n.source.id===d.id?n.target:n.source;o instanceof i&&e?o.getChildren().forEach(function(e){t.push(e)}):o.get("hidden")||t.push(o)}),t},d.pushEdge=function(e){d.edges.push(e),m[e.typeId+(e.isReverseDirection?"$$reverse":"")+(e.getOrientation()?"$$west":"$$east")]=e},d.getEdgeByType=function(e,t,n){return m[e+(t?"$$reverse":"")+(n?"$$west":"$$east")]},d.disconnectEdge=function(e){d.parentEdge===e?d.parentEdge=null:(d.edges.splice(d.edges.indexOf(e),1),m[e.typeId+(e.isReverseDirection?"$$reverse":"")+(e.getOrientation()?"$$west":"$$east")]=null)},d.setPagination=function(e){d.pagination=e},d.getPagination=function(){return d.pagination},d.sortEdges=function(e){d.edges&&d.edges.sort(e)},d.getDirection=function(){var e=n(d);return e&&e!==d?g&&d.position().x>=e.position().x:!d.nodePlacement()},d.getDirectionRelativeToNode=function(e){return e&&d.position().x>e.position().x},d.setColorClass=function(e){void 0!=e&&(h=e,d.dataModel.colorClass=e),o()},d.getColorClass=function(){return h},d.badPosition=function(e){return void 0!=e&&(y=e,o()),y},d.addHighlighting=function(){d.attr("rect/stroke-width",4)},d.removeHighlighting=function(){d.attr("rect/stroke-width",2)},d.setParent=function(e){d.parentEdge=e;var t=d.getParent();t&&!d.configurationSet.modified&&(d.configurationSet=l(t.configurationSet),d.configurationSet.connections=void 0,d.configurationSet.modified=!1,d.configurationSet.expandTransitively=!1)},r()}function i(e){var t=this;o.apply(t,[{typeId:"crossNode"}]),t.resize(5,5),t.attr({rect:{rx:500,ry:500,"stroke-width":2},".label":{text:""}}),t.reinit=function(){},t.setColorClass(e),t.getEdgeByType=function(e){t.edges.filter(function(t){return t.typeId===e})[0]},t.alignRelativeToChildren=function(e){var n=void 0!=e?e:30,o=t.getVisibleChildren(),i=o.filter(function(e){return!e.get("customPosition")});if(0===i.length&&0!==o.length)i=o;else if(0===o.length)return;var r=i[0],a=i[i.length-1],s=r.position(),l=a.position(),c=r.getSize(),u=s.x,d=(l.y+s.y+c.height-t.getSize().height)/2;t.nodePlacement()||(u-=n),t.nodePlacement()&&(u+=c.width+n),t.position(u,d)}}function r(e){var t=this;a.dia.Link.apply(t,[{z:0,source:{id:null,port:"right"},target:{id:null,port:"left"},attrs:{".connection":{"stroke-width":2,class:"connection "+(e.colorClass?e.colorClass:"default-color-class")}},labels:[{position:.5,attrs:{text:{class:e.colorClass?e.colorClass:"default-color-class","font-family":"Arial, Helvetica, sans-serif","font-size":11,text:e.label}}}]}]),t.isReverseDirection=!1,t.source=null,t.target=null,t.dataModel=e,t.sourceTypeId=e.sourceTypeId,t.targetTypeId=e.targetTypeId,t.typeId=e.typeId,t.placement=e.placement,t.getOtherEnd=function(e){return e.id===t.source.id?t.target:t.source},t.setSource=function(e,n,o){t.set("source",{id:e.id,port:o}),t.source=e,n?t.source.pushEdge(t):t.source.setParent(t)},t.setTarget=function(e,n,o){t.set("target",{id:e.id,port:o}),t.target=e,n?t.target.pushEdge(t):t.target.setParent(t)},t.disconnect=function(){t.target.disconnectEdge(t),t.source.disconnectEdge(t),t.remove()},t.setColorClass=function(e){t.attr({".connection":{class:"connection "+e},".marker-target":{class:e},".marker-source":{class:e}}),t.dataModel.colorClass=e},t.getOrientation=function(){return!t.placement||"forward"!==t.placement&&"backward"!==t.placement?t.isReverseDirection:t.isReverseDirection&&"forward"===t.placement||!t.isReverseDirection&&"backward"===t.placement},t.reverseEdgeDirection=function(e){if(t.isReverseDirection!==e){t.isReverseDirection=e;var n=t.targetTypeId;t.targetTypeId=t.sourceTypeId,t.sourceTypeId=n,t.updateMarker()}},t.updateMarker=function(){var n={"stroke-width":2,class:e.colorClass?e.colorClass:"default-color-class",d:"M0 32 L8 35 L11 32 L08 29 Z"},o={".marker-target":"crossNode"===t.targetTypeId||t.isReverseDirection?{d:""}:n,".marker-source":"crossNode"!==t.sourceTypeId&&t.isReverseDirection?n:{d:""}};t.attr(o)},t.updateMarker()}var a=e("rappid"),s=e("lodash").uniqueId,l=e("lodash").cloneDeep,c={ELEMENT_WIDTH:130,ELEMENT_HEIGHT:30,FULL_NODE_LABELS:!1};o.prototype=Object.create(a.shapes.devs.Model.prototype),i.prototype=Object.create(o.prototype),r.prototype=Object.create(a.dia.Link.prototype),t.exports={Node:o,CrossNode:i,Edge:r}},{lodash:"lodash",rappid:"rappid"}],9:[function(e,t,n){"use strict";function o(e,t,n,o){function d(e,t,n){x=e,C=n,I=new c(o),N=new l(w,o),O=new u,w.blockValidation=!1,w.cleanLayout()}function f(e,t){S[t]&&!S[t].get("hidden")&&(x.addCell(e),S[t].embed(e))}function p(e,t){P[e.typeId]&&0!==P[e.typeId].length&&!t||(P[e.typeId]||(P[e.typeId]=[]),-1===P[e.typeId].indexOf(e)&&P[e.typeId].push(e),S[e.id]=e,e.setLayout(w))}function g(e,t){t&&S[t]||(t=T.id),P[e.sourceTypeId]&&P[e.targetTypeId]&&e.targetTypeId===S[t].typeId&&e.reverseEdgeDirection(!0);var n=m(e,S[t]);if(n===S[t]){var o=y(e,t);o&&(o.target.get("hasPosition")||(p(o.target,!0),v(o.target)),o.source.get("hasPosition")||(p(o.source,!0),v(o.source)),L.push(o))}else g(e,n.id)}function h(e,t){return L.filter(function(n){return e.isReverseDirection===n.isReverseDirection||e.isReverseDirection&&n.isReverseDirection?n.typeId===e.typeId&&n.sourceTypeId===e.sourceTypeId&&n.targetTypeId===e.targetTypeId&&(n.source.id===t||n.target.id===t):n.typeId===e.typeId&&n.sourceTypeId===e.targetTypeId&&n.targetTypeId===e.sourceTypeId&&(n.source.id===t||n.target.id===t)}).length>0}function y(e,t){if(h(e,t))return null;if(t||(t=T.id),P[e.sourceTypeId]&&P[e.targetTypeId]&&e.sourceTypeId===S[t].typeId){var n=S[t],o=b(e.targetTypeId);return!o&&P[e.targetTypeId][0]&&(o=w.cloneNode(P[e.targetTypeId][0])),e.setSource(n,!0),e.setTarget(o,!1),e.setColorClass(O.getColorClassForElement(e.dataModel.label)),o.setColorClass(e.dataModel.colorClass),e}return null}function m(e,t){if("crossNode"===t.typeId)return e.set("labels",[]),e.sourceTypeId="crossNode",e.updateMarker(),t;var n=t.getEdgeByType(e.typeId,e.isReverseDirection,e.getOrientation());if(n){var o;if("crossNode"!==n.targetTypeId&&"crossNode"!==n.sourceTypeId){var i=n.target,s=n.source;w.removeEdge(n),o=new r(n.dataModel.colorClass),p(o,!0);var l=new a({typeId:n.dataModel.typeId,sourceTypeId:n.sourceTypeId,targetTypeId:"crossNode",label:n.dataModel.label,colorClass:n.dataModel.colorClass,placement:n.placement});l.isReverseDirection=e.isReverseDirection,l.updateMarker(),l.setSource(s,!0,"left"),l.setTarget(o,!1,"right"),L.push(l),v(o,t.id);var c=new a({typeId:n.dataModel.typeId,sourceTypeId:"crossNode",targetTypeId:n.targetTypeId,label:"",colorClass:n.dataModel.colorClass,placement:n.placement});c.isReverseDirection=e.isReverseDirection,c.updateMarker(),c.setSource(o,!0,"left"),c.setTarget(i,!1,"right"),L.push(c)}else o=n.target;return o}return t}function b(e){var t=P[e];if(!t||0===t.length)return null;for(var n=0;n<t.length;n++)if(!t[n].get("hasPosition"))return t[n];return null}function v(e){T||w.setRootNode(e),e.set("hasPosition",!0),e.reinit()}function _(e,t){e.isEmbeddedIn(t)||t.embed(e)}function E(e,t){e.isEmbeddedIn(t)&&t.unembed(e)}var w=this,x=null,T=null,S=null,P=null,L=null,C=null,I=null,N=null,O=null;w.loadState=function(e){T&&w.cleanLayout(),T=e.rootNode,L=e.edges,S={},P={},e.nodes.forEach(function(e){e.getPrevNode()&&_(e,e.getPrevNode()),e.pagination&&_(e.pagination,e),P[e.typeId]||(P[e.typeId]=[]),P[e.typeId].push(e),S[e.id]=e}),x.addCells(e.visibleElements)},w.getState=function(){return{rootNode:T,edges:L,nodes:w.getNodes(),visibleElements:x.getElements().concat(x.getLinks())}},w.getScale=function(){return{sx:C._sx,sy:C._sy}},w.cleanLayout=function(){T=null,S={},P={},L=[],x.clear()},w.setRootNode=function(e){T&&w.cleanLayout(),T=e,p(e),T.set("expanded",!0),v(T,e.id),w.showNode(T)},w.getRootNode=function(){return T},w.getNodes=function(){return Object.keys(S).filter(function(e){return S[e]}).map(function(e){return S[e]})},w.getEdges=function(){return L},w.removeEdge=function(e){L.splice(L.indexOf(e),1),e.disconnect()},w.collapseNode=function(e){if(S[e]){var t=S[e];t.id===T.id&&(w.leftTree=[],w.rightTree=[]),N.removePagination(t);t.getChildren().forEach(function(e){w.removeNode(e,!0)})}},w.removeNode=function(e,t){if(N.removePagination(e),e.parentEdge&&w.removeEdge(e.parentEdge),e.set("hasPosition",!1),t){e.getChildren().forEach(function(e){w.removeNode(e,!0)})}S[e.id]&&(S[e.id]=null),P[e.typeId]&&P[e.typeId].length>0&&P[e.typeId].splice(P[e.typeId].indexOf(e),1),e.get("hidden")||w.hideNode(e)},w.putAll=function(e,t){e.forEach(function(e){w.put(e,t)})},w.put=function(e,t){e instanceof i?p(e):e instanceof a?g(e,t):e instanceof s&&f(e,t)},w.recalculateLayout=function(){if(T){w.blockValidation=!0;var e=T.position().x,t=T.position().y;if(!T.get("customPosition")){var n=C.options.baseHeight;e=(C.options.baseWidth-T.getSize().width)/2,t=(n-T.getSize().height)/2;var o=e-T.position().x,i=t-T.position().y;T.translate(o,i)}N.paginateNode(T),I.calculateLayoutForNode(T),N.setPaginationPosition(T),w.blockValidation=!1}},w.cloneNode=function(e){return new i({typeId:e.dataModel.typeId,label:e.dataModel.label,colorClass:e.dataModel.colorClass,canExpand:e.dataModel.canExpand})},w.hideNode=function(e){if(!e.get("hidden")){e.remove();var t=e.getPrevNode();t&&E(e,t),e.set("hidden",!0),N.hidePagination(e),e.getChildren().forEach(function(e){w.hideNode(e)})}},w.showNode=function(e,t){if(e.get("hidden")){x.addCell(e),e.parentEdge&&(w.showNode(e.getPrevNode()),x.addCell(e.parentEdge)),e.set("hidden",!1);var n=e.getPrevNode();n&&_(e,n),N.showPagination(e),t||e.getChildren().forEach(function(e){w.showNode(e)})}},w.doForBrunch=function(e,t){e.getChildren().forEach(function(e){w.doForBrunch(e,t)}),t(e)},d.call(w,e,t,n)}var i=e("./graphElements").Node,r=e("./graphElements").CrossNode,a=e("./graphElements").Edge,s=e("./pagination"),l=e("./layoutPaginationManager"),c=e("./layoutPositionManager"),u=e("./colorConfigurator");t.exports=o},{"./colorConfigurator":6,"./graphElements":8,"./layoutPaginationManager":13,"./layoutPositionManager":14,"./pagination":17}],10:[function(e,t,n){function o(e){var t,n=e.lineageGram;if("string"==typeof e.baseElement?t=document.getElementById(e.baseElement):"object"==typeof e.baseElement&&(t=e.baseElement),t){t.innerHTML='<div class="tq-ng-default-user-ui"><div id="tqLgToolbar"></div><div id="tqLgInfoPanel"></div><div id="tqLgOptionsPanel"></div><div id="tqLgSearchPanel"></div></div>';var o=t.querySelector("#tqLgToolbar"),s=t.querySelector("#tqLgInfoPanel"),l=t.querySelector("#tqLgOptionsPanel"),c=t.querySelector("#tqLgSearchPanel"),u=!0,d=new i.Toolbar({baseElement:o,tools:[{id:"tqLgSearchButton",icon:"glyphicon glyphicon-search",label:"Search"},{id:"tqNgUndo",icon:"glyphicon glyphicon-menu-left",label:"Back",callback:function(){n.undoState()}},{id:"tqNgRedo",icon:"glyphicon glyphicon-menu-right",label:"Forward",callback:function(){n.redoState()}},{id:"tqLgZoomIn",icon:"glyphicon glyphicon-zoom-in",label:"Zoom in",callback:function(){n.zoom(.2,{max:4})}},{id:"tqLgZoomOut",icon:"glyphicon glyphicon-zoom-out",label:"Zoom out",callback:function(){n.zoom(-.2,{min:.2})}},{id:"zoomToFit",icon:"glyphicon glyphicon-fullscreen",label:"Zoom to fit",callback:function(){n.zoom()}},{id:"tqLgReset",icon:"glyphicon glyphicon-refresh",label:"Reset layout",callback:function(){n.getNodes().forEach(function(e){e.set("customPosition",!1)}),n.refreshLayout()}},{id:"expandAll",icon:"glyphicon glyphicon-resize-full",icon2:"glyphicon glyphicon-resize-small",label:"Expand labels",callback:function(){n.fullNodeLabels(u),u=!u}},'<div style="flex-grow: 1"></div>',{id:"infoPanelBtn",icon:"glyphicon glyphicon-info-sign",label:"Node info"},{id:"tqLgOptionsButton",icon:"glyphicon glyphicon-menu-hamburger",label:"Options"}]});new i.SearchPanel({baseElement:c,triggerButton:d.rootHtml.querySelector("#tqLgSearchButton"),header:"Search this NeighborGram",searchButtonId:"tqNgSearchBtn",searchId:"tqNgSearch",active:!1}),new a({neighborGram:n,baseElement:l,active:!1,triggerButton:d.rootHtml.querySelector("#tqLgOptionsButton"),legends:e.legends}),new r({baseElement:s,active:!1,triggerButton:d.rootHtml.querySelector("#infoPanelBtn"),neighborGram:n})}}var i=e("visualizations-library"),r=e("./infoPanel"),a=e("./optionsPanel");t.exports=o},{"./infoPanel":11,"./optionsPanel":12,"visualizations-library":4}],11:[function(e,t,n){function o(e){function t(e){if(e&&e instanceof i.Node&&e.dataModel){var t=e,r=t.dataModel;o.setSelectedElement({id:t.id,label:r.label,types:r.typeId,data:r.data,relations:n(e)})}else o.setSelectedElement()}function n(e){var t=e.getParent(),n=e.getChildren(!0),o=n.filter(function(t){return!t.getDirectionRelativeToNode(e)});t&&!e.isReverseDirection()&&o.push(t);var i=n.filter(function(t){return t.getDirectionRelativeToNode(e)});if(t&&e.isReverseDirection()&&i.push(t),o&&o.length>0||i&&i.length>0)return{incomings:o.map(function(e){return{id:e.id,label:e.dataModel.label}}),outgoings:i.map(function(e){return{id:e.id,label:e.dataModel.label}})}}r.apply(this);var o=new a.InfoPanel({placeholder:"Select a node"}),s=e.neighborGram;a.FlyingPanel.apply(this,[{baseElement:e.baseElement,active:e.active,header:"Node Info",triggerButton:e.triggerButton,emptyBody:!1,size:{width:"300px",height:"450px"},body:o}]),s.onNodeSelected(t),o.on("selected-element-changed",function(e){for(var n=s.getNodes(),o=0;o<n.length;o++)if(n[o].id===e){s.setSelectedNode(n[o]),t(n[o]);break}})}var i=e("../graphElements"),r=e("../subscriptionAPI/subscribeable"),a=e("visualizations-library");t.exports=o},{"../graphElements":8,"../subscriptionAPI/subscribeable":20,"visualizations-library":4}],12:[function(e,t,n){function o(e){i.apply(this);var t=e.legends||[],n=e.neighborGram,o=this;r.FlyingPanel.apply(this,[{baseElement:e.baseElement,active:e.active,header:"Options",triggerButton:e.triggerButton,removeBackground:!0,size:{width:"400px",height:"500px"},body:new r.TabPanel({tabs:[{id:"tqUiGeneral",label:"General",body:'<label for="exportGroup" class="tq-label">Export as</label>                                <div id="exportGroup" class="tq-ui-group tq-ui-export-group">                                  <button id="tqUiExportSVG" title="Export diagram to SVG" class="tq-button">SVG</button>    <button id="tqUiExportPNG" title="Export diagram to PNG" class="tq-button">PNG</button></div>                                                                                     <label for="howToUseGroup" class="tq-label">How to use</label>                             <div id="howToUseGroup" class="tq-ui-group tq-ui-opt-group">                                   <button id="tqUiHelpBtn" title="Help" class="tq-button">                                       <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>                 </button>                                                                                  <a class="tq-button" title="Documentation" href="./documentation/index.html">DOC</a>   </div>                                                                                     '},{id:"tqUiLegends",label:"Legends",body:new r.Legends({legends:t})}]})}]);var a=o.rootHtml.querySelector("#tqUiExportSVG"),s=o.rootHtml.querySelector("#tqUiExportPNG"),l=o.rootHtml.querySelector("#tqUiHelpBtn");a.onclick=function(){n.export({type:"svg"})},s.onclick=function(){n.export({type:"png"})},l.onclick=e.onPressHelp}var i=e("../subscriptionAPI/subscribeable"),r=e("visualizations-library");t.exports=o},{"../subscriptionAPI/subscribeable":20,"visualizations-library":4}],13:[function(e,t,n){"use strict";function o(e,t){function n(t){var n=t.isRootNode()?2*c:c;t.sortEdges(l.defaultEdgeComparator);var i=t.getChildren();return i.length>n?(t.getPagination()||s(t,n),o(i,t.getPagination().getState())):(i.forEach(function(t){e.showNode(t,!0)}),i)}function o(t,n){for(var o=[],i=n.curPage*n.pageSize,r=(n.curPage+1)*n.pageSize,a=0;a<t.length;a++){var s=t[a];a>=i&&a<r?(e.showNode(s,!0),o.push(s)):e.hideNode(s)}return o}function s(n,o){var a,s;s=n instanceof r||n.id===e.getRootNode().id?"nodes":"edges",a=new i(n,e,o,s,t),n.setPagination(a),e.put(a,n.id)}var l=this,c=t&&void 0!=t.DEFAULT_PAGE_SIZE?t.DEFAULT_PAGE_SIZE:a.DEFAULT_PAGE_SIZE;l.paginateNodes=function(e){e&&e.forEach(function(e){l.paginateNode(e)})},l.paginateNode=function(e){if(!e.get("hidden")){var t=n(e);l.paginateNodes(t)}},l.hidePagination=function(e){e.getPagination()&&e.getPagination().remove()},l.showPagination=function(t){t.getPagination()&&e.put(t.getPagination(),t.id)},l.removePagination=function(e){e.getPagination()&&(e.getPagination().remove(),e.setPagination(null))},l.setPaginationPosition=function(t){if(t.getPagination()){var n=t.getPagination(),o=0,i=0,r=e.getScale(),a=n.get("size").width/r.sx,s=n.get("size").height/r.sy;if("nodes"===n.getType())if(t.id===e.getRootNode().id)o=t.position().x+(t.getSize().width-a)/2,i=t.position().y-s-5/r.sy;else{var c,u=t.getChildren().filter(function(e){return!e.get("hidden")&&!e.get("customPosition")});u.length&&(c=u[0]),c?(o=c.position().x+(c.getSize().width-a)/2,i=c.position().y-s-5/r.sy):(o=t.position().x-a-3/r.sx,i=t.position().y+(t.getSize().height-s)/2)}else o=t.position().x+(t.getDirection()?t.getSize().width+3/r.sx:-a-3/r.sx),i=t.position().y+(t.getSize().height-s)/2;n.position().x==o&&n.position().y==i?n.updateViewPosition():n.set("position",{x:o,y:i})}t.getChildren().forEach(function(e){l.setPaginationPosition(e)})},l.defaultEdgeComparator=function(e,t){var n=e.target?e.target:{dataModel:{}},o=t.target?t.target:{dataModel:{}},i=null;n instanceof r&&n.hasChildren()?(n.sortEdges(l.defaultEdgeComparator),i=n.getChildren()[0].dataModel.label):i=n.dataModel.label,i&&(i=i.toLowerCase());var a=null;return o instanceof r&&o.hasChildren()?(o.sortEdges(l.defaultEdgeComparator),a=o.getChildren()[0].dataModel.label):a=o.dataModel.label,a&&(a=a.toLowerCase()),i>a?1:i<a?-1:0}}var i=e("./pagination"),r=e("./graphElements").CrossNode,a={DEFAULT_PAGE_SIZE:5};t.exports=o},{"./graphElements":8,"./pagination":17}],14:[function(e,t,n){"use strict";function o(e){function t(e){var t={leftTree:[],rightTree:[]};return e.getVisibleChildren().forEach(function(e){e.nodePlacement()?t.leftTree.push(e):t.rightTree.push(e)}),t}function n(e,t,r){if(e){void 0===r&&(r=0);var s=a(e),l=e.getVisibleChildren(),c=s&&e.nodePlacement()||!s&&!e.nodePlacement(),u=!(e.isRootNode()||e.get("customPosition")||e.getPrevNode().isRootNode()||e.getPrevNode().get("customPosition")||e.getParent().isRootNode()||e.getParent().get("customPosition")),d=!1;!u||!c&&t[r]&&-1!==t[r].indexOf(e)||(e instanceof i?d=!0:o(t,r,e)),l.forEach(function(o){if(!o.get("customPosition")){var a=o.nodePlacement()?r-1:r+1;n(o,t,e instanceof i&&!e.isRootNode()&&!e.get("customPosition")?r:a)}}),d&&e.alignRelativeToChildren()}}function o(e,t,n){if(e){e[t]||(e[t]=[]);var o=e[t],r=n.getParent(),a=r.position(),u=l(o,r),d=o[u];if(d){var f=d.position(),p=[],g=[],m=s(f,r,o);if(o.forEach(function(e,t){t>u&&p.push(e),t<u&&g.push(e)}),o.splice(m?u:u+1,0,n),n.position(f.x,a.y),m&&a.y>=f.y||!m&&a.y<=f.y||h(n,o)){var _={x:f.x,y:f.y+(m?-(v+n.getSize().height):v+n.getSize().height)};if(n.position(_.x,_.y),_.y<=a.y&&g.length>0&&y(g[g.length-1],n))for(var E=g.length-1;E>=0;E--){var w=g[E],x=g[E+1];if(E===g.length-1&&y(w,n)||y(w,x)){var T=(x||n).position().y-v-w.getSize().height-w.position().y;c(w,0,T)}}else _.y>a.y&&p.length>0&&y(p[0],n)&&p.forEach(function(e,t,o){var i=o[t-1];if(0===t&&y(e,n)||y(e,i)){c(e,0,(i||n).position().y+v+n.getSize().height-e.position().y)}})}}else{
var S=a.x+(n.nodePlacement()?-(n.getSize().width+b):n.getSize().width+b),P=n instanceof i?a.x:S;n.position(P,a.y),n.pushedAfterLayout=!0,o.push(n)}return o}}function a(e){var t=e.getPrevNode();return t&&!t.isRootNode()&&!t.get("customPosition")||e.nodePlacement()?a(t):e.getDirectionRelativeToNode(t)}function s(e,t,n){var o=t.position(),i=o.y-e.y,r=e.y-o.y;return t.getVisibleChildren().forEach(function(t){var o=a(t);if(-1!==n.indexOf(t)&&(o&&t.nodePlacement()||!o&&!t.nodePlacement())){var s=t.position();s.y>e.y?r+=s.y-e.y:s.y<e.y&&(i+=e.y-s.y)}}),i<r}function l(e,t){if(0===e.length)return-1;for(var n=t.position(),o=0,i=e[o].position.y>=n.y,r=0;r<e.length;r++){var a=e[r].position(),s=a.y>=n.y;if(s!==i){o=r;break}a.y<=n.y&&(o=r),i=s}return o===e.length-1&&e[e.length-1].position.y<=n.y&&(o=r),o}function c(e,t,n){e.position(e.position().x+t,e.position().y+n);var o=e.getPrevNode();o&&o instanceof i&&o.alignRelativeToChildren()}function u(e,t,n){var o=[];return e&&0!=e.length?(e.filter(function(e){return!e.get("customPosition")}).forEach(function(e){f(e,t,n,0,o)}),o):o}function d(e,t){if(!(e&&e.length>0))return 0;if(e=e.filter(function(e){return!e.get("customPosition")}),0==e.length)return 0;var n=e[0];if(n instanceof i)for(var o=n.getVisibleChildren(!0).filter(function(e){return!e.get("customPosition")}),r=0;r<o.length;r++)if(o[r]&&!o[r].get("hidden")){n=o[r];break}var a=e[e.length-1];if(a instanceof i){var s=a.getVisibleChildren(!0).filter(function(e){return!e.get("customPosition")});for(r=s.length-1;r>=0;r--)if(s[r]&&!s[r].get("hidden")){a=s[r];break}}if(!a||!n)return 0;var l=(a.position().y+a.getSize().height+n.position().y)/2;return t.position().y+t.getSize().height/2-l}function f(e,t,n,o,r){var a=e.getVisibleChildren(),s=a.filter(function(e){return!e.get("customPosition")&&(n&&!e.nodePlacement()||e.nodePlacement()&&!n)}),l=e.getSize().width,c=t+(n?l+b:-(l+b));s.forEach(function(a){f(a,e instanceof i?t:c,n,e instanceof i?o:o+1,r)}),p(s,e,t,n,o,r)}function p(e,t,n,o,r,a){a[r]||(a[r]=[]);var s=a[r],l=t instanceof i,c=n-(o?0:t.getSize().width);c=l?c+(o?-_:+_):c;var u=0,d=0;if(e.length>0){var f=e[e.length-1],p=e[0];d=(f.position().y+p.getSize().height+p.position().y-t.getSize().height)/2}var g=0;if(s.length>0){var h=s[s.length-1];g=h.position().y+h.getSize().height+v}l||g<=d?u=d:(u=g,l||m.translateBrunch(e,0,g-d)),t.position(c,u),l||s.push(t)}function g(e){var t=e.getVisibleChildren(),n=t.filter(function(e){return e.get("customPosition")});return t.forEach(function(e){n=n.concat(g(e))}),n}function h(e,t){var n=t.indexOf(e);return-1!==n&&(y(e,t[n-1])||y(e,t[n+1]))}function y(e,t){if(!e||!t)return!1;var n=null,o=null;e.getSize().height>t.getSize().height?(n=e.getBBox(),o=t):(n=t.getBBox(),o=e);var i=o.position(),r=o.getSize(),a=i.x+r.width/2;return n.containsPoint({x:a,y:i.y})||n.containsPoint({x:a,y:i.y+r.height})||n.containsPoint({x:a,y:i.y-v})||n.containsPoint({x:a,y:i.y+v})}var m=this,b=e&&void 0!=e.COL_OFFSET?e.COL_OFFSET:r.COL_OFFSET,v=e&&void 0!=e.ROW_OFFSET?e.ROW_OFFSET:r.ROW_OFFSET,_=e&&void 0!=e.CROSS_NODE_OFFSET?e.CROSS_NODE_OFFSET:r.CROSS_NODE_OFFSET;m.calculateLayoutForNode=function(e){var o=e.position(),r=t(e),a=e instanceof i?_:b,s={0:e instanceof i?[]:[e]},l=u(r.rightTree,o.x+e.getSize().width+a,!0),c=u(r.leftTree,o.x-a,!1);l.forEach(function(e,t){s[t+1]=e}),c.forEach(function(e,t){s[-(t+1)]=e});var f=d(r.leftTree,e),p=d(r.rightTree,e);m.translateBrunch(r.leftTree,0,f),m.translateBrunch(r.rightTree,0,p),n(e,s);var h=e.position();e.position(o.x,o.y),m.translateBrunch(r.leftTree,0,o.y-h.y),m.translateBrunch(r.rightTree,0,o.y-h.y),g(e).forEach(function(e){m.calculateLayoutForNode(e)})},m.translateBrunch=function(e,t,n){if(e&&0!=e.length){e.filter(function(e){return!e.get("customPosition")}).forEach(function(e){m.translateBrunch(e.getVisibleChildren(),t,n),e.position(e.position().x+t,e.position().y+n)})}}}var i=e("./graphElements").CrossNode,r={COL_OFFSET:100,ROW_OFFSET:30,CROSS_NODE_OFFSET:30,ELEMENT_WIDTH:130};t.exports=o},{"./graphElements":8}],15:[function(e,t,n){"use strict";var o=e("./neighborGram"),i=e("./dataProvider"),r=e("./htmlUI/infoPanel"),a=e("./htmlUI/optionsPanel"),s=e("./htmlUI/defaultUI");t.exports={getDefaultProperties:function(){return{DEFAULT_PAGE_SIZE:5,COLOR_CLASS_COUNT:10,COL_OFFSET:100,ROW_OFFSET:30,CROSS_NODE_OFFSET:30,ELEMENT_WIDTH:130,ELEMENT_HEIGHT:30,TRANSITIVE_EXPANSION_LIMIT_STEP:10,FULL_NODE_LABELS:!1,COLOR_CLASS_MAP:{subClassOf:"color-class-sub-class-of",type:"color-class-type"}}},create:function(e,t,n,i,r){return new o(t,{el:e},n,i,r)},getDefaultDataProvider:function(e,t,n){return new i(e,t,n)},uiUtils:{DefaultUI:s,InfoPanel:r,OptionsPanel:a}}},{"./dataProvider":7,"./htmlUI/defaultUI":10,"./htmlUI/infoPanel":11,"./htmlUI/optionsPanel":12,"./neighborGram":16}],16:[function(e,t,n){"use strict";function o(e,t,n,o,u){function h(e,t,n,o,i){function c(e,t,n,o){e.ctrlKey&&(o>0?F.zoom(.2,{max:4}):F.zoom(-.2,{min:.2}),Q&&Q.refresh(),e.preventDefault())}F.resourcePath=o,F.dataProvider=e,Z=t.graph?t.graph:new r.dia.Graph;var u={el:"graphPlace",model:Z,gridSize:1,width:"5000",height:"5000",async:!0},d=x(u,t),f=d.el;d.el=void 0,j=new r.dia.Paper(d),K=new r.ui.PaperScroller({paper:j});var p=new r.dia.CommandManager({graph:Z}),g=new r.dia.Validator({commandManager:p});g.validate("change:position",_),g.on("invalid",function(e){console.log(e),V.getNodes().forEach(function(e){e.badPosition(!1)})}),j.on("cell:mousewheel",function(e,t,n,o,i){c(t,n,o,i)}),j.on("blank:mousewheel",function(e,t,n,o){c(e,t,n,o)});var h=document.getElementById(f);h.innerHTML="",X=document.createElement("DIV"),h.appendChild(X),X.className="tq-ng-root",X.appendChild(K.render().el),S(),ie=new a.ProgressScreen({baseElement:X}),V=new s(Z,j,K,i),Y=new l(V,i),W=[],$=[],n&&F.setFocusNode(n),J=v()}function y(e){function t(e){return e<10?"0"+e:""+e}return t(e.getFullYear())+"_"+t(1+e.getMonth())+"_"+t(e.getDate())+"_"+t(e.getHours())+"_"+t(e.getMinutes())+"_"+t(e.getSeconds())}function m(e){for(var t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),o=new Uint8Array(n),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return new Blob([n],{type:"image/png"})}function b(e){"fetching"===e?ie.setState("active","Fetching data"):"rendering"===e?ie.setState("active","Rendering graph"):"completed"===e?ie.setState("completed"):"error"===e&&ie.setState("error","Error has occurred!")}function v(){var e=document.createElement("DIV");return e.className="ng-ui",X.querySelector(".paper.joint-theme-default").appendChild(e),e}function _(e,t,n){var o=t.data.attributes||Z.getCell(t.data.id);return V.blockValidation||!o||E(o)?n():n("Another cell in the way!")}function E(e,t){if(!(e instanceof f))return!0;var n=function(e,t){if(!e||!t||e instanceof g||t instanceof g)return!1;var n=null,o=null;e.getSize().height>t.getSize().height?(n=e.getBBox(),o=t):(n=t.getBBox(),o=e);var i=o.position(),r=o.getSize();return n.containsPoint({x:i.x,y:i.y})||n.containsPoint({x:i.x+r.width,y:i.y})||n.containsPoint({x:i.x,y:i.y+r.height})||n.containsPoint({x:i.x+r.width,y:i.y+r.height})},o=0==Z.get("cells").filter(function(t){return!(!(t instanceof f||t instanceof g)||t.id===e.id||!n(t,e))}).length;return t&&e.getVisibleChildren().forEach(function(e){o=E(e,t)&&o}),e.badPosition(!o),o}function w(e){var t=A(e);return V.setRootNode(t),t}function x(e,t){var n={};return e&&Object.keys(e).forEach(function(t){n[t]=e[t]}),t&&Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function T(e){if(F.getNodes().forEach(function(e){e.removeHighlighting()}),e){var t;if(e.model&&e.model.addHighlighting?t=e.model:e.addHighlighting&&(t=e),t.get("hidden")){var n=t.getPrevNode();n.pagination&&n.getChildren(!0).forEach(function(e,o){e===t&&n.pagination.focusOn(o)}),t.addHighlighting()}else t.addHighlighting()}}function S(){var e=null;j.on("cell:pointerdown",function(t){t&&t.model instanceof f&&(e||(e=t.model.position()),T(t))}),j.on("cell:pointermove",function(t){if(t&&t.model instanceof f){if(r.ui.Halo.clear(j),Math.sqrt(Math.pow(e.x-t.model.position().x,2)+Math.pow(e.y-t.model.position().y,2))<15&&!t.model.get("customPosition"))return;t.model.get("customPosition")||(t.model.set("customPosition",!0),V.recalculateLayout()),E(t.model,!0)}}),j.on("cell:pointerdblclick",function(e){e&&e.model instanceof f&&(e.model.set("fullLabel",!e.model.get("fullLabel")),V.recalculateLayout())}),j.on("cell:pointerup",function(t){t&&t.model instanceof f&&(P(t),e=null,B(),D(t.model))}),j.on("blank:pointerdown",K.startPanning),j.on("blank:pointerdown",function(){T(void 0),B()})}function P(e){Q&&Q.target!==e.model&&I();var t=e.model,n=new r.ui.Halo({graph:Z,paper:j,cellView:e,className:"halo"+(t.id===V.getRootNode().id?" halo-of-root-node":"")});if(n.removeHandles(),t.get("customPosition")&&(n.addHandle({name:"reset-node-position",position:"s"}),n.on("action:reset-node-position:pointerdown",function(e){e.stopPropagation(),V.doForBrunch(t,function(e){e.set("customPosition",!1)}),V.recalculateLayout()})),"crossNode"!==t.dataModel.typeId){var o=t.getDirection()?"expansion-config"+(t.configurationSet.modified?"-modified":""):"expansion-config"+(t.configurationSet.modified?"-modified":"")+"-reverse";if(n.addHandle({name:o}),n.on("action:"+o+":pointerdown",function(t){t.stopPropagation(),L(e)}),t.id!==V.getRootNode().id){var i=t.getDirection()?"set-focus-node":"set-focus-node-reverse";n.addHandle({name:i}),n.on("action:"+i+":pointerdown",function(e){ee||(e.stopPropagation(),F.setFocusNode(t.dataModel.typeId))})}var a=t.getDirection()?"expand-collapse":"expand-collapse-reverse";n.addHandle({name:t.dataModel.canExpand?a:a+" disabled",position:t.get("expanded")?" ng-collapse":" ng-expand"}),n.on("action:"+a+":pointerdown",function(){t.dataModel.canExpand&&C(e.model)}),n.listenTo(t,"change:customPosition",function(){P(e)}),n.listenTo(t,"change:expanded",function(){P(e)})}n.render()}function L(e){if(e&&e.model instanceof f)if(Q&&Q.alive)I();else{var t,n=Q=new c({base:J,target:e.model,scroller:K,beforeApply:function(){(t=e.model.get("expanded"))&&(e.model.set("expanded",!1),V.collapseNode(e.model.id))},afterApply:function(){C(e.model),P(e)}});e.model.configurationSet.connections||N(e.model.typeId,function(e){n===Q&&Q.putData(e.edges||[])},function(e){new r.ui.Dialog({type:"alert",width:300,title:"Alert",content:e}).open()})}}function C(e){function t(t,o){ee=!1,O(e,t,o&&o.fromCache),V.recalculateLayout(),z(n),D(e)}if(!ee)if(e.configurationSet&&e.configurationSet.expandTransitively)ne.start(e);else if(e instanceof f)if(e.get("expanded"))e.set("expanded",!1),H(e.id);else{var n=R(e);e.set("expanded",!0),B(),te[e.id]?t(te[e.id],{fromCache:!0}):(ee=!0,N(e.typeId,t,function(t){ee=!1,new r.ui.Dialog({type:"alert",width:300,title:"Alert",content:t}).open(),z(n),D(e)}))}}function I(){Q.remove(),Q=null}function N(e,t,n){try{F.dataProvider.getGraphData(e,t,n)}catch(e){n.apply(F,[e]),"string"==typeof e?console.error(e):console.error(e.stack)}}function O(e,t,n){var o,i="string"!=typeof e,r=i?e.id:e,a=e.configurationSet,s={};n?o=t:(o={nodes:t.nodes?q(t.nodes):[],edges:t.edges?M(t.edges):[]},te[r]=o);var l;l="string"!=typeof e?{edges:o.edges.filter(function(t){var n=e.dataModel.typeId===t.dataModel.targetTypeId,o=("ALL"===a.filterType||"INCOMING"===a.filterType&&n||"OUTGOING"===a.filterType&&!n)&&(!a.filterKey||a.filterKey&&-1!==t.dataModel.label.toLowerCase().indexOf(a.filterKey.toLowerCase()))&&(n&&(void 0===a.visibilityMap[t.dataModel.typeId]||a.visibilityMap[t.dataModel.typeId])||!n&&(void 0===a.visibilityMapReverse[t.dataModel.typeId]||a.visibilityMapReverse[t.dataModel.typeId]));return o&&(n?s[t.dataModel.sourceTypeId]=!0:s[t.dataModel.targetTypeId]=!0),o}),nodes:o.nodes.filter(function(e){return s[e.dataModel.typeId]})}:o,l.nodes.length>0&&V.putAll(l.nodes),l.edges.length>0&&V.putAll(l.edges,r),n&&i&&e.getChildren(!0).forEach(function(t,o){t.get("expanded")&&(t.pagination&&e.pagination.focusOn(o),O(t,te[t.id],n),V.recalculateLayout())})}function H(e){V.collapseNode(e),V.recalculateLayout()}function q(e){var t=[];return e.forEach(function(e){var n=A(e);t.push(n)}),t}function M(e){var t=[];return e.forEach(function(e){var n=k(e);t.push(n)}),t}function A(e){return new f({typeId:e.id,label:e.label,canExpand:e.canExpand,fullNodeLabels:oe},G)}function k(e){return new p({typeId:e.id,sourceTypeId:e.source,targetTypeId:e.target,label:e.label,placement:e.placement})}function B(){F.getNodes().forEach(function(e){var t=e.getPagination();t&&"edges"===t.getType()&&t.setInactive()})}function D(e){var t=e.getPagination();t&&"edges"===t.getType()&&t.setActive()}function R(e){var t=new r.shapes.basic.Rect({size:{width:55,height:15},attrs:{rect:{"fill-opacity":0,"stroke-opacity":0},text:{text:"Loading...","font-family":"Arial, Helvetica, sans-serif","font-size":11}},z:100}),n=e.position().x,o=e.position().y;if(e.id===V.getRootNode().id)n+=(e.getSize().width-t.get("size").width)/2,o-=t.get("size").height;else{o+=(e.getSize().height-t.get("size").height)/2;e.getDirection()?n+=e.getSize().width:n-=t.get("size").width}return t.position(n,o),Z.addCell(t),e.embed(t),t}function z(e){e.remove()}function U(){function e(e){function t(e,t){if(-1!==n.indexOf(e.dataModel.typeId))return void(t&&t(e,null));if(n.push(e.dataModel.typeId),o++,e instanceof f&&!e.get("expanded")){if(!e.get("hidden")){var i=R(e);B(),ee=!0}requestAnimationFrame(function(){N(e.typeId,function(n,o){e.set("expanded",!0),e.get("hidden")||(D(e),ee=!1,z(i)),O(e,n,o&&o.fromCache),e.get("hidden")||(V.recalculateLayout(),K.zoomToFit()),t&&t(e,e.getVisibleChildren(!0))},function(n){e.get("hidden")||(D(e),ee=!1,z(i)),new r.ui.Dialog({type:"alert",width:300,title:"Alert",content:n}).open(),t&&t(e,[])})})}else e.get("expanded")&&t&&t(e,e.getVisibleChildren(!0))}function i(e){function a(c){function u(t,n){function o(e){return e.filter(function(e){return-1===s.map(function(e){return e.dataModel.typeId}).indexOf(e.dataModel.typeId)})}if(n){var r=o(n);if(0===r.length&&d.pagination){var u=t.getChildren(!0),f=o(u);if(f.length>0){var p=f[0];t.pagination.focusOnElement(p);var g=t.pagination.getCurrentNodes(!0);s=s.concat(g)}}else 0!==r.length&&(s=s.concat(n))}else l--;a(c+1),e.filter(function(e){return e.get("expanded")}).length===l&&i(s)}var d=e[c];if(d)if(o>=G.TRANSITIVE_EXPANSION_LIMIT_STEP){var f=new r.ui.Dialog({type:"neutral",width:300,title:"Alert",content:"The "+n.length+" nodes were expanded. Do you want to continue?",closeButton:!1,modal:!0,buttons:[{action:"continue",content:"Continue"},{action:"stop",content:"Stop"}]});f.on("action:continue",function(){f.close(),o=0,t(d,u)}),f.on("action:stop",function(){f.close()}),f.open()}else t(d,u)}var s=[],l=e.length;a(0)}t(e,function(e,t){i(t)})}var t=this,n=[],o=0;t.initialNode=null,t.inUse=!1,t.start=function(i){i.configurationSet.expandTransitively&&i instanceof f&&(t.initialNode=i,n=[],o=0,e(i))}}var F=this,j=null,G=i(u),V=null,W=null,$=null,Z=null,K=null,X=null,Y=null,J=null,Q=null,ee=!1,te={},ne=new U(F),oe=G.FULL_NODE_LABELS,ie=null;F.clean=function(){V.cleanLayout()},F.fullNodeLabels=function(e){if(void 0!==e){oe=e;V.getNodes().forEach(function(e){e.set("fullLabel",oe)}),V.recalculateLayout()}return oe},F.setFocusNode=function(e){b("fetching"),ee=!0,N(e,function(t){ee=!1,b("rendering"),requestAnimationFrame(function(){var n=t.nodes.map(function(e){return e.id}).indexOf(e);if(-1!=n){V.getRootNode()&&Y.pushState(),F.clean();var o=w(t.nodes[n]);t.nodes.splice(n,1),O(o.id,t),F.refreshLayout(),W.forEach(function(e){e(o)}),b("completed")}else b("completed")})},function(e){b("error"),ee=!1,b("completed"),new r.ui.Dialog({type:"alert",width:300,title:"Alert",content:e}).open()})},F.onNodeSelected=function(e){j.on("cell:pointerdown",function(t){e(t&&t.model instanceof f?t.model:null)}),j.on("blank:pointerdown",function(){e(null)})},F.onNodeFocused=function(e){W.push(e)},F.onStateChanged=function(e){$.push(e)},F.getNodes=function(){return V.getNodes()},F.getEdges=function(){return V.getEdges()},F.refreshLayout=function(){V.recalculateLayout(),F.center()},F.center=function(e,t,n){if(e&&t)K.center(e,t,n);else{var o=V.getRootNode();K.center(o.position().x+o.getSize().width/2,o.position().y+o.getSize().height/2,n)}},F.zoom=function(e,t){e?K.zoom(e,t):K.zoomToFit(t),V.recalculateLayout(),Q&&Q.refresh()},F.undoState=function(){var e=Y.undoState();e&&(V.loadState(e),V.recalculateLayout(),$.forEach(function(t){t(e)}))},F.redoState=function(){var e=Y.redoState();e&&(V.loadState(e),V.recalculateLayout(),$.forEach(function(t){t(e)}))},F.getStatesHistory=function(){return Y.getHistory()},F.export=function(e){function t(e,t,n){var o;"svg"===n?o=new Blob([e],{type:n}):"png"===n&&(o=m(e)),d(o,t+"."+n)}e||(e={});var n=e.name||"NeighborGram_snapshot_"+y(new Date);"png"===e.type?j.toPNG(function(e){t(e,n,"png")}):j.toSVG(function(e){t(e,n,"svg")},{convertImagesToDataUris:!0,area:j.getContentBBox(),preserveDimensions:!0})},F.setSelectedNode=T,h.call(F,e,t,n,o,G)}var i=e("lodash").cloneDeep,r=e("rappid"),a=e("visualizations-library"),s=e("./graphLayout"),l=e("./stateStorage"),c=e("./popUpMenu"),u=e("./graphElements"),d=e("file-saverjs"),f=u.Node,p=u.Edge,g=u.CrossNode;t.exports=o},{"./graphElements":8,"./graphLayout":9,"./popUpMenu":18,"./stateStorage":19,"file-saverjs":2,lodash:"lodash",rappid:"rappid","visualizations-library":4}],17:[function(e,t,n){function o(e,t,n,o,r){var l=this,c=r&&void 0!=r.DEFAULT_PAGE_SIZE?r.DEFAULT_PAGE_SIZE:s.DEFAULT_PAGE_SIZE;l.next=function(){l.state.curPage<l.state.pageCount-1&&(l.trigger("startLoading"),l.state.prevPage=l.state.curPage,l.state.curPage++,setTimeout(function(){l.refreshLayout(),l.trigger("finishLoading")},50))},l.getCurrentNodes=function(t){var n=l.state.pageSize,o=l.state.curPage;return e.getChildren(t).slice(n*o,(o+1)*n)},l.prev=function(){0!==l.state.curPage&&(l.trigger("startLoading"),l.state.prevPage=l.state.curPage,l.state.curPage--,setTimeout(function(){l.refreshLayout(),l.trigger("finishLoading")},50))},l.goTo=function(e){e<=l.state.pageCount&&e>=0&&e!==l.state.curPage&&(l.trigger("startLoading"),l.state.prevPage=l.state.curPage,l.state.curPage=e,setTimeout(function(){l.refreshLayout(),l.trigger("finishLoading")},50))},l.getPageByElementIndex=function(e){return e>l.state.totalCount?-1:Math.floor(e/l.state.pageSize)},l.focusOn=function(e){l.goTo(l.getPageByElementIndex(e))},l.focusOnElement=function(t){var n=e.getChildren(),o=n.indexOf(t);if(-1!==o)return l.goTo(l.getPageByElementIndex(o));for(var i=n.filter(function(e){return e instanceof a}),r=0;r<i.length;r++){var s=i[r].getChildren();if(-1!==s.indexOf(t))return s.pagination&&s.pagination.focusOnElement(t),o=n.indexOf(i[r]),l.goTo(l.getPageByElementIndex(o))}},l.getState=function(){return l.state},l.getType=function(){return l.type},l.getMyBBox=function(){var e=l.get("size"),n=l.position(),o=t.getScale();return{width:e.width,height:e.height,x:n.x*o.sx,y:n.y*o.sy}},l.updateViewPosition=function(){l.trigger("updateViewPosition")},l.setActive=function(){l.trigger("setActive")},l.setInactive=function(){l.trigger("setInactive")},function(e,t,n,o){var r=e.getChildren().length;n=n||c,l.state={totalCount:r,pageSize:n,curPage:0,prevPage:0,pageCount:Math.ceil(r/n)},l.type=o,l.refreshLayout=t.recalculateLayout;var a="nodes"===l.type?{size:{width:100,height:23}}:{size:{width:20,height:46}};i.shapes.html.Pagination.apply(l,[a])}(e,t,n,o)}var i=e("rappid"),r=e("lodash"),a=e("./graphElements").CrossNode,s={DEFAULT_PAGE_SIZE:5};i.shapes.html||(i.shapes.html={}),i.shapes.html.Pagination=i.shapes.basic.Rect.extend({defaults:i.util.deepSupplement({type:"html.Pagination",attrs:{rect:{stroke:"none","fill-opacity":0,style:{"pointer-events":"none"}}}},i.shapes.basic.Rect.prototype.defaults)}),i.shapes.html.PaginationView=i.dia.ElementView.extend({template:['<button type="button" class="ng-prev" title="Prev"></button>','<div class="ng-pages"><span class="ng-pages-cur"></span>/<span class="ng-pages-total"></span></div>','<button type="button" class="ng-next" title="Next"></button>'].join(""),initialize:function(){function e(){n.disabled=0===t.model.state.curPage,o.disabled=t.model.state.curPage===t.model.state.pageCount-1}r.bindAll(this,"updateBox"),i.dia.ElementView.prototype.initialize.apply(this,arguments),this.box=document.createElement("div"),"nodes"===this.model.getType()?this.box.className="ng-pagination-nodes":this.box.className="ng-pagination-edges",this.box.innerHTML=this.template;var t=this,n=this.box.querySelector(".ng-prev"),o=this.box.querySelector(".ng-next");n.onclick=function(){t.model.prev(),e()},o.onclick=function(){t.model.next(),e()},e(),this.model.on("change",this.updateBox,this),this.model.on("remove",this.removeBox,this),this.model.on("updateViewPosition",this.updateBox,this),this.model.on("setActive",function(){this.addClass("active")},this),this.model.on("setInactive",function(){this.removeClass("active")},this),this.model.on("startLoading",function(){this.addClass("loading")},this),this.model.on("finishLoading",function(){this.removeClass("loading"),this.updatePages()},this),this.updateBox(),this.updatePages()},render:function(){return i.dia.ElementView.prototype.render.apply(this,arguments),this.paper.el.appendChild(this.box),this.updateBox(),this},updateBox:function(){var e=this.model.getMyBBox();this.box.style.width=e.width+"px",this.box.style.height=e.height+"px",this.box.style.left=e.x+"px",this.box.style.top=e.y+"px",this.box.style.transform="rotate("+(this.model.get("angle")||0)+"deg)"},removeBox:function(){this.box.remove()},updatePages:function(){this.box.querySelector(".ng-pages-cur").innerHTML=this.model.getState().curPage+1,this.box.querySelector(".ng-pages-total").innerHTML=this.model.getState().pageCount},addClass:function(e){this.box.className=this.box.className+" "+e},removeClass:function(e){for(var t=this.box,n=t.className.split(" "),o=0;o<n.length;o++)n[o]==e&&(n.splice(o,1),o--);t.className=n.join(" ")}}),o.prototype=Object.create(i.shapes.html.Pagination.prototype),t.exports=o},{"./graphElements":8,lodash:"lodash",rappid:"rappid"}],18:[function(e,t,n){"use strict";function o(e){function t(){function e(e){function t(){e.direction?l.tempConfiguration.visibilityMap[e.typeId]=o.checked:l.tempConfiguration.visibilityMapReverse[e.typeId]=o.checked}var n=document.createElement("DIV");n.className="ng-ui_pop-up_body_links-row_container_connection-list_row",n.setAttribute("title",e.label);var o=document.createElement("INPUT");o.setAttribute("type","checkBox"),o.checked=e.checked,o.style.pointerEvents="none",n.appendChild(o),t(),n.onclick=function(){o.checked=!o.checked,e.checked=o.checked,t()};var i=document.createElement("IMG");i.className=e.direction?"ng-ui_pop-up_body_links-row_container_connection-list_row__incoming-image":"ng-ui_pop-up_body_links-row_container_connection-list_row__outgoing-image",n.appendChild(i);var r=document.createElement("SPAN");r.className="ng-ui_pop-up_body_links-row_container_connection-list_row__label",r.innerText=e.label,n.appendChild(r);var a=document.createElement("SPAN");return a.className="ng-ui_pop-up_body_links-row_container_connection-list_row__bubble",a.innerText=e.count,n.appendChild(a),n}if(l.tempConfiguration.connections){for(var t=0;t<g.length;t++)if(g[t].value===l.tempConfiguration.filterType){g[t].checked=!0;break}if(f.value!==l.tempConfiguration.filterKey&&(f.value=l.tempConfiguration.filterKey),0===l.tempConfiguration.connections.length)p.innerHTML='<div class="ng-ui_pop-up_body_links-row__disabled">List is empty</div>';else{p.innerHTML="";var o=document.createElement("DIV");o.className="ng-ui_pop-up_body_links-row_container",p.appendChild(o);var i=document.createElement("UL");i.className="ng-ui_pop-up_body_links-row_container_connection-list",function(t){n(l.tempConfiguration).forEach(function(n){t.appendChild(e(n))})}(i),o.appendChild(i)}}else p.innerHTML='<div class="ng-ui_pop-up_body_links-row__disabled">Loading..</div>'}function n(e){return l.tempConfiguration.connections.filter(function(t){return("ALL"===e.filterType||"INCOMING"===e.filterType&&t.direction||"OUTGOING"===e.filterType&&!t.direction)&&(!e.filterKey||e.filterKey&&-1!==t.label.toLowerCase().indexOf(e.filterKey.toLowerCase()))})}function o(e){var t={},n={},o=l.tempConfiguration;return function(e,i){e.forEach(function(e){var r=null,a=null,s=u.dataModel.typeId===e.target;s?(r=t,a=o.visibilityMap):(r=n,a=o.visibilityMapReverse),r[e.id]?r[e.id].count++:r[e.id]={typeId:e.id,label:i||e.label,count:1,direction:s,checked:a[e.id]||void 0===a[e.id]}})}(e),Object.keys(t).map(function(e){return t[e]}).concat(Object.keys(n).map(function(e){return n[e]})).sort(function(e,t){return e.label>t.label?1:e.label<t.label?-1:e.direction&&!t.direction?1:!e.direction&&t.direction?-1:0})}function r(){l.tempConfiguration=i(u.configurationSet),l.tempConfiguration.modified=!0,y=a(),s(y),t()}function a(){return u&&u.position?u.position():{x:0,y:0}}function s(e){var t=u.get("size"),n={width:h.clientWidth,height:h.clientHeight};u.getDirection()?function(){h.style.left=(e.x+t.width)*d._sx+"px",h.style.top=(e.y+t.height/2)*d._sx-n.height/2+"px"}():function(){h.style.left=e.x*d._sx-n.width+"px",h.style.top=(e.y+t.height/2)*d._sx-n.height/2+"px"}()}var l=this;l.alive=!0,l.tempConfiguration=i(e.target.configurationSet),l.tempConfiguration.modified=!0;var c=e.base,u=l.target=e.target,d=e.scroller,f=null,p=null,g=null,h=document.createElement("DIV");!function(){function o(e,t){var n=document.createElement(t||"DIV");return n.className=e,a.appendChild(n),n}function r(e){n(l.tempConfiguration).forEach(function(t){t.checked=e})}h.className="ng-ui_pop-up",h.style.position="relative",c.appendChild(h);var a=document.createElement("DIV");a.className="ng-ui_pop-up_body",h.appendChild(a);var s=o("ng-ui_pop-up_body_search-row");f=document.createElement("INPUT"),f.setAttribute("type","text"),f.setAttribute("placeholder","Search.."),f.className="ng-ui_pop-up_body_search-row__input",s.appendChild(f),f.onkeyup=function(){l.tempConfiguration.filterKey=f.value,t()};var d=o("ng-ui_pop-up_body_radio-row","FORM");d.name="filterTypeForm",d.innerHTML='<span class="ng-ui_pop-up_body_radio-row__radio-button"><input class="ng-ui_pop-up_body_radio-row__radio-button-input" name="filterType" value="ALL" type="radio" /><img class="ng-all-connections"/><label> Both</label></span><span class="ng-ui_pop-up_body_radio-row__radio-button"><input class="ng-ui_pop-up_body_radio-row__radio-button-input" name="filterType" value="INCOMING" type="radio" /><img class="ng-incoming-connections"/><label> Incoming</label></span><span class="ng-ui_pop-up_body_radio-row__radio-button"><input class="ng-ui_pop-up_body_radio-row__radio-button-input" name="filterType" value="OUTGOING" type="radio" /><img class="ng-outgoing-connections"/><label> Outgoing</label></span>',g=document.querySelector("form[name=filterTypeForm]").querySelectorAll("input[name=filterType]");for(var y=0;y<g.length;y++)g[y].onclick=function(){l.tempConfiguration.filterType=this.value,t()};var m=d.querySelectorAll(".ng-ui_pop-up_body_radio-row__radio-button");for(y=0;y<m.length;y++)m[y].onclick=function(){var e=this.querySelector("input");e.checked=!0,l.tempConfiguration.filterType=e.value,t()};var b=o("ng-ui_pop-up_body_transitive-row"),v=document.createElement("INPUT");v.setAttribute("type","checkBox"),v.checked=l.tempConfiguration.expandTransitively,b.appendChild(v),b.onclick=function(){v.checked=!v.checked,l.tempConfiguration.expandTransitively=v.checked};var _=document.createElement("LABEL");_.innerText="Transitive expansion",b.appendChild(_),p=o("ng-ui_pop-up_body_links-row"),t(p);var E=o("ng-ui_pop-up_body_buttons-row"),w=document.createElement("BUTTON");w.className="ng-ui_pop-up_body_buttons-row_button tq-button",w.innerText="Select all",E.appendChild(w),w.onclick=function(){r(!0),t()};var x=document.createElement("BUTTON");x.className="ng-ui_pop-up_body_buttons-row_button tq-button",x.innerText="Clear selection",E.appendChild(x),x.onclick=function(){r(!1),t()};var T=document.createElement("SPAN");T.style.flexGrow=1,E.appendChild(T);var S=document.createElement("BUTTON");S.className="ng-ui_pop-up_body_buttons-row_button tq-button",S.innerText="Reset filter",E.appendChild(S),S.onclick=function(){var n=u.getParent();e.beforeApply&&e.beforeApply(u.configurationSet),u.configurationSet=n?i(n.configurationSet):{filterType:"ALL",filterKey:"",visibilityMap:{},visibilityMapReverse:{}},u.configurationSet.connections=l.tempConfiguration.connections,u.configurationSet.modified=!1,l.tempConfiguration=i(u.configurationSet),l.tempConfiguration.modified=!0,t(),l.remove(),e.afterApply&&e.afterApply(u.configurationSet)};var P=document.createElement("BUTTON");P.className="ng-ui_pop-up_body_buttons-row_button go-button",P.innerText="Go",P.onclick=function(){e.beforeApply&&e.beforeApply(u.configurationSet),u.configurationSet=l.tempConfiguration,l.remove(),e.afterApply&&e.afterApply(u.configurationSet)},E.appendChild(P)}();var y=a();s(y),u&&u.on&&u.on("change:position",function(){r()}),d.options.paper.on("blank:pointerdown",function(){l.remove()}),d.options.paper.on("change:customPosition",function(){l.refresh()}),u.on("change:hidden",function(){l.remove()}),d.scrollToElement(u),l.remove=function(){l.alive&&(c.removeChild(h),l.alive=!1)},l.refresh=function(){l.alive&&r()},l.putData=function(e){var t=o(e);u.configurationSet.connections=t,r()}}var i=e("lodash").cloneDeep;t.exports=o},{lodash:"lodash"}],19:[function(e,t,n){"use strict";function o(e,t){function n(){return d[u[p]]}function o(){var e=c.getState();return!!e.rootNode&&(d[e.rootNode.typeId]=e,u[u.length-1]!==e.rootNode.typeId&&u.push(e.rootNode.typeId),!0)}function a(){var e=c.getState();e.rootNode&&(d[e.rootNode.typeId]=e)}function s(){u.length>f&&u.shift(),Object.keys(d).forEach(function(e){-1===u.indexOf(e)&&(delete d[e]||(d[e]=void 0))})}var l=this;t||(t={});var c=e,u=[],d={},f=t.deckLength||r,p=-1;l.pushState=function(){u.length-1>p&&u.splice(p+1,u.length),o()&&(s(),p=u.length)},l.getHistory=function(){return{states:i(u),currentIndex:p}},l.undoState=function(){return p===u.length?o()&&s():a(),p>0?(p--,n()):null},l.redoState=function(){return a(),p+1<u.length?(p++,n()):null}}var i=e("lodash").cloneDeep,r=4;t.exports=o},{lodash:"lodash"}],20:[function(e,t,n){function o(){var e=this;e._subscribtions={},e.on=function(t,n){e._subscribtions[t]||(e._subscribtions[t]=[]),e._subscribtions[t].push(n)},e.unsubscribe=function(t){i.values(e._subscribtions).forEach(function(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)})},e.trigger=function(t,n){n instanceof Array||(n=[n]),e._subscribtions&&e._subscribtions[t]&&e._subscribtions[t].forEach(function(e){e.apply(this,n)})}}var i=e("lodash");t.exports=o},{lodash:"lodash"}]},{},[15])(15)});